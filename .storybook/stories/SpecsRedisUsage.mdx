# Redis Usage (concept)

import { Meta } from '@storybook/blocks';
import { InlineTOC } from '../components/InlineTOC';
import { BackToTop } from '../components/BackToTop';

<Meta title="Specs/Redis/Redis Usage" />
<a id="top"></a>

### Table of Contents

- Keyspaces (#keyspaces)
- Operations (#operations)
- Observability (#observability)
- Alignment (#alignment)
- Notes (#notes)

<InlineTOC
  items={[
    { id: 'keyspaces', label: 'Keyspaces' },
    { id: 'operations', label: 'Operations' },
    { id: 'observability', label: 'Observability' },
    { id: 'alignment', label: 'Alignment' },
    { id: 'notes', label: 'Notes' },
  ]}
/>

This is a concept document (not implemented in this repository). It outlines proposed Redis usage patterns aligned with behaviors demonstrated via MSW in Storybook.

## Keyspaces (concept)

<a id="keyspaces"></a>- ratelimit:{clientId}- Fields: count, resetAt - TTL: 10s (matches demo
window) - cache:etag:{resourceKey}- Fields: etag, payload, updatedAt - TTL: 60s (matches /api/cache
demo header) - session:quiz:{sessionId}- Fields: userId, categoryId, difficulty, progress - TTL: 24h

## Operations (concept)

<a id="operations"></a>- Increment rate-limit counter atomically; enforce Retry-After based on
resetAt - Serve 304 when If-None-Match == stored ETag; else update etag/payload

## Observability

<a id="observability"></a>- Emit metrics for hits/misses, rate-limit blocks, and key evictions

## Alignment

<a id="alignment"></a>- Mirrors MSW demos in /api/ratelimit and /api/cache for predictable dev
parity

## Notes

<a id="notes"></a>

<BackToTop />- This repository does not contain Redis code; this page is for planned design.
