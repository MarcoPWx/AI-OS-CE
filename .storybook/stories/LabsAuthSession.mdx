# Labs: Auth & Session — Mock flows and guards

import { Meta } from '@storybook/blocks';

<Meta title="Labs/Auth & Session" />

What this lab covers
- Mock auth flows (email/GitHub), session persistence, and guarded actions

Stories to use
- src/stories/AuthSmoke.stories.tsx — high-level smoke
- src/stories/AuthMSWFlow.stories.tsx — MSW-backed scenarios
- AppWithAuth.tsx — wraps AuthContext; shows MockBanner in mock mode

Docs
- .storybook/stories/SpecsSecurityPrivacyExtended.mdx (auth considerations)
- .storybook/stories/SpecsServiceCatalog.mdx (auth endpoints)

Exercises
1) Session persistence
   - Login via mock flow; reload; confirm user restored
2) Guarded actions
   - Attempt a protected action while logged out → expect blocked
   - Login and re-try → expect allowed
3) Error paths
   - Simulate 401/403 in MSW; verify UI states

