# Service-to-Service Orchestration

import { Meta, Canvas, Story } from '@storybook/blocks';
import { InlineTOC } from '../components/InlineTOC';
import { BackToTop } from '../components/BackToTop';

<Meta title="Specs/Service-to-Service Orchestration" />
<a id="top"></a>

This page documents composite flows between internal services and provides a hands-on playground.

### Table of Contents

- Overview (#overview)
- Sequence (#sequence)
- Playground (#playground)

<InlineTOC
  items={[
    { id: 'overview', label: 'Overview' },
    { id: 'sequence', label: 'Sequence' },
    { id: 'playground', label: 'Playground' },
  ]}
/>

## Overview

<a id="overview"></a>
- Composite endpoint: POST `/api/quiz/start`
- Inputs: `{ topic: string, difficulty: 'easy'|'medium'|'hard' }`
- Outputs: `{ sessionId, questions: [...], profile: {...}, validation: [...] }`

## Sequence

<a id="sequence"></a>
```mermaid sequenceDiagram participant UI as App/Web participant API as API Gateway (composite)
participant AE as Adaptive Engine participant LO as Learning Orchestrator participant BV as Bloom
Validator

UI->>API: POST /api/quiz/start { topic, difficulty }
API->>AE: GET /recommendations/{userId}
AE-->>API: { recommendedDifficulty, learningStyle }
API->>LO: POST /sessions/start { topic, difficulty, userId }
LO-->>API: { id, questions }
API->>BV: POST /validate/batch { questions }
BV-->>API: { results }
API-->>UI: { sessionId, questions, profile, validation }

```

## Playground
<a id="playground"></a>
- Use the Dev/S2S Orchestration story to run the composite flow with MSW.

<Canvas>
  <Story id="dev-s2s-orchestration--default" />
</Canvas>

<BackToTop />
```
