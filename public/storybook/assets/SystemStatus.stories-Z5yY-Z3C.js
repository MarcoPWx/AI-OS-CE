import{R as e}from"./index-R2V08a_e.js";import{L as b,f as x,a as k,b as v}from"./LastUpdated-u3t6Tx8m.js";import{M as T,r as w}from"./index-sB0THNqM.js";import"./jsx-runtime-BjG_zV1W.js";function R(s,a){const[o,l]=e.useState(null),[n,r]=e.useState(null),[y,m]=e.useState(!1),[h,E]=e.useState(null),c=e.useCallback(async()=>{m(!0),r(null);try{const[t,u]=await Promise.all([x(),k(s,a)]);l(u);const i=v(t,s),f=(i==null?void 0:i.mtimeIso)||(t==null?void 0:t.generatedAtIso)||(t==null?void 0:t.generatedAt);f&&E(f),u||r("Failed to load document")}catch(t){r((t==null?void 0:t.message)||"Failed to load")}finally{m(!1)}},[s,a]);return e.useEffect(()=>{c()},[c]),{text:o,error:n,loading:y,lastUpdated:h,reload:c}}function M(){const s=e.useMemo(()=>["/docs/SYSTEM_STATUS.md"],[]),{text:a,error:o,loading:l,lastUpdated:n,reload:r}=R(s);return e.createElement("div",{style:{padding:16,display:"grid",gap:12}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"}},e.createElement("h3",{style:{margin:0}},"System Status"),e.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:8,alignItems:"center"}},e.createElement(b,{iso:n}),e.createElement("button",{onClick:r,disabled:l},l?"Reloading…":"Refresh"))),o&&e.createElement("div",{role:"alert",style:{color:"#ff6b6b"}},o),!o&&!a&&e.createElement("div",null,"Loading…"),a&&e.createElement("div",{style:{maxHeight:"80vh",overflow:"auto",padding:12,border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,background:"rgba(255,255,255,0.02)"}},e.createElement(T,{remarkPlugins:[w]},a)))}const _={title:"Docs/System Status",component:M,parameters:{helpDocs:[{href:"/docs/status/SYSTEM_STATUS_CURRENT.md",title:"Open System Status"},{href:"?path=/story/docs-repo-docs-browser--default",title:"Repo Docs Browser"}],docs:{description:{component:"Renders System Status live from /docs with fallback to /api/docs/read?key=system-status. Shows Last updated from the docs manifest if present."}}}},d={};var p,g,S;d.parameters={...d.parameters,docs:{...(p=d.parameters)==null?void 0:p.docs,source:{originalSource:"{}",...(S=(g=d.parameters)==null?void 0:g.docs)==null?void 0:S.source}}};const A=["Default"];export{d as Default,A as __namedExportsOrder,_ as default};
