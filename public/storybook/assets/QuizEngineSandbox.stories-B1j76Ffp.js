import{R as e,r as g}from"./index-R2V08a_e.js";import{n as C,a as k,c as q,g as I,B as m}from"./Button-B9oNP3Nu.js";const y=t=>{let n;const s=new Set,a=(r,l)=>{const o=typeof r=="function"?r(n):r;if(!Object.is(o,n)){const h=n;n=l??(typeof o!="object"||o===null)?o:Object.assign({},n,o),s.forEach(w=>w(n,h))}},i=()=>n,u={setState:a,getState:i,getInitialState:()=>p,subscribe:r=>(s.add(r),()=>s.delete(r))},p=n=t(a,i,u);return u},T=t=>t?y(t):y,R=t=>t;function D(t,n=R){const s=e.useSyncExternalStore(t.subscribe,e.useCallback(()=>n(t.getState()),[t,n]),e.useCallback(()=>n(t.getInitialState()),[t,n]));return e.useDebugValue(s),s}const v=t=>{const n=T(t),s=a=>D(n,a);return Object.assign(s,n),s},z=t=>t?v(t):v;function $(t,n){return[{id:"q1",text:`(${t}/${n}) What is 2+2?`,options:["3","4","5","6"],correctIndex:1},{id:"q2",text:`(${t}/${n}) Select the even number`,options:["1","2","3","5"],correctIndex:1},{id:"q3",text:`(${t}/${n}) Which is a vowel?`,options:["b","c","a","g"],correctIndex:2}]}const j=z((t,n)=>({session:null,questions:[],start:(s,a)=>{const i=$(s,a),c=q({topic:s,difficulty:a,questions:i});t({session:c,questions:i})},answer:s=>{const{session:a}=n();a&&t({session:k(a,s)})},next:()=>{const{session:s,questions:a}=n();s&&t({session:C(s,a)})},reset:()=>t({session:null,questions:[]})}));function S({label:t,children:n}){return e.createElement("label",{style:{display:"flex",gap:8,alignItems:"center"}},e.createElement("div",{style:{width:140,fontSize:12,opacity:.8}},t),e.createElement("div",null,n))}function B(){const{session:t,start:n,answer:s,next:a,reset:i}=j(),[c,E]=g.useState("math"),[u,p]=g.useState("easy"),r=g.useMemo(()=>t&&t.state==="completed"?I(t):null,[t]);return e.createElement("div",{style:{padding:16,display:"grid",gridTemplateColumns:"320px 1fr",gap:16}},e.createElement("div",null,e.createElement("div",{style:{fontWeight:600,marginBottom:8}},"Controls"),e.createElement(S,{label:"Topic"},e.createElement("input",{value:c,onChange:l=>E(l.target.value)})),e.createElement(S,{label:"Difficulty"},e.createElement("select",{value:u,onChange:l=>p(l.target.value)},e.createElement("option",null,"easy"),e.createElement("option",null,"medium"),e.createElement("option",null,"hard"))),e.createElement("div",{style:{display:"flex",gap:8,marginTop:8}},e.createElement(m,{onClick:()=>n(c,u)},"Start"),e.createElement(m,{variant:"ghost",onClick:()=>i()},"Reset"))),e.createElement("div",null,!t&&e.createElement("div",null,"Start a session to begin."),t&&e.createElement("div",{style:{border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:12}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("div",null,e.createElement("strong",null,"Session:")," ",t.id),e.createElement("div",null,e.createElement("span",{style:{marginRight:12}},e.createElement("strong",null,"Score:")," ",t.score,"/",t.total),e.createElement("span",{style:{marginRight:12}},e.createElement("strong",null,"XP:")," ",t.xp),e.createElement("span",null,e.createElement("strong",null,"Streak:")," ",t.streak," (Max ",t.maxStreak,")"))),t.state==="in_progress"&&t.current&&e.createElement("div",{style:{marginTop:12}},e.createElement("div",{style:{fontWeight:600}},t.index+1,". ",t.current.text),e.createElement("ul",{style:{listStyle:"none",padding:0,marginTop:8}},t.current.options.map((l,o)=>e.createElement("li",{key:o,style:{marginBottom:6}},e.createElement(m,{variant:"ghost",onClick:()=>s(o)},l)))),e.createElement("div",{style:{marginTop:8}},e.createElement(m,{onClick:()=>a()},"Next"))),t.state==="completed"&&r&&e.createElement("div",{style:{marginTop:12}},e.createElement("div",null,e.createElement("strong",null,"Completed")),e.createElement("div",null,"Score: ",r.score,"/",r.total," (",r.percent,"%)"),e.createElement("div",null,"XP: ",r.xp," • Max Streak: ",r.maxStreak),e.createElement("div",{style:{marginTop:8}},e.createElement("details",null,e.createElement("summary",null,"Answers"),e.createElement("pre",{style:{fontFamily:"monospace"}},JSON.stringify(r.answers,null,2))))))))}const W={title:"Dev/Quiz Engine Sandbox",component:B,parameters:{helpDocs:[{href:"?path=/story/specs-quiz-flows-end-to-end--page",title:"Quiz Flows — End-to-End"},{href:"?path=/story/specs-service-catalog--page#express-api",title:"Service Catalog"}],docs:{description:{component:"Interactive sandbox for the core quiz engine: start sessions, answer questions, and review scoring/XP/streak behavior."}}}},d={};var x,f,b;d.parameters={...d.parameters,docs:{...(x=d.parameters)==null?void 0:x.docs,source:{originalSource:"{}",...(b=(f=d.parameters)==null?void 0:f.docs)==null?void 0:b.source}}};const M=["Default"];export{d as Default,M as __namedExportsOrder,W as default};
