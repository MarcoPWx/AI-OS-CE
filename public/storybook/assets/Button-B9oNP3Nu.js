import{R as i}from"./index-R2V08a_e.js";function l(t){return`${t}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,7)}`}function m(t){const r=Date.now();return{id:l("sess"),topic:t.topic,difficulty:t.difficulty,startedAt:r,index:0,total:t.questions.length,streak:0,maxStreak:0,score:0,xp:0,answers:[],state:t.questions.length>0?"in_progress":"completed",current:t.questions[0]}}function x(t,r){if(!t)return 0;const e=10,n=r>=5?1.5:r>=3?1.2:1;return Math.round(e*n)}function g(t,r,e){if(t.state!=="in_progress"||!t.current)return t;const n=t.current,a=r===n.correctIndex,o=a?t.streak+1:0,u=Math.max(t.maxStreak,o),d=x(a,o),p=t.answers.concat({questionId:n.id,selectedIndex:r,correct:a,elapsedMs:e});return{...t,streak:o,maxStreak:u,score:t.score+(a?1:0),xp:t.xp+d,answers:p}}function b(t,r){if(t.state!=="in_progress")return t;const e=t.index+1;return e>=t.total?{...t,index:e,state:"completed",completedAt:Date.now(),current:void 0}:{...t,index:e,current:r[e]}}function w(t){const r=t.total>0?Math.round(t.score/t.total*100):0;return{sessionId:t.id,topic:t.topic,difficulty:t.difficulty,score:t.score,total:t.total,percent:r,xp:t.xp,maxStreak:t.maxStreak,answers:t.answers,startedAt:t.startedAt,completedAt:t.completedAt}}const c={colors:{fg:"#d7e0ff",bg:"#0b1020",accent:"#00d084",danger:"#ff6b6b",border:"rgba(255,255,255,0.12)"},radius:8,spacing:t=>t*4};function k({children:t,variant:r="primary",onClick:e,disabled:n}){const a={padding:`${c.spacing(2)}px ${c.spacing(3)}px`,borderRadius:c.radius,border:`1px solid ${c.colors.border}`,background:r==="primary"?c.colors.accent:r==="danger"?"#7b1b1b":"transparent",color:r==="primary"?"#00140d":c.colors.fg,cursor:n?"not-allowed":"pointer",opacity:n?.6:1};return i.createElement("button",{style:a,onClick:e,disabled:n},t)}export{k as B,g as a,m as c,w as g,b as n};
