var Rn=Object.defineProperty;var Wt=e=>{throw TypeError(e)};var Tn=(e,t,r)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var R=(e,t,r)=>Tn(e,typeof t!="symbol"?t+"":t,r),ct=(e,t,r)=>t.has(e)||Wt("Cannot "+r);var Z=(e,t,r)=>(ct(e,t,"read from private field"),r?r.call(e):t.get(e)),ke=(e,t,r)=>t.has(e)?Wt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ut=(e,t,r,n)=>(ct(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),K=(e,t,r)=>(ct(e,t,"access private method"),r);import{R as g}from"./index-R2V08a_e.js";import{i as H,a as w,E as vt,L as In,t as Ke,I as Ut,k as xn,c as Ln,g as re,R as Pn,h as v,H as h,d as S}from"./index-BptGKHon.js";function Cn(e,t){const r=e.emit;if(r._isPiped)return;const n=function(o,...i){return t.emit(o,...i),r.call(this,o,...i)};n._isPiped=!0,e.emit=n}function Dn(e){const t=[...e];return Object.freeze(t),t}class zn{constructor(){R(this,"subscriptions",[])}dispose(){let t;for(;t=this.subscriptions.shift();)t()}}class $n{constructor(t){R(this,"handlers");this.initialHandlers=t,this.handlers=[...t]}prepend(t){this.handlers.unshift(...t)}reset(t){this.handlers=t.length>0?[...t]:[...this.initialHandlers]}currentHandlers(){return this.handlers}}class jn extends zn{constructor(...r){super();R(this,"handlersController");R(this,"emitter");R(this,"publicEmitter");R(this,"events");H(this.validateHandlers(r),w.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.handlersController=new $n(r),this.emitter=new vt,this.publicEmitter=new vt,Cn(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push(()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()})}validateHandlers(r){return r.every(n=>!Array.isArray(n))}use(...r){H(this.validateHandlers(r),w.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.handlersController.prepend(r)}restoreHandlers(){this.handlersController.currentHandlers().forEach(r=>{"isUsed"in r&&(r.isUsed=!1)})}resetHandlers(...r){this.handlersController.reset(r)}listHandlers(){return Dn(this.handlersController.currentHandlers())}createLifeCycleEvents(){return{on:(...r)=>this.publicEmitter.on(...r),removeListener:(...r)=>this.publicEmitter.removeListener(...r),removeAllListeners:(...r)=>this.publicEmitter.removeAllListeners(...r)}}}function Nt(e){return globalThis[e]||void 0}function An(e,t){globalThis[e]=t}function On(e){delete globalThis[e]}var Mn=class{constructor(t){this.symbol=t,this.readyState="INACTIVE",this.emitter=new vt,this.subscriptions=[],this.logger=new In(t.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const t=this.logger.extend("apply");if(t.info("applying the interceptor..."),this.readyState==="APPLIED"){t.info("intercepted already applied!");return}if(!this.checkEnvironment()){t.info("the interceptor cannot be applied in this environment!");return}this.readyState="APPLYING";const n=this.getInstance();if(n){t.info("found a running instance, reusing..."),this.on=(s,o)=>(t.info('proxying the "%s" listener',s),n.emitter.addListener(s,o),this.subscriptions.push(()=>{n.emitter.removeListener(s,o),t.info('removed proxied "%s" listener!',s)}),this),this.readyState="APPLIED";return}t.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(t,r){const n=this.logger.extend("on");return this.readyState==="DISPOSING"||this.readyState==="DISPOSED"?(n.info("cannot listen to events, already disposed!"),this):(n.info('adding "%s" event listener:',t,r),this.emitter.on(t,r),this)}once(t,r){return this.emitter.once(t,r),this}off(t,r){return this.emitter.off(t,r),this}removeAllListeners(t){return this.emitter.removeAllListeners(t),this}dispose(){const t=this.logger.extend("dispose");if(this.readyState==="DISPOSED"){t.info("cannot dispose, already disposed!");return}if(t.info("disposing the interceptor..."),this.readyState="DISPOSING",!this.getInstance()){t.info("no interceptors running, skipping dispose...");return}if(this.clearInstance(),t.info("global symbol deleted:",Nt(this.symbol)),this.subscriptions.length>0){t.info("disposing of %d subscriptions...",this.subscriptions.length);for(const r of this.subscriptions)r();this.subscriptions=[],t.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),t.info("destroyed the listener!"),this.readyState="DISPOSED"}getInstance(){var t;const r=Nt(this.symbol);return this.logger.info("retrieved global instance:",(t=r==null?void 0:r.constructor)==null?void 0:t.name),r}setInstance(){An(this.symbol,this),this.logger.info("set global instance!",this.symbol.description)}clearInstance(){On(this.symbol),this.logger.info("cleared global instance!",this.symbol.description)}};function Zn(){return Math.random().toString(16).slice(2)}function qn(){const e=(t,r)=>{e.state="pending",e.resolve=n=>{if(e.state!=="pending")return;e.result=n;const s=o=>(e.state="fulfilled",o);return t(n instanceof Promise?n:Promise.resolve(n).then(s))},e.reject=n=>{if(e.state==="pending")return queueMicrotask(()=>{e.state="rejected"}),r(e.rejectionReason=n)}};return e}var N,ye,We,Ir,Wn=(Ir=class extends Promise{constructor(r=null){const n=qn();super((s,o)=>{n(s,o),r==null||r(n.resolve,n.reject)});ke(this,ye);ke(this,N);R(this,"resolve");R(this,"reject");ut(this,N,n),this.resolve=Z(this,N).resolve,this.reject=Z(this,N).reject}get state(){return Z(this,N).state}get rejectionReason(){return Z(this,N).rejectionReason}then(r,n){return K(this,ye,We).call(this,super.then(r,n))}catch(r){return K(this,ye,We).call(this,super.catch(r))}finally(r){return K(this,ye,We).call(this,super.finally(r))}},N=new WeakMap,ye=new WeakSet,We=function(r){return Object.defineProperties(r,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},Ir),Un=async e=>{try{return{error:null,data:await e().catch(r=>{throw r})}}catch(t){return{error:t,data:null}}};const Nn=async({request:e,requestId:t,handlers:r,resolutionContext:n})=>{let s=null,o=null;for(const i of r)if(o=await i.run({request:e,requestId:t,resolutionContext:n}),o!==null&&(s=i),o!=null&&o.response)break;return s?{handler:s,parsedResult:o==null?void 0:o.parsedResult,response:o==null?void 0:o.response}:null};function Bn(e){const t=new URL(e.url);return t.protocol==="file:"||/(fonts\.googleapis\.com)/.test(t.hostname)||/node_modules/.test(t.pathname)||t.pathname.includes("@vite")?!0:/\.(s?css|less|m?jsx?|m?tsx?|html|ttf|otf|woff|woff2|eot|gif|jpe?g|png|avif|webp|svg|mp4|webm|ogg|mov|mp3|wav|ogg|flac|aac|pdf|txt|csv|json|xml|md|zip|tar|gz|rar|7z)$/i.test(t.pathname)}async function Cr(e,t="warn"){const r=new URL(e.url),n=Ke(r)+r.search,s=e.method==="HEAD"||e.method==="GET"?null:await e.clone().text(),i=`intercepted a request without a matching request handler:${`

  • ${e.method} ${n}

${s?`  • Request body: ${s}

`:""}`}If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests`;function a(c){switch(c){case"error":throw w.error("Error: %s",i),new Ut(w.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":{w.warn("Warning: %s",i);break}case"bypass":break;default:throw new Ut(w.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',c))}}if(typeof t=="function"){t(e,{warning:a.bind(null,"warn"),error:a.bind(null,"error")});return}Bn(e)||a(t)}function Hn(e,t){const r=Reflect.get(t,xn);r&&Ln.setCookie(r,e.url)}async function Dr(e,t,r,n,s,o){var u,l,f,p,m,b;if(s.emit("request:start",{request:e,requestId:t}),(u=e.headers.get("accept"))!=null&&u.includes("msw/passthrough")){s.emit("request:end",{request:e,requestId:t}),(l=o==null?void 0:o.onPassthroughResponse)==null||l.call(o,e);return}const i=await Un(()=>Nn({request:e,requestId:t,handlers:r,resolutionContext:o==null?void 0:o.resolutionContext}));if(i.error)throw s.emit("unhandledException",{error:i.error,request:e,requestId:t}),i.error;if(!i.data){await Cr(e,n.onUnhandledRequest),s.emit("request:unhandled",{request:e,requestId:t}),s.emit("request:end",{request:e,requestId:t}),(f=o==null?void 0:o.onPassthroughResponse)==null||f.call(o,e);return}const{response:a}=i.data;if(!a){s.emit("request:end",{request:e,requestId:t}),(p=o==null?void 0:o.onPassthroughResponse)==null||p.call(o,e);return}if(a.status===302&&a.headers.get("x-msw-intention")==="passthrough"){s.emit("request:end",{request:e,requestId:t}),(m=o==null?void 0:o.onPassthroughResponse)==null||m.call(o,e);return}Hn(e,a),s.emit("request:match",{request:e,requestId:t});const c=i.data;return(b=o==null?void 0:o.onMockedResponse)==null||b.call(o,a,c),s.emit("request:end",{request:e,requestId:t}),a}function Fn(e){return{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}}function xt(e){return t=>t!=null&&typeof t=="object"&&"__kind"in t&&t.__kind===e}function Bt(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}function zr(e,t){return Object.entries(t).reduce((r,[n,s])=>{const o=r[n];return Array.isArray(o)&&Array.isArray(s)?(r[n]=o.concat(s),r):Bt(o)&&Bt(s)?(r[n]=zr(o,s),r):(r[n]=s,r)},Object.assign({},e))}function Gn(e){const t=Object.getOwnPropertyDescriptor(globalThis,e);return typeof t>"u"||typeof t.get=="function"&&typeof t.get()>"u"||typeof t.get>"u"&&t.value==null?!1:typeof t.set>"u"&&!t.configurable?(console.error(`[MSW] Failed to apply interceptor: the global \`${e}\` property is non-configurable. This is likely an issue with your environment. If you are using a framework, please open an issue about this in their repository.`),!1):!0}function L(e,t){return Object.defineProperties(t,{target:{value:e,enumerable:!0,writable:!0},currentTarget:{value:e,enumerable:!0,writable:!0}}),t}var pe=Symbol("kCancelable"),A=Symbol("kDefaultPrevented"),Lt=class extends MessageEvent{constructor(e,t){super(e,t),this[pe]=!!t.cancelable,this[A]=!1}get cancelable(){return this[pe]}set cancelable(e){this[pe]=e}get defaultPrevented(){return this[A]}set defaultPrevented(e){this[A]=e}preventDefault(){this.cancelable&&!this[A]&&(this[A]=!0)}},Ye=class extends Event{constructor(e,t={}){super(e,t),this.code=t.code===void 0?0:t.code,this.reason=t.reason===void 0?"":t.reason,this.wasClean=t.wasClean===void 0?!1:t.wasClean}},Ht=class extends Ye{constructor(e,t={}){super(e,t),this[pe]=!!t.cancelable,this[A]=!1}get cancelable(){return this[pe]}set cancelable(e){this[pe]=e}get defaultPrevented(){return this[A]}set defaultPrevented(e){this[A]=e}preventDefault(){this.cancelable&&!this[A]&&(this[A]=!0)}},_e=Symbol("kEmitter"),$e=Symbol("kBoundListener"),Vn=class{constructor(e,t){this.socket=e,this.transport=t,this.id=Zn(),this.url=new URL(e.url),this[_e]=new EventTarget,this.transport.addEventListener("outgoing",r=>{const n=L(this.socket,new Lt("message",{data:r.data,origin:r.origin,cancelable:!0}));this[_e].dispatchEvent(n),n.defaultPrevented&&r.preventDefault()}),this.transport.addEventListener("close",r=>{this[_e].dispatchEvent(L(this.socket,new Ye("close",r)))})}addEventListener(e,t,r){if(!Reflect.has(t,$e)){const n=t.bind(this.socket);Object.defineProperty(t,$e,{value:n,enumerable:!1,configurable:!1})}this[_e].addEventListener(e,Reflect.get(t,$e),r)}removeEventListener(e,t,r){this[_e].removeEventListener(e,Reflect.get(t,$e),r)}send(e){this.transport.send(e)}close(e,t){this.transport.close(e,t)}},Ft="InvalidAccessError: close code out of user configurable range",He=Symbol("kPassthroughPromise"),$r=Symbol("kOnSend"),xe=Symbol("kClose"),Ce=class extends EventTarget{constructor(e,t){super(),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=e.toString(),this.protocol="",this.extensions="",this.binaryType="blob",this.readyState=this.CONNECTING,this.bufferedAmount=0,this[He]=new Wn,queueMicrotask(async()=>{await this[He]||(this.protocol=typeof t=="string"?t:Array.isArray(t)&&t.length>0?t[0]:"",this.readyState===this.CONNECTING&&(this.readyState=this.OPEN,this.dispatchEvent(L(this,new Event("open")))))})}set onopen(e){this.removeEventListener("open",this._onopen),this._onopen=e,e!==null&&this.addEventListener("open",e)}get onopen(){return this._onopen}set onmessage(e){this.removeEventListener("message",this._onmessage),this._onmessage=e,e!==null&&this.addEventListener("message",e)}get onmessage(){return this._onmessage}set onerror(e){this.removeEventListener("error",this._onerror),this._onerror=e,e!==null&&this.addEventListener("error",e)}get onerror(){return this._onerror}set onclose(e){this.removeEventListener("close",this._onclose),this._onclose=e,e!==null&&this.addEventListener("close",e)}get onclose(){return this._onclose}send(e){if(this.readyState===this.CONNECTING)throw this.close(),new DOMException("InvalidStateError");this.readyState===this.CLOSING||this.readyState===this.CLOSED||(this.bufferedAmount+=Xn(e),queueMicrotask(()=>{var t;this.bufferedAmount=0,(t=this[$r])==null||t.call(this,e)}))}close(e=1e3,t){H(e,Ft),H(e===1e3||e>=3e3&&e<=4999,Ft),this[xe](e,t)}[xe](e=1e3,t,r=!0){this.readyState===this.CLOSING||this.readyState===this.CLOSED||(this.readyState=this.CLOSING,queueMicrotask(()=>{this.readyState=this.CLOSED,this.dispatchEvent(L(this,new Ye("close",{code:e,reason:t,wasClean:r}))),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null}))}addEventListener(e,t,r){return super.addEventListener(e,t,r)}removeEventListener(e,t,r){return super.removeEventListener(e,t,r)}};Ce.CONNECTING=0;Ce.OPEN=1;Ce.CLOSING=2;Ce.CLOSED=3;function Xn(e){return typeof e=="string"?e.length:e instanceof Blob?e.size:e.byteLength}var W=Symbol("kEmitter"),je=Symbol("kBoundListener"),lt=Symbol("kSend"),Jn=class{constructor(e,t,r){this.client=e,this.transport=t,this.createConnection=r,this[W]=new EventTarget,this.mockCloseController=new AbortController,this.realCloseController=new AbortController,this.transport.addEventListener("outgoing",n=>{typeof this.realWebSocket>"u"||queueMicrotask(()=>{n.defaultPrevented||this[lt](n.data)})}),this.transport.addEventListener("incoming",this.handleIncomingMessage.bind(this))}get socket(){return H(this.realWebSocket,'Cannot access "socket" on the original WebSocket server object: the connection is not open. Did you forget to call `server.connect()`?'),this.realWebSocket}connect(){H(!this.realWebSocket||this.realWebSocket.readyState!==WebSocket.OPEN,'Failed to call "connect()" on the original WebSocket instance: the connection already open');const e=this.createConnection();e.binaryType=this.client.binaryType,e.addEventListener("open",t=>{this[W].dispatchEvent(L(this.realWebSocket,new Event("open",t)))},{once:!0}),e.addEventListener("message",t=>{this.transport.dispatchEvent(L(this.realWebSocket,new MessageEvent("incoming",{data:t.data,origin:t.origin})))}),this.client.addEventListener("close",t=>{this.handleMockClose(t)},{signal:this.mockCloseController.signal}),e.addEventListener("close",t=>{this.handleRealClose(t)},{signal:this.realCloseController.signal}),e.addEventListener("error",()=>{const t=L(e,new Event("error",{cancelable:!0}));this[W].dispatchEvent(t),t.defaultPrevented||this.client.dispatchEvent(L(this.client,new Event("error")))}),this.realWebSocket=e}addEventListener(e,t,r){if(!Reflect.has(t,je)){const n=t.bind(this.client);Object.defineProperty(t,je,{value:n,enumerable:!1})}this[W].addEventListener(e,Reflect.get(t,je),r)}removeEventListener(e,t,r){this[W].removeEventListener(e,Reflect.get(t,je),r)}send(e){this[lt](e)}[lt](e){const{realWebSocket:t}=this;if(H(t,'Failed to call "server.send()" for "%s": the connection is not open. Did you forget to call "server.connect()"?',this.client.url),!(t.readyState===WebSocket.CLOSING||t.readyState===WebSocket.CLOSED)){if(t.readyState===WebSocket.CONNECTING){t.addEventListener("open",()=>{t.send(e)},{once:!0});return}t.send(e)}}close(){const{realWebSocket:e}=this;H(e,'Failed to close server connection for "%s": the connection is not open. Did you forget to call "server.connect()"?',this.client.url),this.realCloseController.abort(),!(e.readyState===WebSocket.CLOSING||e.readyState===WebSocket.CLOSED)&&(e.close(),queueMicrotask(()=>{this[W].dispatchEvent(L(this.realWebSocket,new Ht("close",{code:1e3,cancelable:!0})))}))}handleIncomingMessage(e){const t=L(e.target,new Lt("message",{data:e.data,origin:e.origin,cancelable:!0}));this[W].dispatchEvent(t),t.defaultPrevented||this.client.dispatchEvent(L(this.client,new MessageEvent("message",{data:e.data,origin:e.origin})))}handleMockClose(e){this.realWebSocket&&this.realWebSocket.close()}handleRealClose(e){this.mockCloseController.abort();const t=L(this.realWebSocket,new Ht("close",{code:e.code,reason:e.reason,wasClean:e.wasClean,cancelable:!0}));this[W].dispatchEvent(t),t.defaultPrevented||this.client[xe](e.code,e.reason)}},Kn=class extends EventTarget{constructor(e){super(),this.socket=e,this.socket.addEventListener("close",t=>{this.dispatchEvent(L(this.socket,new Ye("close",t)))}),this.socket[$r]=t=>{this.dispatchEvent(L(this.socket,new Lt("outgoing",{data:t,origin:this.socket.url,cancelable:!0})))}}addEventListener(e,t,r){return super.addEventListener(e,t,r)}dispatchEvent(e){return super.dispatchEvent(e)}send(e){queueMicrotask(()=>{if(this.socket.readyState===this.socket.CLOSING||this.socket.readyState===this.socket.CLOSED)return;const t=()=>{this.socket.dispatchEvent(L(this.socket,new MessageEvent("message",{data:e,origin:this.socket.url})))};this.socket.readyState===this.socket.CONNECTING?this.socket.addEventListener("open",()=>{t()},{once:!0}):t()})}close(e,t){this.socket[xe](e,t)}},jr=class extends Mn{constructor(){super(jr.symbol)}checkEnvironment(){return Gn("WebSocket")}setup(){const e=Object.getOwnPropertyDescriptor(globalThis,"WebSocket"),t=new Proxy(globalThis.WebSocket,{construct:(r,n,s)=>{const[o,i]=n,a=()=>Reflect.construct(r,n,s),c=new Ce(o,i),u=new Kn(c);return queueMicrotask(()=>{try{const l=new Jn(c,u,a);this.emitter.emit("connection",{client:new Vn(c,u),server:l,info:{protocols:i}})?c[He].resolve(!1):(c[He].resolve(!0),l.connect(),l.addEventListener("open",()=>{c.dispatchEvent(L(c,new Event("open"))),l.realWebSocket&&(c.protocol=l.realWebSocket.protocol)}))}catch(l){l instanceof Error&&(c.dispatchEvent(new Event("error")),c.readyState!==WebSocket.CLOSING&&c.readyState!==WebSocket.CLOSED&&c[xe](1011,l.message,!1),console.error(l))}}),c}});Object.defineProperty(globalThis,"WebSocket",{value:t,configurable:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis,"WebSocket",e)})}},Ar=jr;Ar.symbol=Symbol("websocket");const bt=new Ar;function Yn(e){bt.on("connection",async t=>{const r=e.getHandlers().filter(xt("EventHandler"));if(r.length>0){e==null||e.onMockedConnection(t),await Promise.all(r.map(s=>s.run(t)));return}const n=new Request(t.client.url,{headers:{upgrade:"websocket",connection:"upgrade"}});await Cr(n,e.getUnhandledRequestStrategy()).catch(s=>{const o=new Event("error");Object.defineProperty(o,"cause",{enumerable:!0,configurable:!1,value:s}),t.client.socket.dispatchEvent(o)}),e==null||e.onPassthroughConnection(t),t.server.connect()})}function Qe(e){return e instanceof Blob?e.size:e instanceof ArrayBuffer?e.byteLength:new Blob([e]).size}const Gt=24;function dt(e){return e.length<=Gt?e:`${e.slice(0,Gt)}…`}async function et(e){if(e instanceof Blob){const t=await e.text();return`Blob(${dt(t)})`}if(typeof e=="object"&&"byteLength"in e){const t=new TextDecoder().decode(e);return`ArrayBuffer(${dt(t)})`}return dt(e)}const ne={system:"#3b82f6",outgoing:"#22c55e",incoming:"#ef4444",mocked:"#ff6a33"};function Qn(e){const{client:t,server:r}=e;es(t),t.addEventListener("message",n=>{ns(n)}),t.addEventListener("close",n=>{ts(n)}),t.socket.addEventListener("error",n=>{rs(n)}),t.send=new Proxy(t.send,{apply(n,s,o){const[i]=o,a=new MessageEvent("message",{data:i});return Object.defineProperties(a,{currentTarget:{enumerable:!0,writable:!1,value:t.socket},target:{enumerable:!0,writable:!1,value:t.socket}}),queueMicrotask(()=>{os(a)}),Reflect.apply(n,s,o)}}),r.addEventListener("open",()=>{r.addEventListener("message",n=>{is(n)})},{once:!0}),r.send=new Proxy(r.send,{apply(n,s,o){const[i]=o,a=new MessageEvent("message",{data:i});return Object.defineProperties(a,{currentTarget:{enumerable:!0,writable:!1,value:r.socket},target:{enumerable:!0,writable:!1,value:r.socket}}),ss(a),Reflect.apply(n,s,o)}})}function es(e){const t=Ke(e.url);console.groupCollapsed(w.formatMessage(`${re()} %c▶%c ${t}`),`color:${ne.system}`,"color:inherit"),console.log("Client:",e.socket),console.groupEnd()}function ts(e){const t=e.target,r=Ke(t.url);console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c■%c ${r}`),`color:${ne.system}`,"color:inherit"),console.log(e),console.groupEnd()}function rs(e){const t=e.target,r=Ke(t.url);console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c×%c ${r}`),`color:${ne.system}`,"color:inherit"),console.log(e),console.groupEnd()}async function ns(e){const t=Qe(e.data),r=await et(e.data),n=e.defaultPrevented?"⇡":"⬆";console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c${n}%c ${r} %c${t}%c`),`color:${ne.outgoing}`,"color:inherit","color:gray;font-weight:normal","color:inherit;font-weight:inherit"),console.log(e),console.groupEnd()}async function ss(e){const t=Qe(e.data),r=await et(e.data);console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c⬆%c ${r} %c${t}%c`),`color:${ne.mocked}`,"color:inherit","color:gray;font-weight:normal","color:inherit;font-weight:inherit"),console.log(e),console.groupEnd()}async function os(e){const t=Qe(e.data),r=await et(e.data);console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c⬇%c ${r} %c${t}%c`),`color:${ne.mocked}`,"color:inherit","color:gray;font-weight:normal","color:inherit;font-weight:inherit"),console.log(e),console.groupEnd()}async function is(e){const t=Qe(e.data),r=await et(e.data),n=e.defaultPrevented?"⇣":"⬇";console.groupCollapsed(w.formatMessage(`${re({milliseconds:!0})} %c${n}%c ${r} %c${t}%c`),`color:${ne.incoming}`,"color:inherit","color:gray;font-weight:normal","color:inherit;font-weight:inherit"),console.log(e),console.groupEnd()}var as={},cs=/(%?)(%([sdijo]))/g;function us(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if(typeof e=="string")return e;const r=JSON.stringify(e);return r==="{}"||r==="[]"||/^\[object .+?\]$/.test(r)?e:r}}}function De(e,...t){if(t.length===0)return e;let r=0,n=e.replace(cs,(s,o,i,a)=>{const c=t[r],u=us(c,a);return o?s:(r++,u)});return r<t.length&&(n+=` ${t.slice(r).join(" ")}`),n=n.replace(/%{2,2}/g,"%"),n}var ls=2;function ds(e){if(!e.stack)return;const t=e.stack.split(`
`);t.splice(1,ls),e.stack=t.join(`
`)}var hs=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=De(e,...t),ds(this)}},G=(e,t,...r)=>{if(!e)throw new hs(t,...r)};G.as=(e,t,r,...n)=>{if(!t){const s=n.length===0?r:De(r,...n);let o;try{o=Reflect.construct(e,[s])}catch{o=e(s)}throw o}};function Pt(){if(typeof navigator<"u"&&navigator.product==="ReactNative")return!0;if(typeof process<"u"){const e=process.type;return e==="renderer"||e==="worker"?!1:!!(process.versions&&process.versions.node)}return!1}var wt=async e=>{try{return{error:null,data:await e().catch(r=>{throw r})}}catch(t){return{error:t,data:null}}};function fs(e){return new URL(e,location.href).href}function ht(e,t,r){return[e.active,e.installing,e.waiting].filter(i=>i!=null).find(i=>r(i.scriptURL,t))||null}var ps=async(e,t={},r)=>{const n=fs(e),s=await navigator.serviceWorker.getRegistrations().then(a=>a.filter(c=>ht(c,n,r)));!navigator.serviceWorker.controller&&s.length>0&&location.reload();const[o]=s;if(o)return o.update(),[ht(o,n,r),o];const i=await wt(async()=>{const a=await navigator.serviceWorker.register(e,t);return[ht(a,n,r),a]});if(i.error){if(i.error.message.includes("(404)")){const c=new URL((t==null?void 0:t.scope)||"/",location.href);throw new Error(w.formatMessage(`Failed to register a Service Worker for scope ('${c.href}') with script ('${n}'): Service Worker script does not exist at the given path.

Did you forget to run "npx msw init <PUBLIC_DIR>"?

Learn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(w.formatMessage(`Failed to register the Service Worker:

%s`,i.error.message))}return i.data};function Or(e={}){if(e.quiet)return;const t=e.message||"Mocking enabled.";console.groupCollapsed(`%c${w.formatMessage(t)}`,"color:orangered;font-weight:bold;"),console.log("%cDocumentation: %chttps://mswjs.io/docs","font-weight:bold","font-weight:normal"),console.log("Found an issue? https://github.com/mswjs/msw/issues"),e.workerUrl&&console.log("Worker script URL:",e.workerUrl),e.workerScope&&console.log("Worker scope:",e.workerScope),e.client&&console.log("Client ID: %s (%s)",e.client.id,e.client.frameType),console.groupEnd()}async function gs(e,t){var n,s;e.workerChannel.send("MOCK_ACTIVATE");const{payload:r}=await e.events.once("MOCKING_ENABLED");if(e.isMockingEnabled){w.warn('Found a redundant "worker.start()" call. Note that starting the worker while mocking is already enabled will have no effect. Consider removing this "worker.start()" call.');return}e.isMockingEnabled=!0,Or({quiet:t.quiet,workerScope:(n=e.registration)==null?void 0:n.scope,workerUrl:(s=e.worker)==null?void 0:s.scriptURL,client:r.client})}var ms=class{constructor(e){this.port=e}postMessage(e,...t){const[r,n]=t;this.port.postMessage({type:e,data:r},{transfer:n})}};function ys(e){if(!["HEAD","GET"].includes(e.method))return e.body}function Mr(e){return new Request(e.url,{...e,body:ys(e)})}var vs=(e,t)=>async(r,n)=>{const s=new ms(r.ports[0]),o=n.payload.id,i=Mr(n.payload),a=i.clone(),c=i.clone();Pn.cache.set(i,c);try{await Dr(i,o,e.getRequestHandlers().filter(xt("RequestHandler")),t,e.emitter,{onPassthroughResponse(){s.postMessage("PASSTHROUGH")},async onMockedResponse(u,{handler:l,parsedResult:f}){const p=u.clone(),m=u.clone(),b=Fn(u);if(e.supports.readableStreamTransfer){const P=u.body;s.postMessage("MOCK_RESPONSE",{...b,body:P},P?[P]:void 0)}else{const P=u.body===null?null:await p.arrayBuffer();s.postMessage("MOCK_RESPONSE",{...b,body:P})}t.quiet||e.emitter.once("response:mocked",()=>{l.log({request:a,response:m,parsedResult:f})})}})}catch(u){u instanceof Error&&(w.error(`Uncaught exception in the request handler for "%s %s":

%s

This exception has been gracefully handled as a 500 response, however, it's strongly recommended to resolve this error, as it indicates a mistake in your code. If you wish to mock an error response, please see this guide: https://mswjs.io/docs/http/mocking-responses/error-responses`,i.method,i.url,u.stack??u),s.postMessage("MOCK_RESPONSE",{status:500,statusText:"Request Handler Error",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,message:u.message,stack:u.stack})}))}};async function bs(e){e.workerChannel.send("INTEGRITY_CHECK_REQUEST");const{payload:t}=await e.events.once("INTEGRITY_CHECK_RESPONSE");t.checksum!=="f5825c521429caf22a4dd13b66e243af"&&w.warn(`The currently registered Service Worker has been generated by a different version of MSW (${t.packageVersion}) and may not be fully compatible with the installed version.

It's recommended you update your worker script by running this command:

  • npx msw init <PUBLIC_DIR>

You can also automate this process and make the worker script update automatically upon the library installations. Read more: https://mswjs.io/docs/cli/init.`)}var ws=new TextEncoder;function ks(e){return ws.encode(e)}function _s(e,t){return new TextDecoder(t).decode(e)}function Es(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}var ge=Symbol("isPatchedModule");function Zr(e){try{return new URL(e),!0}catch{return!1}}function Vt(e,t){const n=Object.getOwnPropertySymbols(t).find(s=>s.description===e);if(n)return Reflect.get(t,n)}var de=class extends Response{static isConfigurableStatusCode(e){return e>=200&&e<=599}static isRedirectResponse(e){return de.STATUS_CODES_WITH_REDIRECT.includes(e)}static isResponseWithBody(e){return!de.STATUS_CODES_WITHOUT_BODY.includes(e)}static setUrl(e,t){if(!e||e==="about:"||!Zr(e))return;const r=Vt("state",t);r?r.urlList.push(new URL(e)):Object.defineProperty(t,"url",{value:e,enumerable:!0,configurable:!0,writable:!1})}static parseRawHeaders(e){const t=new Headers;for(let r=0;r<e.length;r+=2)t.append(e[r],e[r+1]);return t}constructor(e,t={}){var r;const n=(r=t.status)!=null?r:200,s=de.isConfigurableStatusCode(n)?n:200,o=de.isResponseWithBody(n)?e:null;if(super(o,{status:s,statusText:t.statusText,headers:t.headers}),n!==s){const i=Vt("state",this);i?i.status=n:Object.defineProperty(this,"status",{value:n,enumerable:!0,configurable:!0,writable:!1})}de.setUrl(t.url,this)}},q=de;q.STATUS_CODES_WITHOUT_BODY=[101,103,204,205,304];q.STATUS_CODES_WITH_REDIRECT=[301,302,303,307,308];var Ss=Symbol("kRawRequest");function qr(e,t){Reflect.set(e,Ss,t)}var Rs=Object.defineProperty,Ts=(e,t)=>{for(var r in t)Rs(e,r,{get:t[r],enumerable:!0})},kt={};Ts(kt,{blue:()=>xs,gray:()=>_t,green:()=>Ps,red:()=>Ls,yellow:()=>Is});function Is(e){return`\x1B[33m${e}\x1B[0m`}function xs(e){return`\x1B[34m${e}\x1B[0m`}function _t(e){return`\x1B[90m${e}\x1B[0m`}function Ls(e){return`\x1B[31m${e}\x1B[0m`}function Ps(e){return`\x1B[32m${e}\x1B[0m`}var tt=Pt(),Wr=class{constructor(e){R(this,"prefix");this.name=e,this.prefix=`[${this.name}]`;const t=Xt("DEBUG"),r=Xt("LOG_LEVEL");t==="1"||t==="true"||typeof t<"u"&&this.name.startsWith(t)?(this.debug=Ee(r,"debug")?z:this.debug,this.info=Ee(r,"info")?z:this.info,this.success=Ee(r,"success")?z:this.success,this.warning=Ee(r,"warning")?z:this.warning,this.error=Ee(r,"error")?z:this.error):(this.info=z,this.success=z,this.warning=z,this.error=z,this.only=z)}extend(e){return new Wr(`${this.name}:${e}`)}debug(e,...t){this.logEntry({level:"debug",message:_t(e),positionals:t,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}});const r=new Cs;return(n,...s)=>{r.measure(),this.logEntry({level:"info",message:`${n} ${_t(`${r.deltaTime}ms`)}`,positionals:s,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:`✔ ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...t){this.logEntry({level:"warning",message:e,positionals:t,prefix:`⚠ ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...t){this.logEntry({level:"error",message:e,positionals:t,prefix:`✖ ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,t){return{timestamp:new Date,level:e,message:t}}logEntry(e){const{level:t,message:r,prefix:n,colors:s,positionals:o=[]}=e,i=this.createEntry(t,r),a=(s==null?void 0:s.timestamp)||"gray",c=(s==null?void 0:s.prefix)||"gray",u={timestamp:kt[a],prefix:kt[c]};this.getWriter(t)([u.timestamp(this.formatTimestamp(i.timestamp))].concat(n!=null?u.prefix(n):[]).concat(Jt(r)).join(" "),...o.map(Jt))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return Ds;case"warning":return zs;case"error":return $s}}},Cs=class{constructor(){R(this,"startTime");R(this,"endTime");R(this,"deltaTime");this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},z=()=>{};function Ds(e,...t){if(tt){process.stdout.write(De(e,...t)+`
`);return}console.log(e,...t)}function zs(e,...t){if(tt){process.stderr.write(De(e,...t)+`
`);return}console.warn(e,...t)}function $s(e,...t){if(tt){process.stderr.write(De(e,...t)+`
`);return}console.error(e,...t)}function Xt(e){var t;return tt?as[e]:(t=globalThis[e])==null?void 0:t.toString()}function Ee(e,t){return e!==void 0&&e!==t}function Jt(e){return typeof e>"u"?"undefined":e===null?"null":typeof e=="string"?e:typeof e=="object"?JSON.stringify(e):e.toString()}var js=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},Ur=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=Ur.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...n)=>(this.removeListener(e,r),t.apply(this,n));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach(n=>{n.apply(this,t)}),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const n=new js(this,e,this.listenerCount(e));console.warn(n)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const n=[t].concat(r);this.events.set(e,n)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},Nr=Ur;Nr.defaultMaxListeners=10;var As="x-interceptors-internal-request-id";function Kt(e){return globalThis[e]||void 0}function Os(e,t){globalThis[e]=t}function Ms(e){delete globalThis[e]}var Ct=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new Nr,this.subscriptions=[],this.logger=new Wr(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),this.readyState==="APPLIED"){e.info("intercepted already applied!");return}if(!this.checkEnvironment()){e.info("the interceptor cannot be applied in this environment!");return}this.readyState="APPLYING";const r=this.getInstance();if(r){e.info("found a running instance, reusing..."),this.on=(n,s)=>(e.info('proxying the "%s" listener',n),r.emitter.addListener(n,s),this.subscriptions.push(()=>{r.emitter.removeListener(n,s),e.info('removed proxied "%s" listener!',n)}),this),this.readyState="APPLIED";return}e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const r=this.logger.extend("on");return this.readyState==="DISPOSING"||this.readyState==="DISPOSED"?(r.info("cannot listen to events, already disposed!"),this):(r.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if(this.readyState==="DISPOSED"){e.info("cannot dispose, already disposed!");return}if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",!this.getInstance()){e.info("no interceptors running, skipping dispose...");return}if(this.clearInstance(),e.info("global symbol deleted:",Kt(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const t of this.subscriptions)t();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}getInstance(){var e;const t=Kt(this.symbol);return this.logger.info("retrieved global instance:",(e=t==null?void 0:t.constructor)==null?void 0:e.name),t}setInstance(){Os(this.symbol,this),this.logger.info("set global instance!",this.symbol.description)}clearInstance(){Ms(this.symbol),this.logger.info("cleared global instance!",this.symbol.description)}};function Br(){return Math.random().toString(16).slice(2)}var Et=class extends Ct{constructor(e){Et.symbol=Symbol(e.name),super(Et.symbol),this.interceptors=e.interceptors}setup(){const e=this.logger.extend("setup");e.info("applying all %d interceptors...",this.interceptors.length);for(const t of this.interceptors)e.info('applying "%s" interceptor...',t.constructor.name),t.apply(),e.info("adding interceptor dispose subscription"),this.subscriptions.push(()=>t.dispose())}on(e,t){for(const r of this.interceptors)r.on(e,t);return this}once(e,t){for(const r of this.interceptors)r.once(e,t);return this}off(e,t){for(const r of this.interceptors)r.off(e,t);return this}removeAllListeners(e){for(const t of this.interceptors)t.removeAllListeners(e);return this}};function Zs(e){return(t,r)=>{var i;const{payload:n}=r,s=Mr(n.request);if((i=n.response.type)!=null&&i.includes("opaque"))return;const o=n.response.status===0?Response.error():new q(q.isResponseWithBody(n.response.status)?n.response.body:null,{...n,url:s.url});e.emitter.emit(n.isMockedResponse?"response:mocked":"response:bypass",{requestId:n.request.id,request:s,response:o})}}function qs(e,t){!(t!=null&&t.quiet)&&!location.href.startsWith(e.scope)&&w.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.

- (Recommended) Register the worker at the root level ("/") of your application.
- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}var Ws=e=>function(r,n){return(async()=>{e.events.removeAllListeners(),e.workerChannel.on("REQUEST",vs(e,r)),e.workerChannel.on("RESPONSE",Zs(e));const i=await ps(r.serviceWorker.url,r.serviceWorker.options,r.findWorker),[a,c]=i;if(!a){const u=n!=null&&n.findWorker?w.formatMessage(`Failed to locate the Service Worker registration using a custom "findWorker" predicate.

Please ensure that the custom predicate properly locates the Service Worker registration at "%s".
More details: https://mswjs.io/docs/api/setup-worker/start#findworker
`,r.serviceWorker.url):w.formatMessage(`Failed to locate the Service Worker registration.

This most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.

Please consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`,r.serviceWorker.url,location.host);throw new Error(u)}return e.worker=a,e.registration=c,e.events.addListener(window,"beforeunload",()=>{a.state!=="redundant"&&e.workerChannel.send("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval),window.postMessage({type:"msw/worker:stop"})}),await bs(e).catch(u=>{w.error("Error while checking the worker script integrity. Please report this on GitHub (https://github.com/mswjs/msw/issues), including the original error below."),console.error(u)}),e.keepAliveInterval=window.setInterval(()=>e.workerChannel.send("KEEPALIVE_REQUEST"),5e3),qs(c,e.startOptions),c})().then(async i=>{const a=i.installing||i.waiting;return a&&await new Promise(c=>{a.addEventListener("statechange",()=>{if(a.state==="activated")return c()})}),await gs(e,r).catch(c=>{throw new Error(`Failed to enable mocking: ${c==null?void 0:c.message}`)}),i})};function Hr(e={}){e.quiet||console.log(`%c${w.formatMessage("Mocking disabled.")}`,"color:orangered;font-weight:bold;")}var Us=e=>function(){var r;if(!e.isMockingEnabled){w.warn('Found a redundant "worker.stop()" call. Note that stopping the worker while mocking already stopped has no effect. Consider removing this "worker.stop()" call.');return}e.workerChannel.send("MOCK_DEACTIVATE"),e.isMockingEnabled=!1,window.clearInterval(e.keepAliveInterval),window.postMessage({type:"msw/worker:stop"}),Hr({quiet:(r=e.startOptions)==null?void 0:r.quiet})},Ns={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker(e,t){return e===t}};function Bs(){const e=(t,r)=>{e.state="pending",e.resolve=n=>{if(e.state!=="pending")return;e.result=n;const s=o=>(e.state="fulfilled",o);return t(n instanceof Promise?n:Promise.resolve(n).then(s))},e.reject=n=>{if(e.state==="pending")return queueMicrotask(()=>{e.state="rejected"}),r(e.rejectionReason=n)}};return e}var B,ve,Ue,xr,Dt=(xr=class extends Promise{constructor(t=null){const r=Bs();super((n,s)=>{r(n,s),t==null||t(r.resolve,r.reject)});ke(this,ve);ke(this,B);R(this,"resolve");R(this,"reject");ut(this,B,r),this.resolve=Z(this,B).resolve,this.reject=Z(this,B).reject}get state(){return Z(this,B).state}get rejectionReason(){return Z(this,B).rejectionReason}then(t,r){return K(this,ve,Ue).call(this,super.then(t,r))}catch(t){return K(this,ve,Ue).call(this,super.catch(t))}finally(t){return K(this,ve,Ue).call(this,super.finally(t))}},B=new WeakMap,ve=new WeakSet,Ue=function(t){return Object.defineProperties(t,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},xr),Fe=class extends Error{constructor(e){super(e),this.name="InterceptorError",Object.setPrototypeOf(this,Fe.prototype)}},Se=Symbol("kRequestHandled"),j=Symbol("kResponsePromise"),zt=class{constructor(e){this.request=e,this[Se]=!1,this[j]=new Dt}respondWith(e){G.as(Fe,!this[Se],'Failed to respond to the "%s %s" request: the "request" event has already been handled.',this.request.method,this.request.url),this[Se]=!0,this[j].resolve(e)}errorWith(e){G.as(Fe,!this[Se],'Failed to error the "%s %s" request: the "request" event has already been handled.',this.request.method,this.request.url),this[Se]=!0,this[j].resolve(e)}};async function Ge(e,t,...r){const n=e.listeners(t);if(n.length!==0)for(const s of n)await s.apply(e,r)}function Fr(e,t=!1){return t?Object.prototype.toString.call(e).startsWith("[object "):Object.prototype.toString.call(e)==="[object Object]"}function Ne(e,t){try{return e[t],!0}catch{return!1}}function Hs(e){return new Response(JSON.stringify(e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:e),{status:500,statusText:"Unhandled Exception",headers:{"Content-Type":"application/json"}})}function Fs(e){return e!=null&&e instanceof Response&&Ne(e,"type")&&e.type==="error"}function Gs(e){return Fr(e,!0)&&Ne(e,"status")&&Ne(e,"statusText")&&Ne(e,"bodyUsed")}function Vs(e){return e==null||!(e instanceof Error)?!1:"code"in e&&"errno"in e}async function Gr(e){const t=async o=>o instanceof Error?(e.onError(o),!0):Fs(o)?(e.onRequestError(o),!0):Gs(o)?(await e.onResponse(o),!0):Fr(o)?(e.onError(o),!0):!1,r=async o=>{if(o instanceof Fe)throw s.error;return Vs(o)?(e.onError(o),!0):o instanceof Response?await t(o):!1};e.emitter.once("request",({requestId:o})=>{o===e.requestId&&e.controller[j].state==="pending"&&e.controller[j].resolve(void 0)});const n=new Dt;e.request.signal&&(e.request.signal.aborted?n.reject(e.request.signal.reason):e.request.signal.addEventListener("abort",()=>{n.reject(e.request.signal.reason)},{once:!0}));const s=await wt(async()=>{const o=Ge(e.emitter,"request",{requestId:e.requestId,request:e.request,controller:e.controller});return await Promise.race([n,o,e.controller[j]]),await e.controller[j]});if(n.state==="rejected")return e.onError(n.rejectionReason),!0;if(s.error){if(await r(s.error))return!0;if(e.emitter.listenerCount("unhandledException")>0){const o=new zt(e.request);await Ge(e.emitter,"unhandledException",{error:s.error,request:e.request,requestId:e.requestId,controller:o}).then(()=>{o[j].state==="pending"&&o[j].resolve(void 0)});const i=await wt(()=>o[j]);if(i.error)return r(i.error);if(i.data)return t(i.data)}return e.onResponse(Hs(s.error)),!0}return s.data?t(s.data):!1}function Vr(e){const t=Object.getOwnPropertyDescriptor(globalThis,e);return typeof t>"u"||typeof t.get=="function"&&typeof t.get()>"u"||typeof t.get>"u"&&t.value==null?!1:typeof t.set>"u"&&!t.configurable?(console.error(`[MSW] Failed to apply interceptor: the global \`${e}\` property is non-configurable. This is likely an issue with your environment. If you are using a framework, please open an issue about this in their repository.`),!1):!0}function Q(e){return Object.assign(new TypeError("Failed to fetch"),{cause:e})}var Xs=["content-encoding","content-language","content-location","content-type","content-length"],ft=Symbol("kRedirectCount");async function Js(e,t){if(t.status!==303&&e.body!=null)return Promise.reject(Q());const r=new URL(e.url);let n;try{n=new URL(t.headers.get("location"),e.url)}catch(o){return Promise.reject(Q(o))}if(!(n.protocol==="http:"||n.protocol==="https:"))return Promise.reject(Q("URL scheme must be a HTTP(S) scheme"));if(Reflect.get(e,ft)>20)return Promise.reject(Q("redirect count exceeded"));if(Object.defineProperty(e,ft,{value:(Reflect.get(e,ft)||0)+1}),e.mode==="cors"&&(n.username||n.password)&&!Yt(r,n))return Promise.reject(Q('cross origin not allowed for request mode "cors"'));const s={};return([301,302].includes(t.status)&&e.method==="POST"||t.status===303&&!["HEAD","GET"].includes(e.method))&&(s.method="GET",s.body=null,Xs.forEach(o=>{e.headers.delete(o)})),Yt(r,n)||(e.headers.delete("authorization"),e.headers.delete("proxy-authorization"),e.headers.delete("cookie"),e.headers.delete("host")),s.headers=e.headers,fetch(new Request(n,s))}function Yt(e,t){return e.origin===t.origin&&e.origin==="null"||e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}var Ks=class extends TransformStream{constructor(){console.warn("[Interceptors]: Brotli decompression of response streams is not supported in the browser"),super({transform(e,t){t.enqueue(e)}})}},Ys=class extends TransformStream{constructor(e,...t){super({},...t);const r=[super.readable,...e].reduce((n,s)=>n.pipeThrough(s));Object.defineProperty(this,"readable",{get(){return r}})}};function Qs(e){return e.toLowerCase().split(",").map(t=>t.trim())}function eo(e){if(e==="")return null;const t=Qs(e);if(t.length===0)return null;const r=t.reduceRight((n,s)=>s==="gzip"||s==="x-gzip"?n.concat(new DecompressionStream("gzip")):s==="deflate"?n.concat(new DecompressionStream("deflate")):s==="br"?n.concat(new Ks):(n.length=0,n),[]);return new Ys(r)}function to(e){if(e.body===null)return null;const t=eo(e.headers.get("content-encoding")||"");return t?(e.body.pipeTo(t.writable),t.readable):null}var Xr=class extends Ct{constructor(){super(Xr.symbol)}checkEnvironment(){return Vr("fetch")}async setup(){const e=globalThis.fetch;G(!e[ge],'Failed to patch the "fetch" module: already patched.'),globalThis.fetch=async(t,r)=>{const n=Br(),s=typeof t=="string"&&typeof location<"u"&&!Zr(t)?new URL(t,location.href):t,o=new Request(s,r);t instanceof Request&&qr(o,t);const i=new Dt,a=new zt(o);if(this.logger.info("[%s] %s",o.method,o.url),this.logger.info("awaiting for the mocked response..."),this.logger.info('emitting the "request" event for %s listener(s)...',this.emitter.listenerCount("request")),await Gr({request:o,requestId:n,emitter:this.emitter,controller:a,onResponse:async l=>{this.logger.info("received mocked response!",{rawResponse:l});const f=to(l),p=f===null?l:new q(f,l);if(q.setUrl(o.url,p),q.isRedirectResponse(p.status)){if(o.redirect==="error"){i.reject(Q("unexpected redirect"));return}if(o.redirect==="follow"){Js(o,p).then(m=>{i.resolve(m)},m=>{i.reject(m)});return}}this.emitter.listenerCount("response")>0&&(this.logger.info('emitting the "response" event...'),await Ge(this.emitter,"response",{response:p.clone(),isMockedResponse:!0,request:o,requestId:n})),i.resolve(p)},onRequestError:l=>{this.logger.info("request has errored!",{response:l}),i.reject(Q(l))},onError:l=>{this.logger.info("request has been aborted!",{error:l}),i.reject(l)}}))return this.logger.info("request has been handled, returning mock promise..."),i;this.logger.info("no mocked response received, performing request as-is...");const u=o.clone();return e(o).then(async l=>{if(this.logger.info("original fetch performed",l),this.emitter.listenerCount("response")>0){this.logger.info('emitting the "response" event...');const f=l.clone();await Ge(this.emitter,"response",{response:f,isMockedResponse:!1,request:u,requestId:n})}return l})},Object.defineProperty(globalThis.fetch,ge,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.fetch,ge,{value:void 0}),globalThis.fetch=e,this.logger.info('restored native "globalThis.fetch"!',globalThis.fetch.name)})}},Jr=Xr;Jr.symbol=Symbol("fetch");function ro(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r}var Kr=class{constructor(e,t){this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(t==null?void 0:t.target)||null,this.currentTarget=(t==null?void 0:t.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(e,t,r){this.type=e,this.bubbles=!!t,this.cancelable=!!r}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},no=class extends Kr{constructor(e,t){super(e),this.lengthComputable=(t==null?void 0:t.lengthComputable)||!1,this.composed=(t==null?void 0:t.composed)||!1,this.loaded=(t==null?void 0:t.loaded)||0,this.total=(t==null?void 0:t.total)||0}},so=typeof ProgressEvent<"u";function oo(e,t,r){const n=["error","progress","loadstart","loadend","load","timeout","abort"],s=so?ProgressEvent:no;return n.includes(t)?new s(t,{lengthComputable:!0,loaded:(r==null?void 0:r.loaded)||0,total:(r==null?void 0:r.total)||0}):new Kr(t,{target:e,currentTarget:e})}function Yr(e,t){if(!(t in e))return null;if(Object.prototype.hasOwnProperty.call(e,t))return e;const n=Reflect.getPrototypeOf(e);return n?Yr(n,t):null}function pt(e,t){return new Proxy(e,io(t))}function io(e){const{constructorCall:t,methodCall:r,getProperty:n,setProperty:s}=e,o={};return typeof t<"u"&&(o.construct=function(i,a,c){const u=Reflect.construct.bind(null,i,a,c);return t.call(c,a,u)}),o.set=function(i,a,c){const u=()=>{const l=Yr(i,a)||i,f=Reflect.getOwnPropertyDescriptor(l,a);return typeof(f==null?void 0:f.set)<"u"?(f.set.apply(i,[c]),!0):Reflect.defineProperty(l,a,{writable:!0,enumerable:!0,configurable:!0,value:c})};return typeof s<"u"?s.call(i,[a,c],u):u()},o.get=function(i,a,c){const u=()=>i[a],l=typeof n<"u"?n.call(i,[a,c],u):u();return typeof l=="function"?(...f)=>{const p=l.bind(i,...f);return typeof r<"u"?r.call(i,[a,f],p):p()}:l},o}function ao(e){return["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some(r=>e.startsWith(r))}function co(e){try{return JSON.parse(e)}catch{return null}}function uo(e,t){const r=q.isResponseWithBody(e.status)?t:null;return new q(r,{url:e.responseURL,status:e.status,statusText:e.statusText,headers:lo(e.getAllResponseHeaders())})}function lo(e){const t=new Headers,r=e.split(/[\r\n]+/);for(const n of r){if(n.trim()==="")continue;const[s,...o]=n.split(": "),i=o.join(": ");t.append(s,i)}return t}async function Qt(e){const t=e.headers.get("content-length");return t!=null&&t!==""?Number(t):(await e.arrayBuffer()).byteLength}var Re=Symbol("kIsRequestHandled"),ho=Pt(),gt=Symbol("kFetchRequest"),fo=class{constructor(e,t){this.initialRequest=e,this.logger=t,this.method="GET",this.url=null,this[Re]=!1,this.events=new Map,this.uploadEvents=new Map,this.requestId=Br(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=pt(e,{setProperty:([r,n],s)=>{switch(r){case"ontimeout":{const o=r.slice(2);return this.request.addEventListener(o,n),s()}default:return s()}},methodCall:([r,n],s)=>{var o;switch(r){case"open":{const[i,a]=n;return typeof a>"u"?(this.method="GET",this.url=er(i)):(this.method=i,this.url=er(a)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),s()}case"addEventListener":{const[i,a]=n;return this.registerEvent(i,a),this.logger.info("addEventListener",i,a),s()}case"setRequestHeader":{const[i,a]=n;return this.requestHeaders.set(i,a),this.logger.info("setRequestHeader",i,a),s()}case"send":{const[i]=n;this.request.addEventListener("load",()=>{if(typeof this.onResponse<"u"){const l=uo(this.request,this.request.response);this.onResponse.call(this,{response:l,isMockedResponse:this[Re],request:c,requestId:this.requestId})}});const a=typeof i=="string"?ks(i):i,c=this.toFetchApiRequest(a);this[gt]=c.clone(),(((o=this.onRequest)==null?void 0:o.call(this,{request:c,requestId:this.requestId}))||Promise.resolve()).finally(()=>{if(!this[Re])return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),ho&&this.request.setRequestHeader(As,this.requestId),s()});break}default:return s()}}}),se(this.request,"upload",pt(this.request.upload,{setProperty:([r,n],s)=>{switch(r){case"onloadstart":case"onprogress":case"onaboart":case"onerror":case"onload":case"ontimeout":case"onloadend":{const o=r.slice(2);this.registerUploadEvent(o,n)}}return s()},methodCall:([r,n],s)=>{switch(r){case"addEventListener":{const[o,i]=n;return this.registerUploadEvent(o,i),this.logger.info("upload.addEventListener",o,i),s()}}}}))}registerEvent(e,t){const n=(this.events.get(e)||[]).concat(t);this.events.set(e,n),this.logger.info('registered event "%s"',e,t)}registerUploadEvent(e,t){const n=(this.uploadEvents.get(e)||[]).concat(t);this.uploadEvents.set(e,n),this.logger.info('registered upload event "%s"',e,t)}async respondWith(e){if(this[Re]=!0,this[gt]){const n=await Qt(this[gt]);this.trigger("loadstart",this.request.upload,{loaded:0,total:n}),this.trigger("progress",this.request.upload,{loaded:n,total:n}),this.trigger("load",this.request.upload,{loaded:n,total:n}),this.trigger("loadend",this.request.upload,{loaded:n,total:n})}this.logger.info("responding with a mocked response: %d %s",e.status,e.statusText),se(this.request,"status",e.status),se(this.request,"statusText",e.statusText),se(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(n,s,o)=>{if(this.logger.info("getResponseHeader",o[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const i=e.headers.get(o[0]);return this.logger.info('resolved response header "%s" to',o[0],i),i}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const s=Array.from(e.headers.entries()).map(([o,i])=>`${o}: ${i}`).join(`\r
`);return this.logger.info("resolved all response headers to",s),s}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const t=await Qt(e.clone());this.logger.info("calculated response body length",t),this.trigger("loadstart",this.request,{loaded:0,total:t}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const r=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",this.request,{loaded:this.responseBuffer.byteLength,total:t}),this.trigger("loadend",this.request,{loaded:this.responseBuffer.byteLength,total:t})};if(e.body){this.logger.info("mocked response has body, streaming...");const n=e.body.getReader(),s=async()=>{const{value:o,done:i}=await n.read();if(i){this.logger.info("response body stream done!"),r();return}o&&(this.logger.info("read response body chunk:",o),this.responseBuffer=ro(this.responseBuffer,o),this.trigger("progress",this.request,{loaded:this.responseBuffer.byteLength,total:t})),s()};s()}else r()}responseBufferToText(){return _s(this.responseBuffer)}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const e=co(this.responseBufferToText());return this.logger.info("resolved response JSON",e),e}case"arraybuffer":{const e=Es(this.responseBuffer);return this.logger.info("resolved response ArrayBuffer",e),e}case"blob":{const e=this.request.getResponseHeader("Content-Type")||"text/plain",t=new Blob([this.responseBufferToText()],{type:e});return this.logger.info("resolved response Blob (mime type: %s)",t,e),t}default:{const e=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,e),e}}}get responseText(){if(G(this.request.responseType===""||this.request.responseType==="text","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const e=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',e),e}get responseXML(){if(G(this.request.responseType===""||this.request.responseType==="document","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const e=this.request.getResponseHeader("Content-Type")||"";return typeof DOMParser>"u"?(console.warn("Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly."),null):ao(e)?new DOMParser().parseFromString(this.responseBufferToText(),e):null}errorWith(e){this[Re]=!0,this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error",this.request),this.trigger("loadend",this.request)}setReadyState(e){if(this.logger.info("setReadyState: %d -> %d",this.request.readyState,e),this.request.readyState===e){this.logger.info("ready state identical, skipping transition...");return}se(this.request,"readyState",e),this.logger.info("set readyState to: %d",e),e!==this.request.UNSENT&&(this.logger.info('triggerring "readystatechange" event...'),this.trigger("readystatechange",this.request))}trigger(e,t,r){const n=t[`on${e}`],s=oo(t,e,r);this.logger.info('trigger "%s"',e,r||""),typeof n=="function"&&(this.logger.info('found a direct "%s" callback, calling...',e),n.call(t,s));const o=t instanceof XMLHttpRequestUpload?this.uploadEvents:this.events;for(const[i,a]of o)i===e&&(this.logger.info('found %d listener(s) for "%s" event, calling...',a.length,e),a.forEach(c=>c.call(t,s)))}toFetchApiRequest(e){this.logger.info("converting request to a Fetch API Request...");const t=e instanceof Document?e.documentElement.innerText:e,r=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method.toUpperCase())?null:t}),n=pt(r.headers,{methodCall:([s,o],i)=>{switch(s){case"append":case"set":{const[a,c]=o;this.request.setRequestHeader(a,c);break}case"delete":{const[a]=o;console.warn(`XMLHttpRequest: Cannot remove a "${a}" header from the Fetch API representation of the "${r.method} ${r.url}" request. XMLHttpRequest headers cannot be removed.`);break}}return i()}});return se(r,"headers",n),qr(r,this.request),this.logger.info("converted request to a Fetch API Request!",r),r}};function er(e){return typeof location>"u"?new URL(e):new URL(e.toString(),location.href)}function se(e,t,r){Reflect.defineProperty(e,t,{writable:!0,enumerable:!0,value:r})}function po({emitter:e,logger:t}){return new Proxy(globalThis.XMLHttpRequest,{construct(n,s,o){t.info("constructed new XMLHttpRequest");const i=Reflect.construct(n,s,o),a=Object.getOwnPropertyDescriptors(n.prototype);for(const u in a)Reflect.defineProperty(i,u,a[u]);const c=new fo(i,t);return c.onRequest=async function({request:u,requestId:l}){const f=new zt(u);this.logger.info("awaiting mocked response..."),this.logger.info('emitting the "request" event for %s listener(s)...',e.listenerCount("request")),await Gr({request:u,requestId:l,controller:f,emitter:e,onResponse:async m=>{await this.respondWith(m)},onRequestError:()=>{this.errorWith(new TypeError("Network error"))},onError:m=>{this.logger.info("request errored!",{error:m}),m instanceof Error&&this.errorWith(m)}})||this.logger.info("no mocked response received, performing request as-is...")},c.onResponse=async function({response:u,isMockedResponse:l,request:f,requestId:p}){this.logger.info('emitting the "response" event for %s listener(s)...',e.listenerCount("response")),e.emit("response",{response:u,isMockedResponse:l,request:f,requestId:p})},c.request}})}var Qr=class extends Ct{constructor(){super(Qr.interceptorSymbol)}checkEnvironment(){return Vr("XMLHttpRequest")}setup(){const e=this.logger.extend("setup");e.info('patching "XMLHttpRequest" module...');const t=globalThis.XMLHttpRequest;G(!t[ge],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=po({emitter:this.emitter,logger:this.logger}),e.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,ge,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.XMLHttpRequest,ge,{value:void 0}),globalThis.XMLHttpRequest=t,e.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)})}},en=Qr;en.interceptorSymbol=Symbol("xhr");function go(e,t){const r=new Et({name:"fallback",interceptors:[new Jr,new en]});return r.on("request",async({request:n,requestId:s,controller:o})=>{const i=n.clone(),a=await Dr(n,s,e.getRequestHandlers().filter(xt("RequestHandler")),t,e.emitter,{onMockedResponse(c,{handler:u,parsedResult:l}){t.quiet||e.emitter.once("response:mocked",({response:f})=>{u.log({request:i,response:f,parsedResult:l})})}});a&&o.respondWith(a)}),r.on("response",({response:n,isMockedResponse:s,request:o,requestId:i})=>{e.emitter.emit(s?"response:mocked":"response:bypass",{response:n,request:o,requestId:i})}),r.apply(),r}function mo(e){return async function(r){e.fallbackInterceptor=go(e,r),Or({message:"Mocking enabled (fallback mode).",quiet:r.quiet})}}function yo(e){return function(){var r,n;(r=e.fallbackInterceptor)==null||r.dispose(),Hr({quiet:(n=e.startOptions)==null?void 0:n.quiet})}}function vo(){try{const e=new ReadableStream({start:r=>r.close()});return new MessageChannel().port1.postMessage(e,[e]),!0}catch{return!1}}var bo=class extends jn{constructor(...t){super(...t);R(this,"context");R(this,"startHandler",null);R(this,"stopHandler",null);R(this,"listeners");G(!Pt(),w.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.")),this.listeners=[],this.context=this.createWorkerContext()}createWorkerContext(){const t={isMockingEnabled:!1,startOptions:null,worker:null,getRequestHandlers:()=>this.handlersController.currentHandlers(),registration:null,emitter:this.emitter,workerChannel:{on:(r,n)=>{this.context.events.addListener(navigator.serviceWorker,"message",s=>{if(s.source!==this.context.worker)return;const o=s.data;o&&o.type===r&&n(s,o)})},send:r=>{var n;(n=this.context.worker)==null||n.postMessage(r)}},events:{addListener:(r,n,s)=>(r.addEventListener(n,s),this.listeners.push({eventType:n,target:r,callback:s}),()=>{r.removeEventListener(n,s)}),removeAllListeners:()=>{for(const{target:r,eventType:n,callback:s}of this.listeners)r.removeEventListener(n,s);this.listeners=[]},once:r=>{const n=[];return new Promise((s,o)=>{const i=a=>{try{const c=a.data;c.type===r&&s(c)}catch(c){o(c)}};n.push(this.context.events.addListener(navigator.serviceWorker,"message",i),this.context.events.addListener(navigator.serviceWorker,"messageerror",o))}).finally(()=>{n.forEach(s=>s())})}},supports:{serviceWorkerApi:!("serviceWorker"in navigator)||location.protocol==="file:",readableStreamTransfer:vo()}};return this.startHandler=t.supports.serviceWorkerApi?mo(t):Ws(t),this.stopHandler=t.supports.serviceWorkerApi?yo(t):Us(t),t}async start(t={}){return t.waitUntilReady===!0&&w.warn('The "waitUntilReady" option has been deprecated. Please remove it from this "worker.start()" call. Follow the recommended Browser integration (https://mswjs.io/docs/integrations/browser) to eliminate any race conditions between the Service Worker registration and any requests made by your application on initial render.'),this.context.startOptions=zr(Ns,t),Yn({getUnhandledRequestStrategy:()=>this.context.startOptions.onUnhandledRequest,getHandlers:()=>this.handlersController.currentHandlers(),onMockedConnection:r=>{this.context.startOptions.quiet||Qn(r)},onPassthroughConnection(){}}),bt.apply(),this.subscriptions.push(()=>{bt.dispose()}),await this.startHandler(this.context.startOptions,t)}stop(){super.dispose(),this.context.events.removeAllListeners(),this.context.emitter.removeAllListeners(),this.stopHandler()}};function wo(...e){return new bo(...e)}var ko=/\.(js|jsx|ts|tsx|mjs|woff|woff2|ttf|otf|eot)$/,_o=["sb-common-assets","node_modules","node-modules","hot-update.json","__webpack_hmr","iframe.html","sb-vite","@vite","@react-refresh","/virtual:",".stories.",".mdx"],Eo=e=>!!(ko.test(e)||_o.some(r=>e.includes(r))),So=e=>typeof(e==null?void 0:e.onUnhandledRequest)=="string"?e:{...e,onUnhandledRequest:(...t)=>{const[{url:r},n]=t;if(!Eo(r)){if(!(e!=null&&e.onUnhandledRequest)){n.warning();return}typeof(e==null?void 0:e.onUnhandledRequest)=="function"&&e.onUnhandledRequest(...t)}}},he;function Ro(e,t=[]){const r=wo(...t);return r.context.activationPromise=r.start(So(e)),he=r,r}function To(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var s=n.reduce(function(a,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?a.concat(u.map(function(l){var f,p;return(p=(f=l.match(/[\t ]/g))===null||f===void 0?void 0:f.length)!==null&&p!==void 0?p:0})):a},[]);if(s.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,s)+"}","g");n=n.map(function(a){return a.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var i=n[0];return t.forEach(function(a,c){var u=i.match(/(?:^|\n)( *)$/),l=u?u[1]:"",f=a;typeof a=="string"&&a.includes(`
`)&&(f=String(a).split(`
`).map(function(p,m){return m===0?p:""+l+p}).join(`
`)),i+=f+n[c+1]}),i}function Io(e){let t=!1,r;return(...s)=>(t||(t=!0,r=e(...s)),r)}function tn(e){return Io(()=>{console.warn(To(e))})}var xo=tn(`
[msw-storybook-addon] You are using parameters.msw as an Array instead of an Object with a property "handlers". This usage is deprecated and will be removed in the next release. Please use the Object syntax instead.

More info: https://github.com/mswjs/msw-storybook-addon/blob/main/MIGRATION.md#parametersmsw-array-notation-deprecated-in-favor-of-object-notation
`);function Lo(e){if(he==null||he.resetHandlers(),e!=null){if(Array.isArray(e)&&e.length>0){xo(),he.use(...e);return}if("handlers"in e&&e.handlers){const t=Object.values(e.handlers).filter(Boolean).reduce((r,n)=>r.concat(n),[]);t.length>0&&he.use(...t);return}}}var Po=tn(`
[msw-storybook-addon] The mswDecorator is deprecated and will be removed in the next release. Please use the mswLoader instead.

More info: https://github.com/mswjs/msw-storybook-addon/blob/main/MIGRATION.md#mswdecorator-is-deprecated-in-favor-of-mswloader
`),Co=(e,t)=>(Po(),Lo(t.parameters.msw),e());const Be={id:"mock-user-123",email:"user@example.com",name:"Test User",avatar_url:"https://avatars.githubusercontent.com/u/1?v=4",created_at:"2024-01-01T00:00:00Z",metadata:{level:5,xp:2500,streak:7,achievements:["first_quiz","week_streak","perfect_score"]}},mt={access_token:"mock_access_token_123",refresh_token:"mock_refresh_token_456",expires_in:3600,expires_at:Date.now()+36e5,token_type:"bearer",user:Be},$=new Map,Do=[v.get("/api/auth/github",async({request:e})=>{const r=new URL(e.url).searchParams.get("redirect_url")||"/";return new h(null,{status:302,headers:{Location:`${r}?code=mock_github_code`}})}),v.post("/api/auth/github/callback",async({request:e})=>{const{code:t}=await e.json().catch(()=>({}));if(t==="mock_github_code"||t==="valid_code"){const r={...mt,user:{...Be,provider:"github"}};return $.set(r.access_token,r),h.json({access_token:r.access_token,refresh_token:r.refresh_token,expires_in:r.expires_in,user:r.user,session:r})}return h.json({error:"Invalid authorization code"},{status:401})}),v.post("/api/auth/login",async({request:e})=>{const{email:t,password:r}=await e.json().catch(()=>({}));if(!t||!r)return h.json({error:"Email and password required"},{status:400});if(typeof r=="string"&&r.length>6){const n={...mt,user:{...Be,email:t,provider:"email"}};return $.set(n.access_token,n),h.json({access_token:n.access_token,refresh_token:n.refresh_token,expires_in:n.expires_in,user:n.user,session:n})}return h.json({error:"Invalid email or password"},{status:401})}),v.post("/api/auth/signup",async({request:e})=>{var i,a;const{email:t,password:r,name:n}=await e.json().catch(()=>({}));if(!t||!r||r.length<6)return h.json({error:"Valid email and password (min 6 chars) required"},{status:400});const s={...Be,id:`mock-user-${Date.now()}`,email:t,name:n||(((a=(i=t==null?void 0:t.split)==null?void 0:i.call(t,"@"))==null?void 0:a[0])??"user"),created_at:new Date().toISOString(),metadata:{level:1,xp:0,streak:0,achievements:[]}},o={...mt,user:s};return $.set(o.access_token,o),h.json({access_token:o.access_token,refresh_token:o.refresh_token,expires_in:o.expires_in,user:s,session:o},{status:201})}),v.get("/api/auth/session",async({request:e})=>{const t=e.headers.get("Authorization");if(!t||!t.startsWith("Bearer "))return h.json({error:"No valid session"},{status:401});const r=t.replace("Bearer ",""),n=$.get(r);return n?n.expires_at<Date.now()?($.delete(r),h.json({error:"Session expired"},{status:401})):h.json({valid:!0,user:n.user,expires_at:n.expires_at}):h.json({error:"Invalid session"},{status:401})}),v.post("/api/auth/refresh",async({request:e})=>{const{refresh_token:t}=await e.json().catch(()=>({}));let r;for(const n of $.values())if(n.refresh_token===t){r=n;break}if(r){const n={...r,access_token:`mock_access_token_${Date.now()}`,refresh_token:`mock_refresh_token_${Date.now()}`,expires_at:Date.now()+36e5};return $.delete(r.access_token),$.set(n.access_token,n),h.json({access_token:n.access_token,refresh_token:n.refresh_token,expires_in:n.expires_in,user:n.user})}return h.json({error:"Invalid refresh token"},{status:401})}),v.post("/api/auth/logout",async({request:e})=>{const t=e.headers.get("Authorization");if(t&&t.startsWith("Bearer ")){const r=t.replace("Bearer ","");$.delete(r)}return h.json({success:!0})}),v.patch("/api/auth/user",async({request:e})=>{const t=e.headers.get("Authorization"),r=await e.json().catch(()=>({}));if(!t||!t.startsWith("Bearer "))return h.json({error:"Authentication required"},{status:401});const n=t.replace("Bearer ",""),s=$.get(n);return s?(s.user={...s.user,...r,metadata:{...s.user.metadata,...r.metadata||{}}},h.json({user:s.user})):h.json({error:"Invalid session"},{status:401})}),v.post("/api/auth/reset-password",async({request:e})=>{const{email:t}=await e.json().catch(()=>({}));return t?h.json({message:"Password reset email sent",mock_reset_token:"mock_reset_123"}):h.json({error:"Email required"},{status:400})}),v.post("/api/auth/reset-password/confirm",async({request:e})=>{const{token:t,password:r}=await e.json().catch(()=>({}));return t==="mock_reset_123"&&r&&r.length>6?h.json({success:!0}):h.json({error:"Invalid token or password"},{status:400})})];function d(e,t,r){function n(a,c){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(e),t(a,c);for(const l in i.prototype)l in a||Object.defineProperty(a,l,{value:i.prototype[l].bind(a)});a._zod.constr=i,a._zod.def=c}const s=(r==null?void 0:r.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(a){var c;const u=r!=null&&r.Parent?new o:this;n(u,a),(c=u._zod).deferred??(c.deferred=[]);for(const l of u._zod.deferred)l();return u}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var c,u;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(u=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class me extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class rn extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const nn={};function ee(e){return nn}function zo(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function St(e,t){return typeof t=="bigint"?t.toString():t}function $t(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function jt(e){return e==null}function At(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const tr=Symbol("evaluating");function k(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==tr)return n===void 0&&(n=tr,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function $o(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function V(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function be(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function rr(e){return JSON.stringify(e)}const sn="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ve(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const jo=$t(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Le(e){if(Ve(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ve(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function on(e){return Le(e)?{...e}:e}const Ao=new Set(["string","number","symbol"]);function rt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function y(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Oo(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function Mo(e,t){const r=e._zod.def,n=be(e._zod.def,{get shape(){const s={};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=r.shape[o])}return V(this,"shape",s),s},checks:[]});return X(e,n)}function Zo(e,t){const r=e._zod.def,n=be(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete s[o]}return V(this,"shape",s),s},checks:[]});return X(e,n)}function qo(e,t){if(!Le(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=be(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return V(this,"shape",o),o},checks:[]});return X(e,s)}function Wo(e,t){if(!Le(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return V(this,"shape",n),n},checks:e._zod.def.checks};return X(e,r)}function Uo(e,t){const r=be(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return V(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return X(e,r)}function No(e,t,r){const n=be(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=e?new e({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)o[i]=e?new e({type:"optional",innerType:s[i]}):s[i];return V(this,"shape",o),o},checks:[]});return X(t,n)}function Bo(e,t,r){const n=be(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)o[i]=new e({type:"nonoptional",innerType:s[i]});return V(this,"shape",o),o},checks:[]});return X(t,n)}function fe(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function an(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ae(e){return typeof e=="string"?e:e==null?void 0:e.message}function te(e,t,r){var s,o,i,a,c,u;const n={...e,path:e.path??[]};if(!e.message){const l=Ae((i=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??Ae((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??Ae((c=r.customError)==null?void 0:c.call(r,e))??Ae((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";n.message=l}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function Ot(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Pe(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const cn=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,St,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},un=d("$ZodError",cn),ln=d("$ZodError",cn,{Parent:Error});function Ho(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function Fo(e,t){const r=t||function(o){return o.message},n={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>s({issues:a}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(r(i));else{let a=n,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(e),n}const Mt=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new me;if(i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>te(c,o,ee())));throw sn(a,s==null?void 0:s.callee),a}return i.value},Zt=e=>async(t,r,n,s)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>te(c,o,ee())));throw sn(a,s==null?void 0:s.callee),a}return i.value},nt=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new me;return o.issues.length?{success:!1,error:new(e??un)(o.issues.map(i=>te(i,s,ee())))}:{success:!0,data:o.value}},Go=nt(ln),st=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>te(i,s,ee())))}:{success:!0,data:o.value}},Vo=st(ln),Xo=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Mt(e)(t,r,s)},Jo=e=>(t,r,n)=>Mt(e)(t,r,n),Ko=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Zt(e)(t,r,s)},Yo=e=>async(t,r,n)=>Zt(e)(t,r,n),Qo=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return nt(e)(t,r,s)},ei=e=>(t,r,n)=>nt(e)(t,r,n),ti=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return st(e)(t,r,s)},ri=e=>async(t,r,n)=>st(e)(t,r,n),ni=/^[cC][^\s-]{8,}$/,si=/^[0-9a-z]+$/,oi=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ii=/^[0-9a-vA-V]{20}$/,ai=/^[A-Za-z0-9]{27}$/,ci=/^[a-zA-Z0-9_-]{21}$/,ui=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,li=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,nr=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,di=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,hi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function fi(){return new RegExp(hi,"u")}const pi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,mi=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,yi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vi=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,dn=/^[A-Za-z0-9_-]*$/,bi=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,wi=/^\+(?:[0-9]){6,14}[0-9]$/,hn="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ki=new RegExp(`^${hn}$`);function fn(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function _i(e){return new RegExp(`^${fn(e)}$`)}function Ei(e){const t=fn({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${hn}T(?:${n})$`)}const Si=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Ri=/^[^A-Z]*$/,Ti=/^[^a-z]*$/,O=d("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Ii=d("$ZodCheckMaxLength",(e,t)=>{var r;O.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jt(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=Ot(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),xi=d("$ZodCheckMinLength",(e,t)=>{var r;O.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jt(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=Ot(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Li=d("$ZodCheckLengthEquals",(e,t)=>{var r;O.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jt(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const i=Ot(s),a=o>t.length;n.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),ot=d("$ZodCheckStringFormat",(e,t)=>{var r,n;O.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Pi=d("$ZodCheckRegex",(e,t)=>{ot.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Ci=d("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Ri),ot.init(e,t)}),Di=d("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Ti),ot.init(e,t)}),zi=d("$ZodCheckIncludes",(e,t)=>{O.init(e,t);const r=rt(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),$i=d("$ZodCheckStartsWith",(e,t)=>{O.init(e,t);const r=new RegExp(`^${rt(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),ji=d("$ZodCheckEndsWith",(e,t)=>{O.init(e,t);const r=new RegExp(`.*${rt(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Ai=d("$ZodCheckOverwrite",(e,t)=>{O.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Oi{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),s=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const Mi={major:4,minor:1,patch:5},T=d("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Mi;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(a,c,u)=>{let l=fe(a),f;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(a))continue}else if(l)continue;const m=a.issues.length,b=p._zod.check(a);if(b instanceof Promise&&(u==null?void 0:u.async)===!1)throw new me;if(f||b instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await b,a.issues.length!==m&&(l||(l=fe(a,m)))});else{if(a.issues.length===m)continue;l||(l=fe(a,m))}}return f?f.then(()=>a):a},i=(a,c,u)=>{if(fe(a))return a.aborted=!0,a;const l=o(c,n,u);if(l instanceof Promise){if(u.async===!1)throw new me;return l.then(f=>e._zod.parse(f,u))}return e._zod.parse(l,u)};e._zod.run=(a,c)=>{if(c.skipChecks)return e._zod.parse(a,c);if(c.direction==="backward"){const l=e._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return l instanceof Promise?l.then(f=>i(f,a,c)):i(l,a,c)}const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new me;return u.then(l=>o(l,n,c))}return o(u,n,c)}}e["~standard"]={validate:o=>{var i;try{const a=Go(e,o);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return Vo(e,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),qt=d("$ZodString",(e,t)=>{var r;T.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Si(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),_=d("$ZodStringFormat",(e,t)=>{ot.init(e,t),qt.init(e,t)}),Zi=d("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=li),_.init(e,t)}),qi=d("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=nr(n))}else t.pattern??(t.pattern=nr());_.init(e,t)}),Wi=d("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=di),_.init(e,t)}),Ui=d("$ZodURL",(e,t)=>{_.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bi.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Ni=d("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=fi()),_.init(e,t)}),Bi=d("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ci),_.init(e,t)}),Hi=d("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ni),_.init(e,t)}),Fi=d("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=si),_.init(e,t)}),Gi=d("$ZodULID",(e,t)=>{t.pattern??(t.pattern=oi),_.init(e,t)}),Vi=d("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ii),_.init(e,t)}),Xi=d("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ai),_.init(e,t)}),Ji=d("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ei(t)),_.init(e,t)}),Ki=d("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ki),_.init(e,t)}),Yi=d("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=_i(t)),_.init(e,t)}),Qi=d("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ui),_.init(e,t)}),ea=d("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=pi),_.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),ta=d("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=gi),_.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),ra=d("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=mi),_.init(e,t)}),na=d("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=yi),_.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function pn(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const sa=d("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=vi),_.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{pn(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function oa(e){if(!dn.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return pn(r)}const ia=d("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=dn),_.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{oa(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),aa=d("$ZodE164",(e,t)=>{t.pattern??(t.pattern=wi),_.init(e,t)});function ca(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const ua=d("$ZodJWT",(e,t)=>{_.init(e,t),e._zod.check=r=>{ca(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),la=d("$ZodUnknown",(e,t)=>{T.init(e,t),e._zod.parse=r=>r}),da=d("$ZodNever",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function sr(e,t,r){e.issues.length&&t.issues.push(...an(r,e.issues)),t.value[r]=e.value}const ha=d("$ZodArray",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const a=s[i],c=t.element._zod.run({value:a,issues:[]},n);c instanceof Promise?o.push(c.then(u=>sr(u,r,i))):sr(c,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function Xe(e,t,r,n){e.issues.length&&t.issues.push(...an(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function gn(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=Oo(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function mn(e,t,r,n,s,o){const i=[],a=s.keySet,c=s.catchall._zod,u=c.def.type;for(const l of Object.keys(t)){if(a.has(l))continue;if(u==="never"){i.push(l);continue}const f=c.run({value:t[l],issues:[]},n);f instanceof Promise?e.push(f.then(p=>Xe(p,r,l,t))):Xe(f,r,l,t)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const fa=d("$ZodObject",(e,t)=>{T.init(e,t);const r=$t(()=>gn(t));k(e._zod,"propValues",()=>{const i=t.shape,a={};for(const c in i){const u=i[c]._zod;if(u.values){a[c]??(a[c]=new Set);for(const l of u.values)a[c].add(l)}}return a});const n=Ve,s=t.catchall;let o;e._zod.parse=(i,a)=>{o??(o=r.value);const c=i.value;if(!n(c))return i.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),i;i.value={};const u=[],l=o.shape;for(const f of o.keys){const m=l[f]._zod.run({value:c[f],issues:[]},a);m instanceof Promise?u.push(m.then(b=>Xe(b,i,f,c))):Xe(m,i,f,c)}return s?mn(u,c,i,a,r.value,e):u.length?Promise.all(u).then(()=>i):i}}),pa=d("$ZodObjectJIT",(e,t)=>{fa.init(e,t);const r=e._zod.parse,n=$t(()=>gn(t)),s=p=>{const m=new Oi(["shape","payload","ctx"]),b=n.value,P=M=>{const D=rr(M);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};m.write("const input = payload.value;");const J=Object.create(null);let it=0;for(const M of b.keys)J[M]=`key_${it++}`;m.write("const newResult = {}");for(const M of b.keys){const D=J[M],we=rr(M);m.write(`const ${D} = ${P(M)};`),m.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${we}, ...iss.path] : [${we}]
          })));
        }
        
        if (${D}.value === undefined) {
          if (${we} in input) {
            newResult[${we}] = undefined;
          }
        } else {
          newResult[${we}] = ${D}.value;
        }
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const at=m.compile();return(M,D)=>at(p,M,D)};let o;const i=Ve,a=!nn.jitless,u=a&&jo.value,l=t.catchall;let f;e._zod.parse=(p,m)=>{f??(f=n.value);const b=p.value;return i(b)?a&&u&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(o||(o=s(t.shape)),p=o(p,m),l?mn([],b,p,m,f,e):p):r(p,m):(p.issues.push({expected:"object",code:"invalid_type",input:b,inst:e}),p)}});function or(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!fe(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>te(i,n,ee())))}),t)}const ga=d("$ZodUnion",(e,t)=>{T.init(e,t),k(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),k(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),k(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),k(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>At(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return n(s,o);let i=!1;const a=[];for(const c of t.options){const u=c._zod.run({value:s.value,issues:[]},o);if(u instanceof Promise)a.push(u),i=!0;else{if(u.issues.length===0)return u;a.push(u)}}return i?Promise.all(a).then(c=>or(c,s,e,o)):or(a,s,e,o)}}),ma=d("$ZodIntersection",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([c,u])=>ir(r,c,u)):ir(r,o,i)}});function Rt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Le(e)&&Le(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of n){const i=Rt(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=t[n],i=Rt(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ir(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),fe(e))return e;const n=Rt(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const ya=d("$ZodEnum",(e,t)=>{T.init(e,t);const r=zo(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Ao.has(typeof s)).map(s=>typeof s=="string"?rt(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const i=s.value;return n.has(i)||s.issues.push({code:"invalid_value",values:r,input:i,inst:e}),s}}),va=d("$ZodTransform",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new rn(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new me;return r.value=s,r}});function ar(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ba=d("$ZodOptional",(e,t)=>{T.init(e,t),e._zod.optin="optional",e._zod.optout="optional",k(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),k(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${At(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>ar(o,r.value)):ar(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),wa=d("$ZodNullable",(e,t)=>{T.init(e,t),k(e._zod,"optin",()=>t.innerType._zod.optin),k(e._zod,"optout",()=>t.innerType._zod.optout),k(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${At(r.source)}|null)$`):void 0}),k(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),ka=d("$ZodDefault",(e,t)=>{T.init(e,t),e._zod.optin="optional",k(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>cr(o,t)):cr(s,t)}});function cr(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const _a=d("$ZodPrefault",(e,t)=>{T.init(e,t),e._zod.optin="optional",k(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Ea=d("$ZodNonOptional",(e,t)=>{T.init(e,t),k(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>ur(o,e)):ur(s,e)}});function ur(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Sa=d("$ZodCatch",(e,t)=>{T.init(e,t),k(e._zod,"optin",()=>t.innerType._zod.optin),k(e._zod,"optout",()=>t.innerType._zod.optout),k(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>te(i,n,ee()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>te(o,n,ee()))},input:r.value}),r.issues=[]),r)}}),Ra=d("$ZodPipe",(e,t)=>{T.init(e,t),k(e._zod,"values",()=>t.in._zod.values),k(e._zod,"optin",()=>t.in._zod.optin),k(e._zod,"optout",()=>t.out._zod.optout),k(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(r,n);return o instanceof Promise?o.then(i=>Oe(i,t.in,n)):Oe(o,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(o=>Oe(o,t.out,n)):Oe(s,t.out,n)}});function Oe(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Ta=d("$ZodReadonly",(e,t)=>{T.init(e,t),k(e._zod,"propValues",()=>t.innerType._zod.propValues),k(e._zod,"values",()=>t.innerType._zod.values),k(e._zod,"optin",()=>t.innerType._zod.optin),k(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(lr):lr(s)}});function lr(e){return e.value=Object.freeze(e.value),e}const Ia=d("$ZodCustom",(e,t)=>{O.init(e,t),T.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(o=>dr(o,r,n,e));dr(s,r,n,e)}});function dr(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Pe(s))}}class xa{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function La(){return new xa}const Me=La();function Pa(e,t){return new e({type:"string",...y(t)})}function Ca(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...y(t)})}function hr(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...y(t)})}function Da(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...y(t)})}function za(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...y(t)})}function $a(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...y(t)})}function ja(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...y(t)})}function Aa(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...y(t)})}function Oa(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...y(t)})}function Ma(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...y(t)})}function Za(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...y(t)})}function qa(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...y(t)})}function Wa(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...y(t)})}function Ua(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...y(t)})}function Na(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...y(t)})}function Ba(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...y(t)})}function Ha(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...y(t)})}function Fa(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...y(t)})}function Ga(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...y(t)})}function Va(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...y(t)})}function Xa(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...y(t)})}function Ja(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...y(t)})}function Ka(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...y(t)})}function Ya(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...y(t)})}function Qa(e,t){return new e({type:"string",format:"date",check:"string_format",...y(t)})}function ec(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...y(t)})}function tc(e,t){return new e({type:"string",format:"duration",check:"string_format",...y(t)})}function rc(e){return new e({type:"unknown"})}function nc(e,t){return new e({type:"never",...y(t)})}function yn(e,t){return new Ii({check:"max_length",...y(t),maximum:e})}function Je(e,t){return new xi({check:"min_length",...y(t),minimum:e})}function vn(e,t){return new Li({check:"length_equals",...y(t),length:e})}function sc(e,t){return new Pi({check:"string_format",format:"regex",...y(t),pattern:e})}function oc(e){return new Ci({check:"string_format",format:"lowercase",...y(e)})}function ic(e){return new Di({check:"string_format",format:"uppercase",...y(e)})}function ac(e,t){return new zi({check:"string_format",format:"includes",...y(t),includes:e})}function cc(e,t){return new $i({check:"string_format",format:"starts_with",...y(t),prefix:e})}function uc(e,t){return new ji({check:"string_format",format:"ends_with",...y(t),suffix:e})}function ze(e){return new Ai({check:"overwrite",tx:e})}function lc(e){return ze(t=>t.normalize(e))}function dc(){return ze(e=>e.trim())}function hc(){return ze(e=>e.toLowerCase())}function fc(){return ze(e=>e.toUpperCase())}function pc(e,t,r){return new e({type:"array",element:t,...y(r)})}function gc(e,t,r){return new e({type:"custom",check:"custom",fn:t,...y(r)})}function mc(e){const t=yc(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Pe(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Pe(s))}},e(r.value,r)));return t}function yc(e,t){const r=new O({check:"custom",...y(t)});return r._zod.check=e,r}const vc=d("ZodISODateTime",(e,t)=>{Ji.init(e,t),E.init(e,t)});function bc(e){return Ya(vc,e)}const wc=d("ZodISODate",(e,t)=>{Ki.init(e,t),E.init(e,t)});function kc(e){return Qa(wc,e)}const _c=d("ZodISOTime",(e,t)=>{Yi.init(e,t),E.init(e,t)});function Ec(e){return ec(_c,e)}const Sc=d("ZodISODuration",(e,t)=>{Qi.init(e,t),E.init(e,t)});function Rc(e){return tc(Sc,e)}const bn=(e,t)=>{un.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Fo(e,r)},flatten:{value:r=>Ho(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,St,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,St,2)}},isEmpty:{get(){return e.issues.length===0}}})},Tc=d("ZodError",bn),C=d("ZodError",bn,{Parent:Error}),Ic=Mt(C),xc=Zt(C),Lc=nt(C),Pc=st(C),Cc=Xo(C),Dc=Jo(C),zc=Ko(C),$c=Yo(C),jc=Qo(C),Ac=ei(C),Oc=ti(C),Mc=ri(C),x=d("ZodType",(e,t)=>(T.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>X(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Ic(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Lc(e,r,n),e.parseAsync=async(r,n)=>xc(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Pc(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>Cc(e,r,n),e.decode=(r,n)=>Dc(e,r,n),e.encodeAsync=async(r,n)=>zc(e,r,n),e.decodeAsync=async(r,n)=>$c(e,r,n),e.safeEncode=(r,n)=>jc(e,r,n),e.safeDecode=(r,n)=>Ac(e,r,n),e.safeEncodeAsync=async(r,n)=>Oc(e,r,n),e.safeDecodeAsync=async(r,n)=>Mc(e,r,n),e.refine=(r,n)=>e.check(Lu(r,n)),e.superRefine=r=>e.check(Pu(r)),e.overwrite=r=>e.check(ze(r)),e.optional=()=>gr(e),e.nullable=()=>mr(e),e.nullish=()=>gr(mr(e)),e.nonoptional=r=>_u(e,r),e.array=()=>au(e),e.or=r=>du([e,r]),e.and=r=>fu(e,r),e.transform=r=>yr(e,mu(r)),e.default=r=>bu(e,r),e.prefault=r=>ku(e,r),e.catch=r=>Su(e,r),e.pipe=r=>yr(e,r),e.readonly=()=>Iu(e),e.describe=r=>{const n=e.clone();return Me.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Me.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Me.get(e);const n=e.clone();return Me.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),wn=d("_ZodString",(e,t)=>{qt.init(e,t),x.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(sc(...n)),e.includes=(...n)=>e.check(ac(...n)),e.startsWith=(...n)=>e.check(cc(...n)),e.endsWith=(...n)=>e.check(uc(...n)),e.min=(...n)=>e.check(Je(...n)),e.max=(...n)=>e.check(yn(...n)),e.length=(...n)=>e.check(vn(...n)),e.nonempty=(...n)=>e.check(Je(1,...n)),e.lowercase=n=>e.check(oc(n)),e.uppercase=n=>e.check(ic(n)),e.trim=()=>e.check(dc()),e.normalize=(...n)=>e.check(lc(...n)),e.toLowerCase=()=>e.check(hc()),e.toUpperCase=()=>e.check(fc())}),Zc=d("ZodString",(e,t)=>{qt.init(e,t),wn.init(e,t),e.email=r=>e.check(Ca(qc,r)),e.url=r=>e.check(Aa(Wc,r)),e.jwt=r=>e.check(Ka(ru,r)),e.emoji=r=>e.check(Oa(Uc,r)),e.guid=r=>e.check(hr(fr,r)),e.uuid=r=>e.check(Da(Ze,r)),e.uuidv4=r=>e.check(za(Ze,r)),e.uuidv6=r=>e.check($a(Ze,r)),e.uuidv7=r=>e.check(ja(Ze,r)),e.nanoid=r=>e.check(Ma(Nc,r)),e.guid=r=>e.check(hr(fr,r)),e.cuid=r=>e.check(Za(Bc,r)),e.cuid2=r=>e.check(qa(Hc,r)),e.ulid=r=>e.check(Wa(Fc,r)),e.base64=r=>e.check(Va(Qc,r)),e.base64url=r=>e.check(Xa(eu,r)),e.xid=r=>e.check(Ua(Gc,r)),e.ksuid=r=>e.check(Na(Vc,r)),e.ipv4=r=>e.check(Ba(Xc,r)),e.ipv6=r=>e.check(Ha(Jc,r)),e.cidrv4=r=>e.check(Fa(Kc,r)),e.cidrv6=r=>e.check(Ga(Yc,r)),e.e164=r=>e.check(Ja(tu,r)),e.datetime=r=>e.check(bc(r)),e.date=r=>e.check(kc(r)),e.time=r=>e.check(Ec(r)),e.duration=r=>e.check(Rc(r))});function Te(e){return Pa(Zc,e)}const E=d("ZodStringFormat",(e,t)=>{_.init(e,t),wn.init(e,t)}),qc=d("ZodEmail",(e,t)=>{Wi.init(e,t),E.init(e,t)}),fr=d("ZodGUID",(e,t)=>{Zi.init(e,t),E.init(e,t)}),Ze=d("ZodUUID",(e,t)=>{qi.init(e,t),E.init(e,t)}),Wc=d("ZodURL",(e,t)=>{Ui.init(e,t),E.init(e,t)}),Uc=d("ZodEmoji",(e,t)=>{Ni.init(e,t),E.init(e,t)}),Nc=d("ZodNanoID",(e,t)=>{Bi.init(e,t),E.init(e,t)}),Bc=d("ZodCUID",(e,t)=>{Hi.init(e,t),E.init(e,t)}),Hc=d("ZodCUID2",(e,t)=>{Fi.init(e,t),E.init(e,t)}),Fc=d("ZodULID",(e,t)=>{Gi.init(e,t),E.init(e,t)}),Gc=d("ZodXID",(e,t)=>{Vi.init(e,t),E.init(e,t)}),Vc=d("ZodKSUID",(e,t)=>{Xi.init(e,t),E.init(e,t)}),Xc=d("ZodIPv4",(e,t)=>{ea.init(e,t),E.init(e,t)}),Jc=d("ZodIPv6",(e,t)=>{ta.init(e,t),E.init(e,t)}),Kc=d("ZodCIDRv4",(e,t)=>{ra.init(e,t),E.init(e,t)}),Yc=d("ZodCIDRv6",(e,t)=>{na.init(e,t),E.init(e,t)}),Qc=d("ZodBase64",(e,t)=>{sa.init(e,t),E.init(e,t)}),eu=d("ZodBase64URL",(e,t)=>{ia.init(e,t),E.init(e,t)}),tu=d("ZodE164",(e,t)=>{aa.init(e,t),E.init(e,t)}),ru=d("ZodJWT",(e,t)=>{ua.init(e,t),E.init(e,t)}),nu=d("ZodUnknown",(e,t)=>{la.init(e,t),x.init(e,t)});function pr(){return rc(nu)}const su=d("ZodNever",(e,t)=>{da.init(e,t),x.init(e,t)});function ou(e){return nc(su,e)}const iu=d("ZodArray",(e,t)=>{ha.init(e,t),x.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Je(r,n)),e.nonempty=r=>e.check(Je(1,r)),e.max=(r,n)=>e.check(yn(r,n)),e.length=(r,n)=>e.check(vn(r,n)),e.unwrap=()=>e.element});function au(e,t){return pc(iu,e,t)}const cu=d("ZodObject",(e,t)=>{pa.init(e,t),x.init(e,t),k(e,"shape",()=>t.shape),e.keyof=()=>pu(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:pr()}),e.loose=()=>e.clone({...e._zod.def,catchall:pr()}),e.strict=()=>e.clone({...e._zod.def,catchall:ou()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>qo(e,r),e.safeExtend=r=>Wo(e,r),e.merge=r=>Uo(e,r),e.pick=r=>Mo(e,r),e.omit=r=>Zo(e,r),e.partial=(...r)=>No(kn,e,r[0]),e.required=(...r)=>Bo(_n,e,r[0])});function uu(e,t){const r={type:"object",get shape(){return V(this,"shape",e?$o(e):{}),this.shape},...y(t)};return new cu(r)}const lu=d("ZodUnion",(e,t)=>{ga.init(e,t),x.init(e,t),e.options=t.options});function du(e,t){return new lu({type:"union",options:e,...y(t)})}const hu=d("ZodIntersection",(e,t)=>{ma.init(e,t),x.init(e,t)});function fu(e,t){return new hu({type:"intersection",left:e,right:t})}const Tt=d("ZodEnum",(e,t)=>{ya.init(e,t),x.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Tt({...t,checks:[],...y(s),entries:o})},e.exclude=(n,s)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new Tt({...t,checks:[],...y(s),entries:o})}});function pu(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Tt({type:"enum",entries:r,...y(t)})}const gu=d("ZodTransform",(e,t)=>{va.init(e,t),x.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new rn(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(Pe(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(Pe(i))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function mu(e){return new gu({type:"transform",transform:e})}const kn=d("ZodOptional",(e,t)=>{ba.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gr(e){return new kn({type:"optional",innerType:e})}const yu=d("ZodNullable",(e,t)=>{wa.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType});function mr(e){return new yu({type:"nullable",innerType:e})}const vu=d("ZodDefault",(e,t)=>{ka.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function bu(e,t){return new vu({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():on(t)}})}const wu=d("ZodPrefault",(e,t)=>{_a.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ku(e,t){return new wu({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():on(t)}})}const _n=d("ZodNonOptional",(e,t)=>{Ea.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType});function _u(e,t){return new _n({type:"nonoptional",innerType:e,...y(t)})}const Eu=d("ZodCatch",(e,t)=>{Sa.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Su(e,t){return new Eu({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Ru=d("ZodPipe",(e,t)=>{Ra.init(e,t),x.init(e,t),e.in=t.in,e.out=t.out});function yr(e,t){return new Ru({type:"pipe",in:e,out:t})}const Tu=d("ZodReadonly",(e,t)=>{Ta.init(e,t),x.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Iu(e){return new Tu({type:"readonly",innerType:e})}const xu=d("ZodCustom",(e,t)=>{Ia.init(e,t),x.init(e,t)});function Lu(e,t={}){return gc(xu,e,t)}function Pu(e){return mc(e)}const Ie=new Set(["mock_access_token_123","valid_token"]),Cu=new Set(["expired_token_123"]),Du=new Map,vr=new Map,zu=Te().email("Invalid email format"),$u=Te().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[!@#$%^&*]/,"Password must contain at least one special character"),ju=uu({email:zu,password:$u,sqlInjection:Te().max(100).refine(e=>!e.includes("DROP")&&!e.includes("DELETE")&&!e.includes("--"),"SQL injection attempt detected"),xssAttempt:Te().refine(e=>!e.includes("<script")&&!e.includes("onerror=")&&!e.includes("javascript:"),"XSS attempt detected"),oversizedField:Te().max(1e3,"Field size exceeds maximum allowed")});function qe(e){if(!e)return{valid:!1,error:"No authorization header"};if(!e.startsWith("Bearer "))return{valid:!1,error:"Invalid authorization format"};const t=e.replace("Bearer ","");if(Cu.has(t))return{valid:!1,error:"Token expired",token:t};if(!Ie.has(t)&&!t.endsWith("_tampered")){const r=t.replace("_tampered","");if(Ie.has(r))return{valid:!1,error:"Token signature invalid",token:t}}return Ie.has(t)?{valid:!0,token:t}:{valid:!1,error:"Token invalid",token:t}}function Au(e,t=3,r=1e4){const n=Date.now(),s=vr.get(e);return!s||n>s.resetAt?(vr.set(e,{count:1,resetAt:n+r}),{allowed:!0,remaining:t-1}):s.count>=t?{allowed:!1,remaining:0,resetIn:Math.ceil((s.resetAt-n)/1e3)}:(s.count++,{allowed:!0,remaining:t-s.count})}const En=[v.get("/api/secure/data",async({request:e})=>{const t=e.headers.get("Authorization"),r=qe(t);return r.valid?h.json({message:"Access granted",data:{userId:"user_123",secretData:"This is protected information",permissions:["read","write"],tokenInfo:{token:r.token,expiresIn:3600,issuedAt:Date.now()}}}):h.json({error:r.error,message:"Authentication required"},{status:401})}),v.post("/api/secure/action",async({request:e})=>{const t=e.headers.get("Authorization"),r=e.headers.get("X-CSRF-Token");if(!qe(t).valid)return h.json({error:"Authentication required"},{status:401});if(!r)return h.json({error:"CSRF token missing",message:"Cross-site request forgery protection"},{status:403});if(!r.startsWith("csrf_"))return h.json({error:"CSRF token invalid",message:"Invalid cross-site request forgery token"},{status:403});const s=await e.json().catch(()=>({}));return h.json({success:!0,action:s.action||"unknown",timestamp:Date.now(),message:"Action completed successfully"})}),v.get("/api/rate-limited",async({request:e})=>{const t=e.headers.get("Authorization"),r=e.headers.get("X-Client-Id")||"anonymous";if(!qe(t).valid)return h.json({error:"Authentication required"},{status:401});const s=Au(r,3,1e4);return s.allowed?h.json({success:!0,data:`Request ${4-s.remaining} of 3 in current window`,timestamp:Date.now()},{headers:{"X-RateLimit-Limit":"3","X-RateLimit-Remaining":String(s.remaining)}}):h.json({error:"Rate limit exceeded",message:`Too many requests. Please retry after ${s.resetIn} seconds`,retryAfter:s.resetIn},{status:429,headers:{"Retry-After":String(s.resetIn||1),"X-RateLimit-Limit":"3","X-RateLimit-Remaining":"0","X-RateLimit-Reset":String(Date.now()+(s.resetIn||1)*1e3)}})}),v.post("/api/secure/validate",async({request:e})=>{const t=e.headers.get("Authorization");if(!qe(t).valid)return h.json({error:"Authentication required"},{status:401});const n=await e.json().catch(()=>({}));try{const s=ju.parse(n);return h.json({success:!0,message:"All inputs validated successfully",validated:{email:s.email,password:"***hidden***",fieldsChecked:Object.keys(s).length}})}catch(s){return s instanceof Tc?h.json({success:!1,message:"Validation failed",errors:s.errors.map(o=>({field:o.path.join("."),message:o.message,code:o.code}))},{status:400}):h.json({error:"Invalid request data"},{status:400})}}),v.post("/api/secure/refresh",async({request:e})=>{const r=(await e.json().catch(()=>({}))).refresh_token;if(!r||!r.includes("refresh"))return h.json({error:"Invalid refresh token"},{status:401});const n=`mock_access_token_${Date.now()}`;return Ie.add(n),h.json({access_token:n,refresh_token:`mock_refresh_token_${Date.now()}`,expires_in:3600,token_type:"Bearer"})}),v.post("/api/secure/logout",async({request:e})=>{const t=e.headers.get("Authorization");if(t&&t.startsWith("Bearer ")){const r=t.replace("Bearer ","");Ie.delete(r),Du.delete(r)}return h.json({success:!0,message:"Logged out successfully"})})];let I={questions:0,analytics:0,userSync:0,withBatch:0,withoutBatch:0};const br=Array.from({length:100},(e,t)=>({id:`q-${t+1}`,text:`Question ${t+1}: What is the answer to this?`,options:["Option A","Option B","Option C","Option D"],correctAnswer:Math.floor(Math.random()*4),difficulty:["easy","medium","hard"][Math.floor(Math.random()*3)],category:["science","history","math","geography"][Math.floor(Math.random()*4)],xpReward:(Math.floor(Math.random()*3)+1)*10})),Y=[],oe=new Map;let yt=Promise.resolve();const Ou=[v.post(/.*\/api\/batch\/questions$/,async({request:e})=>{const t=await e.json();I.questions++,I.withBatch++,await S(100);const r=t.questionIds.map(n=>br.find(s=>s.id===n)||{id:n,text:`Question ${n}`,options:["A","B","C","D"],correctAnswer:0,difficulty:"medium",category:"general",xpReward:10});return h.json({success:!0,data:r,batchSize:t.questionIds.length,apiCallsSaved:t.questionIds.length-1})}),v.get(/.*\/api\/questions\/(?<id>[^/]+)$/,async({request:e})=>{I.questions++,I.withoutBatch++,await S(50);const r=new URL(e.url).pathname.split("/").pop(),n=br.find(s=>s.id===r)||{id:r,text:`Question ${r}`,options:["A","B","C","D"],correctAnswer:0,difficulty:"medium",category:"general",xpReward:10};return h.json({success:!0,data:n})}),v.post(/.*\/api\/batch\/analytics$/,async({request:e})=>{const t=await e.json();return I.analytics++,I.withBatch++,await S(150),Y.push(...t.events.map(r=>({...r,processedAt:new Date().toISOString(),batchId:`batch-${Date.now()}`}))),h.json({success:!0,processed:t.events.length,totalEvents:Y.length,apiCallsSaved:t.events.length-1})}),v.post(/.*\/api\/analytics\/track$/,async({request:e})=>{const t=await e.json();return I.analytics++,I.withoutBatch++,await S(50),Y.push({...t,processedAt:new Date().toISOString()}),h.json({success:!0,processed:1})}),v.post(/.*\/api\/batch\/user-sync$/,async({request:e})=>{const t=await e.json();return I.userSync++,I.withBatch++,await S(100),t.updates.forEach(r=>{const n=oe.get(r.userId)||{};oe.set(r.userId,{...n,...r.fields,lastSynced:new Date().toISOString()})}),h.json({success:!0,usersUpdated:t.updates.length,syncedAt:new Date().toISOString(),apiCallsSaved:t.updates.length-1})}),v.patch(/.*\/api\/users\/(?<userId>[^/]+)$/,async({request:e})=>{const t=await e.json();I.userSync++,I.withoutBatch++,await S(50);const n=new URL(e.url).pathname.split("/").pop(),s=oe.get(n)||{};return oe.set(n,{...s,...t,lastSynced:new Date().toISOString()}),h.json({success:!0,userId:n,updated:!0})}),v.get(/.*\/api\/batch\/stats$/,()=>{const e=I.withBatch,t=I.withoutBatch,r=Math.max(0,t-e),n=Y.length,s=n>0?Math.max(0,n-e):r,o=n>0?n:t||1,i=Math.round(s/o*100);return h.json({apiCalls:I,totalSaved:s,savingsPercentage:i,analyticsEventsProcessed:Y.length,usersInSync:oe.size,efficiency:{questionsPerCall:e>0?Math.round(I.questions/e):0,eventsPerCall:e>0?Math.round(Y.length/I.analytics):0}})}),v.post(/.*\/api\/batch\/reset-stats$/,()=>(I={questions:0,analytics:0,userSync:0,withBatch:0,withoutBatch:0},Y.length=0,oe.clear(),h.json({success:!0,message:"Statistics reset"}))),v.post(/.*\/api\/batch\/test-failure$/,async({request:e})=>{const t=await e.json();return Math.random()<(t.failureRate||.5)?(await S(100),h.json({error:"Simulated batch processing failure",retryable:!0},{status:503})):(await S(200),h.json({success:!0,message:"Batch processed successfully"}))}),v.post(/.*\/api\/batch\/performance-test$/,async({request:e})=>{const t=await e.json(),r=Date.now();if(t.mode==="batch"){const n=Math.ceil(t.itemCount/t.batchSize);return await S(Math.max(50,n*20)),h.json({success:!0,mode:"batch",itemsProcessed:t.itemCount,apiCalls:n,processingTime:Date.now()-r,averageTimePerItem:(Date.now()-r)/t.itemCount})}else return yt=yt.then(()=>S(10)),await yt,h.json({success:!0,mode:"individual",itemsProcessed:t.itemCount,apiCalls:t.itemCount,processingTime:Date.now()-r,averageTimePerItem:(Date.now()-r)/t.itemCount})})],F={latencyMs:0,errorRate:0};async function ie(){F.latencyMs>0&&await S(F.latencyMs)}function ae(){return F.errorRate>0&&Math.random()<F.errorRate}function ce(e){try{return e.headers.get("x-msw-no-defaults")==="1"}catch{return!1}}const wr=new Map,Mu=1e4,ue=3,Sn=[...Do,...En,...Ou,v.get("/health",async({request:e})=>!ce(e)&&(await ie(),ae())?new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}}):h.json({ok:!0,ts:Date.now()})),v.get("/api/lessons",async({request:e})=>!ce(e)&&(await ie(),ae())?new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}}):(await S(200),h.json({lessons:[{id:"js-basics",title:"JavaScript Basics",progress:.2},{id:"react-components",title:"React Components",progress:.6},{id:"ts-advanced",title:"TypeScript Advanced",progress:1}]}))),v.get("/api/quizzes",async({request:e})=>!ce(e)&&(await ie(),ae())?new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}}):(await S(250),h.json({quizzes:[{id:"q1",category:"javascript",difficulty:"easy"},{id:"q2",category:"react",difficulty:"medium"}]}))),v.post("/api/login",async({request:e})=>{if(!ce(e)&&(await ie(),ae()))return new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}});await S(150);const t=await e.json().catch(()=>({})),{email:r="demo@quizmentor.app"}=t||{};return h.json({token:"mock-token-123",user:{id:"demo",email:r}},{headers:{"Cache-Control":"no-store"}})}),v.get("/api/cache",async({request:e})=>{if(!ce(e)&&(await ie(),ae()))return new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}});const t='"demo-etag-abc123"',r=e.headers.get("if-none-match"),n={ts:new Date("2024-01-01T00:00:00Z").toISOString(),value:42};return r===t?h.json(null,{status:304,headers:{ETag:t,"Cache-Control":"public, max-age=60"}}):h.json(n,{headers:{ETag:t,"Cache-Control":"public, max-age=60"}})}),v.get("/api/ratelimit",async({request:e})=>{if(!ce(e)&&(await ie(),ae()))return new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}});const t=Date.now(),r=e.headers.get("x-client-id")||"anon",n=wr.get(r);if(!n||t>n.resetAt)return wr.set(r,{count:1,resetAt:t+Mu}),h.json({ok:!0,remaining:ue-1});if(n.count>=ue){const s=Math.max(1,Math.ceil((n.resetAt-t)/1e3));return h.json({error:"rate_limited"},{status:429,headers:{"Retry-After":String(s),"X-RateLimit-Limit":String(ue),"X-RateLimit-Remaining":"0"}})}return n.count+=1,h.json({ok:!0,remaining:Math.max(0,ue-n.count)},{headers:{"X-RateLimit-Limit":String(ue),"X-RateLimit-Remaining":String(Math.max(0,ue-n.count))}})}),,v.get("/__msw__/defaults",async()=>h.json(F)),v.post("/__msw__/defaults",async({request:e})=>{try{const t=await e.json().catch(()=>({}));return typeof t.latencyMs=="number"&&t.latencyMs>=0&&(F.latencyMs=Math.min(1e4,t.latencyMs)),typeof t.errorRate=="number"&&t.errorRate>=0&&(F.errorRate=Math.max(0,Math.min(1,t.errorRate))),h.json(F)}catch{return new h("Invalid body",{status:400,headers:{"Content-Type":"text/plain"}})}})];function le(){try{const e=localStorage.getItem("__mswDefaults__");if(!e)return{latencyMs:0,errorRate:0};const t=JSON.parse(e);return{latencyMs:Number(t.latencyMs)||0,errorRate:Number(t.errorRate)||0}}catch{return{latencyMs:0,errorRate:0}}}const U=[{id:"docs-dx-mdx3",title:"Docs & DX stabilization (MDX3)",status:"In Progress",priority:"P1",owner:"Docs Team",eta:"This sprint",risk:"Low"},{id:"qa-guardrails",title:"QA & Guardrails",status:"Planned",priority:"P1",owner:"QE",eta:"Next sprint",risk:"Medium"},{id:"perf-bundle",title:"Performance & Bundling",status:"Planned",priority:"P2",owner:"Core",eta:"Next sprint",risk:"Medium"}],It=[...En,v.get("/api/epics",async({request:e})=>{const t=e.headers.get("x-msw-no-defaults")==="1",{latencyMs:r,errorRate:n}=le();if(!t&&(r>0&&await S(Math.min(1e4,r)),n>0&&Math.random()<n))return new h(JSON.stringify({error:"Injected error",trace:[{step:"defaults",service:"msw",status:503}]}),{status:503,headers:{"Content-Type":"application/json"}});const s=Number(e.headers.get("x-trace-delay")||"0");(e.headers.get("x-trace-fail")||"").toLowerCase();const o=Number(e.headers.get("x-trace-jitter")||"0");if(s>0&&await S(Math.min(1e4,s)),o>0){const i=Math.floor(Math.random()*Math.max(0,o+1));i>0&&await S(Math.min(1e4,i))}return h.json({epics:U})}),v.post("/api/epics",async({request:e})=>{const t=e.headers.get("x-msw-no-defaults")==="1",{latencyMs:r,errorRate:n}=le();if(!t&&(r>0&&await S(Math.min(1e4,r)),n>0&&Math.random()<n))return new h("Injected error",{status:503});const s=await e.json().catch(()=>({})),o={id:(s==null?void 0:s.id)||`ep_${Date.now().toString(36)}`,title:(s==null?void 0:s.title)||"Untitled Epic",status:(s==null?void 0:s.status)||"Planned",priority:(s==null?void 0:s.priority)||"P2",owner:(s==null?void 0:s.owner)||null,eta:(s==null?void 0:s.eta)||null,risk:(s==null?void 0:s.risk)||null};return U.push(o),h.json(o,{status:201})}),v.put(/\/api\/epics\/[^/]+$/,async({request:e})=>{const t=e.headers.get("x-msw-no-defaults")==="1",{latencyMs:r,errorRate:n}=le();if(!t&&(r>0&&await S(Math.min(1e4,r)),n>0&&Math.random()<n))return new h("Injected error",{status:503});const o=new URL(e.url).pathname.split("/").pop(),i=U.findIndex(c=>c.id===o);if(i===-1)return h.json({error:"not_found"},{status:404});const a=await e.json().catch(()=>({}));return U[i]={...U[i],...a},h.json(U[i])}),v.delete(/\/api\/epics\/[^/]+$/,async({request:e})=>{const t=e.headers.get("x-msw-no-defaults")==="1",{latencyMs:r,errorRate:n}=le();if(!t&&(r>0&&await S(Math.min(1e4,r)),n>0&&Math.random()<n))return new h("Injected error",{status:503});const o=new URL(e.url).pathname.split("/").pop(),i=U.findIndex(c=>c.id===o);if(i===-1)return h.json({error:"not_found"},{status:404});const a=U.splice(i,1)[0];return h.json(a)}),v.post("/api/quiz/start",async({request:e})=>{const t=e.headers.get("x-msw-no-defaults")==="1",{latencyMs:r,errorRate:n}=le();if(!t&&(r>0&&await S(Math.min(1e4,r)),n>0&&Math.random()<n))return new h("Injected error",{status:503});const s=await e.json().catch(()=>({})),o=(s==null?void 0:s.topic)||"general",i=(s==null?void 0:s.difficulty)||"medium",a=[];if(traceFail==="recommendations")return a.push({step:"recommendations",service:"adaptive-engine",status:500}),new h(JSON.stringify({error:"Trace failure at recommendations",trace:a}),{status:500,headers:{"Content-Type":"application/json"}});a.push({step:"recommendations",service:"adaptive-engine",status:200});const c={userId:"demo-user",recommendedDifficulty:i,learningStyle:"visual"};if(traceFail==="session")return a.push({step:"session:start",service:"learning-orchestrator",status:500}),new h(JSON.stringify({error:"Trace failure at session:start",profile:c,trace:a}),{status:500,headers:{"Content-Type":"application/json"}});const u={id:`sess_${Date.now().toString(36)}`,createdAt:new Date().toISOString()};a.push({step:"session:start",service:"learning-orchestrator",status:201});const l=[{id:"q1",text:`(${o}) What is 2+2?`,options:["3","4","5","6"],correct:1},{id:"q2",text:`(${o}) Select the even number`,options:["1","2","3","5"],correct:1}];if(traceFail==="validate")return a.push({step:"validate:batch",service:"bloom-validator",status:500}),new h(JSON.stringify({error:"Trace failure at validate:batch",sessionId:u.id,profile:c,questions:l,trace:a}),{status:500,headers:{"Content-Type":"application/json"}});const f={results:l.map(p=>({id:p.id,ok:!0}))};return a.push({step:"validate:batch",service:"bloom-validator",status:200}),h.json({sessionId:u.id,profile:c,questions:l,validation:f.results,trace:a})}),v.post("/api/tooltips/generate",async({request:e})=>{const{latencyMs:t,errorRate:r}=le();if(!(e.headers.get("x-msw-no-defaults")==="1")&&(t>0&&await S(Math.min(1e4,t)),r>0&&Math.random()<r))return new h("Injected error",{status:503,headers:{"Content-Type":"text/plain"}});const s=await e.json().catch(()=>({})),o=(s==null?void 0:s.input)||"";if(o.includes("TRIGGER_RATE_LIMIT"))return new h(JSON.stringify({error:"rate_limited"}),{status:429,headers:{"Content-Type":"application/json","Retry-After":"3"}});if(o.includes("TRIGGER_ERROR"))return new h("Internal error (simulated)",{status:500,headers:{"Content-Type":"text/plain"}});const i='"tooltips-etag-v1"',a=e.headers.get("if-none-match");return o.includes("TRIGGER_CACHED")?a===i?new h(null,{status:304,headers:{ETag:i,"Cache-Control":"public, max-age=120"}}):new h(JSON.stringify({input:o,html:`<p><strong>Cached Tooltip</strong>: ${o.replace("TRIGGER_CACHED","").trim()||"Hello!"}</p>`}),{status:200,headers:{"Content-Type":"application/json",ETag:i,"Cache-Control":"public, max-age=120"}}):h.json({input:o,html:`<p>Tooltip for: <em>${o||"N/A"}</em></p>`})})],{useGlobals:Zu}=__STORYBOOK_MODULE_PREVIEW_API__;function qu(){const[{presenterStep:e},t]=Zu(),r=[{title:"Start Here",href:"?path=/story/docs-00-start-here--page"},{title:"Quick Index",href:"?path=/story/docs-quick-index--page"},{title:"Presentation Walkthrough",href:"?path=/story/docs-presentation-narrated-walkthrough--page"},{title:"Agent Boot",href:"?path=/story/docs-agent-boot--page"},{title:"DevLog",href:"?path=/story/docs-dev-log--default"},{title:"Epics",href:"?path=/story/docs-epics--default"},{title:"System Status",href:"?path=/story/docs-system-status--default"},{title:"Labs Index",href:"?path=/story/labs-index--page"},{title:"Mobile Mock Beta",href:"?path=/story/labs-mobile-mock-beta--page"},{title:"Device Matrix",href:"?path=/story/labs-device-matrix--page"},{title:"User Journeys",href:"?path=/story/labs-user-journeys--page"},{title:"Journey‑Driven TDD",href:"?path=/story/labs-journey-driven-tdd--page"},{title:"Auth & Session",href:"?path=/story/labs-auth-session--page"},{title:"Quiz & Content",href:"?path=/story/labs-quiz-content--page"},{title:"Gamification & Achievements",href:"?path=/story/labs-gamification-achievements--page"},{title:"Leaderboard & Social",href:"?path=/story/labs-leaderboard-social--page"},{title:"Onboarding & Profile",href:"?path=/story/labs-onboarding-profile--page"},{title:"S2S Orchestration",href:"?path=/story/labs-s2s-orchestration--page"},{title:"API Playground",href:"?path=/story/api-playground--default"},{title:"Swagger",href:"?path=/story/api-swagger--default"},{title:"Error & Offline",href:"?path=/story/labs-error-offline--page"},{title:"Performance & Device Metrics",href:"?path=/story/labs-performance-device-metrics--page"},{title:"Security & Privacy",href:"?path=/story/labs-security-privacy--page"},{title:"Accessibility",href:"?path=/story/labs-accessibility--page"},{title:"Sentry (Crash & Release Health)",href:"?path=/story/labs-sentry-crash-release-health--page"}];return g.useEffect(()=>{try{const n=window.location.href,s=r.findIndex(o=>n.includes(o.href));s>=0&&e!==s&&t({presenterStep:s})}catch{}},[]),g.createElement("div",{style:Wu},g.createElement("div",{style:Uu},g.createElement("div",{style:Nu},g.createElement("div",{style:Bu},"Presenter Guide"),g.createElement("div",{style:Hu},"Click a step to navigate. Use the toolbar to toggle this overlay.")),g.createElement("div",{style:Fu},r.map((n,s)=>g.createElement("a",{key:n.href,href:n.href,onClick:()=>t({presenterStep:s}),style:s===e?{...kr,...Gu}:kr},n.title)))))}const Wu={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,background:"rgba(2,6,23,0.5)",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",padding:12,pointerEvents:"none"},Uu={pointerEvents:"auto",width:380,maxHeight:"95vh",overflow:"auto",background:"rgba(2,6,23,0.95)",color:"#e5e7eb",border:"1px solid rgba(59,130,246,0.35)",borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},Nu={padding:"12px 14px 6px 14px",borderBottom:"1px solid rgba(148,163,184,0.25)"},Bu={fontSize:16,fontWeight:800,color:"#f8fafc"},Hu={fontSize:12,marginTop:4,color:"rgba(226,232,240,0.8)"},Fu={display:"grid",gridTemplateColumns:"1fr",gap:8,padding:12},kr={display:"block",padding:"8px 10px",borderRadius:8,textDecoration:"none",background:"rgba(30,41,59,0.85)",color:"#e5e7eb",border:"1px solid rgba(59,130,246,0.25)"},Gu={background:"rgba(59,130,246,0.25)",border:"1px solid rgba(59,130,246,0.6)"},{useGlobals:Vu,addons:Xu}=__STORYBOOK_MODULE_PREVIEW_API__;Ro({onUnhandledRequest:"bypass"});typeof window<"u"&&(window.__MSW_ACTIVE__=!0);let _r=!1;function Ju(){if(typeof window>"u"||_r)return;const e=window.fetch.bind(window);window.__ORIG_FETCH__=e,window.fetch=(t,r)=>{try{if(!!window.__MSW_NO_DEFAULTS__){const s=new Headers((r==null?void 0:r.headers)||{});return s.set("x-msw-no-defaults","1"),e(t,{...r||{},headers:s})}}catch{}return e(t,r)},_r=!0}var Lr,Pr;const Er=(Pr=(Lr=import.meta)==null?void 0:Lr.env)==null?void 0:Pr.VITE_STORYBOOK_PASSWORD,Sr="__sb_demo_pw_ok__",Ku=e=>{if(!Er)return e();const[t,r]=g.useState(()=>{try{return localStorage.getItem(Sr)==="1"}catch{return!1}}),[n,s]=g.useState(""),[o,i]=g.useState(null),a=p=>{if(p&&p.preventDefault(),n===Er){try{localStorage.setItem(Sr,"1")}catch{}r(!0)}else i("Incorrect password")};if(t)return e();const c={position:"fixed",inset:0,background:"rgba(2,6,23,0.9)",display:"grid",placeItems:"center",zIndex:999999},u={width:360,padding:18,borderRadius:12,background:"rgba(15,23,42,0.95)",color:"#e5e7eb",border:"1px solid rgba(148,163,184,0.25)"},l={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid rgba(59,130,246,0.35)",background:"rgba(2,6,23,0.8)",color:"#e5e7eb"},f={marginTop:10,width:"100%",padding:"8px 10px",borderRadius:8,background:"#2563eb",color:"white",fontWeight:700,cursor:"pointer",border:"none"};return g.createElement(g.Fragment,null,g.createElement("div",{style:c},g.createElement("form",{style:u,onSubmit:a},g.createElement("div",{style:{fontSize:16,fontWeight:800,marginBottom:8}},"Enter password"),g.createElement("input",{"aria-label":"Password",type:"password",value:n,onChange:p=>{s(p.target.value),i(null)},style:l,autoFocus:!0}),o&&g.createElement("div",{style:{color:"#f87171",fontSize:12,marginTop:6}},o),g.createElement("button",{type:"submit",style:f},"Unlock"),g.createElement("div",{style:{fontSize:11,color:"#94a3b8",marginTop:8}},"Demo-only gate. For real protection use host-level Basic Auth."))),g.createElement(e,null))};let Rr=!1;function Yu(){if(typeof document>"u"||Rr)return;const e=document.createElement("style");e.innerHTML=`
    :root[data-theme='light'] body { background-color: #ffffff; color: #0b1020; }
    :root[data-theme='dark'] body { background-color: #0b1020; color: #d7e0ff; }
    :root[data-platform='ios'] { --platform-font: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Arial, sans-serif; --platform-radius: 12px; }
    :root[data-platform='android'] { --platform-font: Roboto, 'Noto Sans', Arial, sans-serif; --platform-radius: 8px; }
    :root[data-platform='web'] { --platform-font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; --platform-radius: 6px; }
    .storybook-theme-surface { font-family: var(--platform-font, system-ui); }
  `,document.head.appendChild(e),Rr=!0}const vl={wsScenario:{name:"WS Scenario",description:"Mock WebSocket scenario for stories",defaultValue:"lobbyBasic",toolbar:{icon:"globe",items:[{value:"lobbyBasic",title:"Lobby: Basic"},{value:"matchHappyPath",title:"Match: Happy Path"},{value:"disconnectRecovery",title:"Disconnect: Recovery"},{value:"taskBoardLive",title:"Task Board: Live"}],showName:!0}},theme:{name:"Theme",description:"Light/Dark theme preview",defaultValue:"light",toolbar:{icon:"paintbrush",items:[{value:"light",title:"Light"},{value:"dark",title:"Dark"}],showName:!0}},platform:{name:"Platform",description:"Cosmetic platform tokens (web demo)",defaultValue:"web",toolbar:{icon:"mobile",items:[{value:"web",title:"Web"},{value:"ios",title:"iOS"},{value:"android",title:"Android"}],showName:!0}},presenterGuide:{name:"Presenter",description:"Presenter Guide and quick navigation",defaultValue:"off",toolbar:{icon:"book",items:[{value:"off",title:"Presenter: Off"},{value:"labs",title:"Open Labs Index"},{value:"walkthrough",title:"Open Presentation"}],showName:!0}},presenterStep:{name:"Presenter Step",description:"Current step in the Presenter Guide flow",defaultValue:0},mswProfile:{name:"MSW Profile",description:"Global latency/error profiles for MSW handlers",defaultValue:"default",toolbar:{icon:"plug",items:[{value:"default",title:"Default (0ms, 0%)"},{value:"slower",title:"Slower (300ms, 0%)"},{value:"flaky",title:"Flaky (100ms, 20%)"},{value:"chaos",title:"Chaos (500ms, 50%)"},{value:"reset",title:"Reset Defaults"}],showName:!0}},devTools:{name:"Dev Tools",description:"Enable dev-only panels and dashboards",defaultValue:"on",toolbar:{icon:"gear",items:[{value:"on",title:"Dev Tools: On"},{value:"off",title:"Dev Tools: Off"}],showName:!0}},mswInfo:{name:"MSW Info",description:"Show MSW handler info overlay",defaultValue:"closed",toolbar:{icon:"info",items:[{value:"closed",title:"MSW Info: Closed"},{value:"open",title:"MSW Info: Open"}],showName:!0}},mswNoDefaults:{name:"MSW No Defaults",description:"When true, disable global MSW defaults for the current story",defaultValue:!1}},Tr={},Qu=(e,t)=>{var r,n;if(typeof window<"u"){Ju();const s=!!((r=t.parameters)!=null&&r.mswNoDefaults),o=!!((n=t.globals)!=null&&n.mswNoDefaults);window.__MSW_NO_DEFAULTS__=s||o}return e()},el=(e,t)=>(typeof window<"u"&&(window.__WS_MOCK_SCENARIO__=t.globals.wsScenario),e()),tl=async e=>{if(typeof window>"u")return;const t=e==="slower"?{latencyMs:300,errorRate:0}:e==="flaky"?{latencyMs:100,errorRate:.2}:e==="chaos"?{latencyMs:500,errorRate:.5}:{latencyMs:0,errorRate:0};try{await fetch("/__msw__/defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch{}try{localStorage.setItem("__mswDefaults__",JSON.stringify(t))}catch{}},rl=(e,t)=>{if(typeof document<"u"){Yu();const{theme:r,platform:n}=t.globals;document.documentElement.setAttribute("data-theme",r||"light"),document.documentElement.setAttribute("data-platform",n||"web")}return g.createElement("div",{className:"storybook-theme-surface"},g.createElement(e,null))},nl=(e,t)=>{const r=t.globals.mswProfile;return typeof window<"u"&&Tr.value!==r&&(Tr.value=r,tl(r)),e()},sl=(e,t)=>{var r;if(typeof window<"u"){const n=(r=t.globals)==null?void 0:r.presenterGuide;try{const s=window.location.href;n==="labs"&&!s.includes("/story/labs-index--page")&&(window.location.href="?path=/story/labs-index--page"),n==="walkthrough"&&!s.includes("/story/docs-presentation-narrated-walkthrough--page")&&(window.location.href="?path=/story/docs-presentation-narrated-walkthrough--page")}catch{}if(n!=="off")return g.createElement(g.Fragment,null,g.createElement(qu,null),g.createElement(e,null))}return e()},ol=(e,t)=>{const[{presenterGuide:r},n]=Vu(),s=g.useRef(0);return g.useEffect(()=>{const o=i=>{if(i.key==="Escape"){i.preventDefault(),i.stopPropagation(),n({presenterGuide:"off"});return}const a=i.target,c=((a==null?void 0:a.tagName)||"").toLowerCase();if(c==="input"||c==="textarea"||a&&a.isContentEditable)return;if(i.key.toLowerCase()!=="g"){s.current=0;return}const l=Date.now();s.current&&l-s.current<450?(i.preventDefault(),i.stopPropagation(),n({presenterGuide:r==="off"?"labs":"off"}),s.current=0):s.current=l};return window.addEventListener("keydown",o,{capture:!0}),()=>window.removeEventListener("keydown",o,{capture:!0})},[r,n]),e()},il="quizmentor/msw-status",al=(e,t)=>{var r,n,s;return g.useEffect(()=>{var o,i,a;try{const c=Xu.getChannel(),u={active:!0,profile:((o=t.globals)==null?void 0:o.mswProfile)||"default",noDefaults:!!((i=t.parameters)!=null&&i.mswNoDefaults)||!!((a=t.globals)!=null&&a.mswNoDefaults)};c.emit(il,u)}catch{}},[(r=t.globals)==null?void 0:r.mswProfile,(n=t.parameters)==null?void 0:n.mswNoDefaults,(s=t.globals)==null?void 0:s.mswNoDefaults]),e()},cl=(e,t)=>{var f;if(((f=t.globals)==null?void 0:f.mswInfo)!=="open")return e();const n=[];try{const p=[...Sn,...It];for(const m of p){const b=(m==null?void 0:m.info)||{},P=String((b==null?void 0:b.method)||(b==null?void 0:b.type)||"GET").toUpperCase(),J=(b==null?void 0:b.path)??(b==null?void 0:b.mask)??(b==null?void 0:b.pathName),it=typeof J=="string"?J:J?String(J):"(unknown)",at=It.includes(m)?"storybook":"base";n.push({method:P,path:it,source:at})}}catch{}const s={position:"fixed",top:60,right:12,zIndex:1e4,width:460,maxHeight:"70vh",overflow:"auto",background:"rgba(2,6,23,0.95)",border:"1px solid rgba(148,163,184,0.25)",borderRadius:10,color:"#e5e7eb",boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},o={padding:"10px 12px",borderBottom:"1px solid rgba(148,163,184,0.25)",display:"flex",alignItems:"center",gap:8},i={padding:12,display:"grid",gridTemplateColumns:"1fr",gap:6},a={display:"flex",alignItems:"center",gap:8,fontSize:12,border:"1px solid rgba(59,130,246,0.15)",borderRadius:6,padding:"6px 8px",background:"rgba(30,41,59,0.65)"},c={fontSize:10,padding:"2px 6px",borderRadius:999,background:"#334155",color:"#e5e7eb"},u=p=>{const m=p==="GET"?"#16a34a":p==="POST"?"#3b82f6":p==="PUT"?"#f59e0b":p==="DELETE"?"#ef4444":"#64748b";return g.createElement("span",{style:{...c,background:m}},p)},l={color:"#93c5fd",textDecoration:"none",fontWeight:600};return g.createElement(g.Fragment,null,g.createElement("div",{style:s},g.createElement("div",{style:o},g.createElement("strong",null,"MSW Info"),g.createElement("a",{href:"?path=/story/docs-mocking-scenarios--page",style:{marginLeft:"auto",...l}},"Docs: Mocking & Scenarios")),g.createElement("div",{style:i},n.length===0&&g.createElement("div",{style:{fontSize:12,color:"#94a3b8"}},"No handlers introspected."),n.map((p,m)=>g.createElement("div",{key:m,style:a},u(p.method),g.createElement("code",{style:{fontSize:12}},p.path),g.createElement("span",{style:c},p.source))))),g.createElement(e,null))},ul=(e,t)=>{var s,o;const r=!!((s=t.parameters)!=null&&s.devOnly),n=(((o=t.globals)==null?void 0:o.devTools)||"on")!=="off";if(r&&!n){const i={padding:16,border:"1px dashed rgba(148,163,184,0.4)",color:"#94a3b8",background:"rgba(2,6,23,0.5)"};return g.createElement("div",{style:i},'This panel is hidden (Dev Tools: Off). Use the toolbar toggle "Dev Tools" to view.')}return e()},ll=(e,t)=>{var u,l,f;const r=(u=t.parameters)==null?void 0:u.helpDoc,n=(l=t.parameters)==null?void 0:l.helpTitle,s=(f=t.parameters)==null?void 0:f.helpDocs,o=[];if(r&&o.push({href:r,title:n||"Open related docs"}),Array.isArray(s))for(const p of s)p!=null&&p.href&&o.push({href:p.href,title:p.title||"Open related docs"});if(o.length===0)return e();const i={position:"fixed",top:8,right:8,zIndex:9999,display:"flex",flexDirection:"column",gap:6,alignItems:"flex-end"},a={padding:"6px 10px",borderRadius:999,fontSize:12,background:"rgba(0,0,0,0.6)",color:"white",backdropFilter:"saturate(180%) blur(6px)"},c={color:"white",textDecoration:"none",fontWeight:600};return g.createElement(g.Fragment,null,g.createElement("div",{style:i},o.map((p,m)=>g.createElement("a",{key:m,href:p.href,target:"_blank",rel:"noreferrer",style:{...a,...c}},p.title))),g.createElement(e,null))},dl=e=>{const[t,r]=g.useState(null);g.useEffect(()=>{let i=!0;return(async()=>{try{const a=await fetch("/docs/status/SYSTEM_STATUS_STATE.json",{cache:"no-store"});if(a.ok){const c=await a.json();i&&r(c)}}catch{}})(),()=>{i=!1}},[]);const s={position:"fixed",top:8,left:8,zIndex:9999,padding:"6px 10px",borderRadius:999,fontSize:12,background:(t==null?void 0:t.status)==="green"?"#16a34a":(t==null?void 0:t.status)==="degraded"?"#f59e0b":"#ef4444",color:"white"},o={color:"white",textDecoration:"none",fontWeight:600};return g.createElement(g.Fragment,null,t&&g.createElement("div",{style:s,title:t.lastValidated?`Last validated: ${new Date(t.lastValidated).toLocaleString()}`:void 0},g.createElement("a",{href:"/docs/status/SYSTEM_STATUS_CURRENT.md",target:"_blank",rel:"noreferrer",style:o},t.status.toUpperCase())),g.createElement(e,null))},hl=e=>{const t={position:"fixed",bottom:8,left:8,zIndex:9999},r={padding:"6px 10px",borderRadius:999,fontSize:12,background:"#2563eb",color:"white",textDecoration:"none",fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.2)"};return g.createElement(g.Fragment,null,g.createElement("div",{style:t},g.createElement("a",{href:"?path=/story/labs-technology-overview-lab--page",style:r},"Open Quickstart")),g.createElement(e,null))},bl={decorators:[Ku,Co,Qu,el,rl,nl,al,ol,sl,cl,ul,ll,dl,hl],parameters:{msw:{handlers:[...Sn,...It]},controls:{expanded:!0},options:{storySort:(e,t)=>{const r=(Array.isArray(e)?e[1]&&e[1].title:e&&e.title)||"",n=(Array.isArray(t)?t[1]&&t[1].title:t&&t.title)||"",s=r.split("/")[0],o=n.split("/")[0],i=["Docs","Labs","API","Dev","Live","Design","Specs","Overview","Observability","Infrastructure","Security","Performance","Project"],a=u=>{const l=i.indexOf(u);return l===-1?999:l},c=a(s)-a(o);if(c!==0)return c;if(s==="Docs"&&o==="Docs"){const u=["Docs/00 Start Here","Docs/Quick Index","Docs/Presentation — Narrated Walkthrough","Docs/Agent Boot","Docs/Dev Log","Docs/Epics","Docs/System Status"],l=u.indexOf(r),f=u.indexOf(n);if(l!==-1||f!==-1)return(l===-1?999:l)-(f===-1?999:f)}if(s==="Labs"&&o==="Labs"){const u=["Labs/Index","Labs/Mobile Mock Beta","Labs/Device Matrix","Labs/User Journeys","Labs/Journey‑Driven TDD","Labs/Auth & Session","Labs/Quiz & Content","Labs/Gamification & Achievements","Labs/Leaderboard & Social","Labs/Onboarding & Profile","Labs/S2S Orchestration","Labs/Error & Offline","Labs/Performance & Device Metrics","Labs/Security & Privacy","Labs/Accessibility","Labs/Sentry — Crash & Release Health"],l=u.indexOf(r),f=u.indexOf(n);if(l!==-1||f!==-1)return(l===-1?999:l)-(f===-1?999:f)}return r.localeCompare(n)}}}};export{bl as default,vl as globalTypes};
