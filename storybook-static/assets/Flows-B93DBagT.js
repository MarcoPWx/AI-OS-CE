var Un=Object.defineProperty;var Bn=(i,e,t)=>e in i?Un(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ve=(i,e,t)=>Bn(i,typeof e!="symbol"?e+"":e,t);import{j as P}from"./jsx-runtime-BjG_zV1W.js";import{useMDXComponents as Vs}from"./index-Di0Mt_3y.js";import{M as zn,C as Gt,S as Jt}from"./index-Bpi5BZRR.js";import{g as Er,R as f,r as g,b as qn,c as pe}from"./index-R2V08a_e.js";import{U as si,V as R,c as wt,s as G,u as Hn,m as Wn,_ as T,n as js,a as Ui,b as Kn,d as Gn,e as Jn,T as O,M as le}from"./index-C78dfCW2.js";import{a as Pe,b as te}from"./extends-ClFxuap2.js";import{_ as Yn}from"./unsupportedIterableToArray-Ba7u8soi.js";import{_ as zt}from"./iframe-D0C5GYr5.js";import"./index-B25VQ0Mk.js";import"./index-BMU9HDYU.js";import"./index-DrFu-skq.js";var he={OS:"web",select:i=>"web"in i?i.web:i.default,get isTesting(){return!1}},Qn=function i(e,t,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===t||typeof e=="function"&&typeof t=="function")return!1;if(typeof e!="object"||e===null)return e!==t;if(typeof t!="object"||t===null||e.constructor!==t.constructor)return!0;if(Array.isArray(e)){var s=e.length;if(t.length!==s)return!0;for(var n=0;n<s;n++)if(i(e[n],t[n],r-1))return!0}else{for(var a in e)if(i(e[a],t[a],r-1))return!0;for(var o in t)if(e[o]===void 0&&t[o]!==void 0)return!0}return!1};function Xn(i,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];if(!i){var n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;n=new Error(e.replace(/%s/g,function(){return String(r[a++])})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}var Zn=Xn;const C=Er(Zn);function ke(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=Yn(i))||e){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ea=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function ta(i){i.colors,i.enabled,i.onRefresh,i.progressBackgroundColor,i.progressViewOffset,i.refreshing,i.size,i.tintColor,i.title,i.titleColor;var e=Pe(i,ea);return f.createElement(R,e)}var et={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},$e={},Bi=wt;function Ms(){if(wt){var i=window,e,t;if(i.visualViewport){var r=i.visualViewport;e=Math.round(r.height*r.scale),t=Math.round(r.width*r.scale)}else{var s=i.document.documentElement;e=s.clientHeight,t=s.clientWidth}et.window={fontScale:1,height:e,scale:i.devicePixelRatio||1,width:t},et.screen={fontScale:1,height:i.screen.height,scale:i.devicePixelRatio||1,width:i.screen.width}}}function zi(){Ms(),Array.isArray($e.change)&&$e.change.forEach(i=>i(et))}class ze{static get(e){return Bi&&(Bi=!1,Ms()),C(et[e],"No dimension set for key "+e),et[e]}static set(e){e&&(wt?C(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(et.screen=e.screen),e.window!=null&&(et.window=e.window)))}static addEventListener(e,t){return $e[e]=$e[e]||[],$e[e].push(t),{remove:()=>{this.removeEventListener(e,t)}}}static removeEventListener(e,t){Array.isArray($e[e])&&($e[e]=$e[e].filter(r=>r!==t))}}wt&&(window.visualViewport?window.visualViewport.addEventListener("resize",zi,!1):window.addEventListener("resize",zi,!1));var ur={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(i){i!==null&&(this._currentlyFocusedNode=i,document.activeElement!==i&&si.focus(i))},blurTextInput(i){i!==null&&(this._currentlyFocusedNode=null,document.activeElement===i&&si.blur(i))}},ra=()=>{ur.blurTextInput(ur.currentlyFocusedField())},ia=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function qi(i){return{nativeEvent:{contentOffset:{get x(){return i.target.scrollLeft},get y(){return i.target.scrollTop}},contentSize:{get height(){return i.target.scrollHeight},get width(){return i.target.scrollWidth}},layoutMeasurement:{get height(){return i.target.offsetHeight},get width(){return i.target.offsetWidth}}},timeStamp:Date.now()}}function sa(i,e){var t=Date.now()-i;return e>0&&t>=e}var na=g.forwardRef((i,e)=>{var t=i.onScroll,r=i.onTouchMove,s=i.onWheel,n=i.scrollEnabled,a=n===void 0?!0:n,o=i.scrollEventThrottle,l=o===void 0?0:o,c=i.showsHorizontalScrollIndicator,u=i.showsVerticalScrollIndicator,h=i.style,d=Pe(i,ia),m=g.useRef({isScrolling:!1,scrollLastTick:0}),p=g.useRef(null),y=g.useRef(null);function v(S){return x=>{a&&S&&S(x)}}function b(S){S.stopPropagation(),S.target===y.current&&(S.persist(),p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{k(S)},100),m.current.isScrolling?sa(m.current.scrollLastTick,l)&&w(S):E(S))}function E(S){m.current.isScrolling=!0,w(S)}function w(S){m.current.scrollLastTick=Date.now(),t&&t(qi(S))}function k(S){m.current.isScrolling=!1,t&&t(qi(S))}var A=c===!1||u===!1;return g.createElement(R,te({},d,{onScroll:b,onTouchMove:v(r),onWheel:v(s),ref:Hn(y,e),style:[h,!a&&Hi.scrollDisabled,A&&Hi.hideScrollbar]}))}),Hi=G.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function Cr(i){return function(){return i}}var rt=function(){};rt.thatReturns=Cr;rt.thatReturnsFalse=Cr(!1);rt.thatReturnsTrue=Cr(!0);rt.thatReturnsNull=Cr(null);rt.thatReturnsThis=function(){return this};rt.thatReturnsArgument=function(i){return i};var aa=rt,oa=aa,la=oa,ca=la;const ua=Er(ca);var ha=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],Wi={},da=16;let fa=class extends f.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var t=e.nativeEvent;this.isTouching=t.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var t=ur.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&t!=null&&e.target!==t&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),ur.blurTextInput(t))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),t=e-this.lastMomentumScrollEndTime,r=t<da||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,t,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var s=e||Wi;e=s.x,t=s.y,r=s.animated}var n=this.getScrollableNode(),a=e||0,o=t||0;n!=null&&(typeof n.scroll=="function"?n.scroll({top:o,left:a,behavior:r?"smooth":"auto"}):(n.scrollLeft=a,n.scrollTop=o))},this.scrollResponderZoomTo=(e,t)=>{C("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,t,r)=>{this.additionalScrollOffset=t||0,this.preventNegativeScrollOffset=!!r,si.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,t,r,s)=>{var n=ze.get("window").height;this.keyboardWillOpenTo&&(n=this.keyboardWillOpenTo.endCoordinates.screenY);var a=t-n+s+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(a=Math.max(0,a)),this.scrollResponderScrollTo({x:0,y:a,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,t,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var s=e||Wi;t=s.x,e=s.y,r=s.animated}this.scrollResponderScrollTo({x:t||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var t=(e&&e.animated)!==!1,r=this.props.horizontal,s=this.getScrollableNode(),n=r?s.scrollWidth:0,a=r?0:s.scrollHeight;this.scrollResponderScrollTo({x:n,y:a,animated:t})},this._handleContentOnLayout=e=>{var t=e.nativeEvent.layout,r=t.width,s=t.height;this.props.onContentSizeChange(r,s)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&ra(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var t=Wn(this.props.forwardedRef);t(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){ua(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,t=e.contentContainerStyle,r=e.horizontal,s=e.onContentSizeChange,n=e.refreshControl,a=e.stickyHeaderIndices,o=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,c=Pe(e,ha),u={};s&&(u={onLayout:this._handleContentOnLayout});var h=!r&&Array.isArray(a),d=h||o?f.Children.map(this.props.children,(w,k)=>{var A=h&&a.indexOf(k)>-1;return w!=null&&(A||o)?f.createElement(R,{style:[A&&je.stickyHeader,o&&je.pagingEnabledChild]},w):w}):this.props.children,m=f.createElement(R,te({},u,{children:d,collapsable:!1,ref:this._setInnerViewRef,style:[r&&je.contentContainerHorizontal,l&&je.contentContainerCenterContent,t]})),p=r?je.baseHorizontal:je.baseVertical,y=r?je.pagingEnabledHorizontal:je.pagingEnabledVertical,v=T(T({},c),{},{style:[p,o&&y,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),b=na;C(b!==void 0,"ScrollViewClass must not be undefined");var E=f.createElement(b,te({},v,{ref:this._setScrollNodeRef}),m);return n?f.cloneElement(n,{style:v.style},E):E}};var Ki={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},je=G.create({baseVertical:T(T({},Ki),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:T(T({},Ki),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),tt=f.forwardRef((i,e)=>f.createElement(fa,te({},i,{forwardedRef:e})));tt.displayName="ScrollView";class pa{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(t=>this.enqueue(t))}cancelTasks(e){this._queueStack=this._queueStack.map(t=>T(T({},t),{},{tasks:t.tasks.filter(r=>e.indexOf(r)===-1)})).filter((t,r)=>t.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{typeof t=="object"&&t.gen?this._genPromise(t):typeof t=="object"&&t.run?t.run():(C(typeof t=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(t,null,2)),t())}catch(r){throw r.message="TaskQueue: Error with task "+(t.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&t.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1}),r=t-1,s=this._queueStack[r];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(n=>{setTimeout(()=>{throw n.message="TaskQueue: Error resolving Promise in task "+e.name+": "+n.message,n},0)})}}class Ds{constructor(){this._registry={}}addListener(e,t,r){var s=ma(this._registry,e),n={context:r,listener:t,remove(){s.delete(n)}};return s.add(n),n}emit(e){var t=this._registry[e];if(t!=null){for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];for(var a=0,o=[...t];a<o.length;a++){var l=o[a];l.listener.apply(l.context,s)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var t=this._registry[e];return t==null?0:t.size}}function ma(i,e){var t=i[e];return t==null&&(t=new Set,i[e]=t),t}var ga=function(e,t){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},_a=wt&&typeof window.requestIdleCallback<"u",va=_a?window.requestIdleCallback:ga,hr=new Ds,$t={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(i){var e=[],t=new Promise(r=>{Pt(),i&&e.push(i),e.push({run:r,name:"resolve "+(i&&i.name||"?")}),fr.enqueueTasks(e)});return{then:t.then.bind(t),done:t.then.bind(t),cancel:()=>{fr.cancelTasks(e)}}},createInteractionHandle(){Pt();var i=++ya;return dr.add(i),i},clearInteractionHandle(i){C(!!i,"Must provide a handle to clear."),Pt(),dr.delete(i),ni.add(i)},addListener:hr.addListener.bind(hr),setDeadline(i){pr=i}},Yt=new Set,dr=new Set,ni=new Set,fr=new pa({onMoreTasks:Pt}),or=0,ya=0,pr=-1;function Pt(){or||(pr>0?or=setTimeout(Gi):or=va(Gi))}function Gi(){or=0;var i=Yt.size;dr.forEach(r=>Yt.add(r)),ni.forEach(r=>Yt.delete(r));var e=Yt.size;if(i!==0&&e===0?hr.emit($t.Events.interactionComplete):i===0&&e!==0&&hr.emit($t.Events.interactionStart),e===0){for(var t=Date.now();fr.hasTasksToProcess();)if(fr.processNext(),pr>0&&Date.now()-t>=pr){Pt();break}}dr.clear(),ni.clear()}class wa{constructor(e,t){this._delay=t,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=$t.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function Ji(i,e,t){return e<i?i:e>t?t:e}function ba(){return console.log(...arguments)}class Sa{constructor(e){C(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(C(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var t=this._findRegion(e.first),r=t[0],s=t[1],n=this._findRegion(e.last),a=n[0],o=n[1];if(!(s===o&&!r.isSpacer)){var l=[],c=[],u=T(T({},e),{},{isSpacer:!1});r.first<u.first&&(r.isSpacer?l.push({first:r.first,last:u.first-1,isSpacer:!0}):u.first=r.first),a.last>u.last&&(a.isSpacer?c.push({first:u.last+1,last:a.last,isSpacer:!0}):u.last=a.last);var h=[...l,u,...c],d=o-s+1;this._regions.splice(s,d,...h)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((t,r)=>t.first===e._regions[r].first&&t.last===e._regions[r].last&&t.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var t=0,r=this._regions.length-1;t<=r;){var s=Math.floor((t+r)/2),n=this._regions[s];if(e>=n.first&&e<=n.last)return[n,s];e<n.first?r=s-1:e>n.last&&(t=s+1)}C(!1,"A region was not found containing cellIdx "+e)}}class Ea{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,t){var r;C(!this._childrenToCellKey.has(e),"Trying to add already present child list");var s=(r=this._cellKeyToChildren.get(t))!==null&&r!==void 0?r:new Set;s.add(e),this._cellKeyToChildren.set(t,s),this._childrenToCellKey.set(e,t)}remove(e){var t=this._childrenToCellKey.get(e);C(t!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(t);C(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(t)}forEach(e){for(var t=ke(this._cellKeyToChildren.values()),r;!(r=t()).done;)for(var s=r.value,n=ke(s),a;!(a=n()).done;){var o=a.value;e(o)}}forEachInCell(e,t){for(var r,s=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],n=ke(s),a;!(a=n()).done;){var o=a.value;t(o)}}anyInCell(e,t){for(var r,s=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],n=ke(s),a;!(a=n()).done;){var o=a.value;if(t(o))return!0}return!1}size(){return this._childrenToCellKey.size}}class Yi{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var Qt=[],Qi=10,Pr=null;class Ca{static addListener(e){return Pr===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),Qt.push(e),{remove:()=>{Qt=Qt.filter(t=>e!==t)}}}static setSampleRate(e){Pr=e}static setMinSampleCount(e){Qi=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new Yi,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(Pr||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<Qi){this._resetData();return}var t=global.performance.now()-e,r=T(T({},this._info),{},{total_time_spent:t});Qt.forEach(s=>s(r)),this._resetData()}}}computeBlankness(e,t,r){if(!this._enabled||e.getItemCount(e.data)===0||t.last<t.first||this._samplesStartTime==null)return 0;var s=r.dOffset,n=r.offset,a=r.velocity,o=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(o),this._info.pixels_scrolled+=Math.round(Math.abs(s));var l=Math.round(Math.abs(a)*1e3),c=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var u=0,h=t.first,d=this._getFrameMetrics(h,e);h<=t.last&&(!d||!d.inLayout);)d=this._getFrameMetrics(h,e),h++;d&&h>0&&(u=Math.min(o,Math.max(0,d.offset-n)));for(var m=0,p=t.last,y=this._getFrameMetrics(p,e);p>=t.first&&(!y||!y.inLayout);)y=this._getFrameMetrics(p,e),p--;if(y&&p<e.getItemCount(e.data)-1){var v=y.offset+y.length;m=Math.min(o,Math.max(0,n+o-v))}var b=Math.round(u+m),E=b/o;return E>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=b,E>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(l<.01||Math.abs(s)<1)&&this.deactivateAndFlush(),E}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new Yi,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class Ta extends g.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,t){typeof e=="function"?super.setState((r,s)=>{this._inAsyncStateUpdate=!0;var n;try{n=e(r,s)}catch(a){throw a}finally{this._inAsyncStateUpdate=!1}return n},t):super.setState(e,t)}_installSetStateHooks(){var e=this,t=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return C(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),t},set(s){t=s}}),Object.defineProperty(this,"state",{get(){return C(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(s){r=s}})}}class Xi{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,r,s,n){var a=e.getItemCount(e.data),o=this._config,l=o.itemVisiblePercentThreshold,c=o.viewAreaCoveragePercentThreshold,u=c!=null,h=u?c:l;C(h!=null&&l!=null!=(c!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var d=[];if(a===0)return d;var m=-1,p=n||{first:0,last:a-1},y=p.first,v=p.last;if(v>=a)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:n,itemCount:a})),[];for(var b=y;b<=v;b++){var E=s(b,e);if(E){var w=E.offset-t,k=w+E.length;if(w<r&&k>0)m=b,ka(u,h,w,k,r,E.length)&&d.push(b);else if(m>=0)break}}return d}onUpdate(e,t,r,s,n,a,o){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!s(0,e))){var c=[];if(l&&(c=this.computeViewableItems(e,t,r,s,o)),!(this._viewableIndices.length===c.length&&this._viewableIndices.every((h,d)=>h===c[d])))if(this._viewableIndices=c,this._config.minimumViewTime){var u=setTimeout(()=>{this._timers.delete(u),this._onUpdateSync(e,c,a,n)},this._config.minimumViewTime);this._timers.add(u)}else this._onUpdateSync(e,c,a,n)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,t,r,s){t=t.filter(E=>this._viewableIndices.includes(E));for(var n=this._viewableItems,a=new Map(t.map(E=>{var w=s(E,!0,e);return[w.key,w]})),o=[],l=ke(a),c;!(c=l()).done;){var u=c.value,h=u[0],d=u[1];n.has(h)||o.push(d)}for(var m=ke(n),p;!(p=m()).done;){var y=p.value,v=y[0],b=y[1];a.has(v)||o.push(T(T({},b),{},{isViewable:!1}))}o.length>0&&(this._viewableItems=a,r({viewableItems:Array.from(a.values()),changed:o,viewabilityConfig:this._config}))}}function ka(i,e,t,r,s,n){if(Ra(t,r,s))return!0;var a=Aa(t,r,s),o=100*(i?a/s:a/n);return o>=e}function Aa(i,e,t){var r=Math.min(e,t)-Math.max(i,0);return Math.max(0,r)}function Ra(i,e,t){return i>=0&&e<=t&&e>i}var mr=g.createContext(null);function Ia(i){var e=i.children,t=i.value,r=g.useMemo(()=>({cellKey:null,getScrollMetrics:t.getScrollMetrics,horizontal:t.horizontal,getOutermostParentListRef:t.getOutermostParentListRef,registerAsNestedChild:t.registerAsNestedChild,unregisterAsNestedChild:t.unregisterAsNestedChild}),[t.getScrollMetrics,t.horizontal,t.getOutermostParentListRef,t.registerAsNestedChild,t.unregisterAsNestedChild]);return g.createElement(mr.Provider,{value:r},e)}function lr(i){var e=i.cellKey,t=i.children,r=g.useContext(mr),s=g.useMemo(()=>r==null?null:T(T({},r),{},{cellKey:e}),[r,e]);return g.createElement(mr.Provider,{value:s},t)}class xa extends g.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,t=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([t,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,t=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([t,r],{highlighted:!1})},updateProps:(e,t)=>{var r=this.props,s=r.cellKey,n=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?n:s],t)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,t){return{separatorProps:T(T({},t.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(t=>({separatorProps:T(T({},t.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,t,r,s){if(e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t)return g.createElement(t,{item:r,index:s,separators:this._separators});if(e)return e({item:r,index:s,separators:this._separators});C(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,t=e.CellRendererComponent,r=e.ItemSeparatorComponent,s=e.ListItemComponent,n=e.cellKey,a=e.horizontal,o=e.item,l=e.index,c=e.inversionStyle,u=e.onCellFocusCapture,h=e.onCellLayout,d=e.renderItem,m=this._renderElement(d,s,o,l),p=g.isValidElement(r)?r:r&&g.createElement(r,this.state.separatorProps),y=c?a?[Fr.rowReverse,c]:[Fr.columnReverse,c]:a?[Fr.row,c]:c,v=t?g.createElement(t,te({cellKey:n,index:l,item:o,style:y,onFocusCapture:u},h&&{onLayout:this._onLayout}),m,p):g.createElement(R,te({style:y,onFocusCapture:u},h&&{onLayout:this._onLayout}),m,p);return g.createElement(lr,{cellKey:this.props.cellKey},v)}}var Fr=G.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function Oa(i,e,t,r){r===void 0&&(r=1);for(var s=e.getItemCount(e.data),n=[],a=0;a<i.length;a++)for(var o=i[a],l=0,c=s-1;l<=c;){var u=l+(c-l>>>1),h=t(u,e),d=h.offset*r,m=(h.offset+h.length)*r;if(u===0&&o<d||u!==0&&o<=d)c=u-1;else if(o>m)l=u+1;else{n[a]=u;break}}return n}function La(i,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,i.last)-Math.max(e.first,i.first))}function Na(i,e,t,r,s,n){var a=i.getItemCount(i.data);if(a===0)return{first:0,last:-1};var o=n.offset,l=n.velocity,c=n.visibleLength,u=n.zoomScale,h=u===void 0?1:u,d=Math.max(0,o),m=d+c,p=(t-1)*c,y=.5,v=l>1?"after":l<-1?"before":"none",b=Math.max(0,d-(1-y)*p),E=Math.max(0,m+y*p),w=s(a-1,i).offset*h;if(w<b)return{first:Math.max(0,a-1-e),last:a-1};var k=Oa([b,d,m,E],i,s,h),A=k[0],S=k[1],x=k[2],F=k[3];A=A??0,S=S??Math.max(0,A),F=F??a-1,x=x??Math.min(F,S+e-1);for(var Y={first:S,last:x},K=La(r,Y);!(S<=A&&x>=F);){var z=K>=e,J=S<=r.first||S>r.last,re=S>A&&(!z||!J),U=x>=r.last||x<r.first,ie=x<F&&(!z||!U);if(z&&!re&&!ie)break;re&&!(v==="after"&&ie&&U)&&(J&&K++,S--),ie&&!(v==="before"&&re&&J)&&(U&&K++,x++)}if(!(x>=S&&S>=0&&x<a&&S>=A&&x<=F&&S<=Y.first&&x>=Y.last))throw new Error("Bad window calculation "+JSON.stringify({first:S,last:x,itemCount:a,overscanFirst:A,overscanLast:F,visible:Y}));return{first:S,last:x}}function Ut(i,e){return typeof i=="object"&&(i==null?void 0:i.key)!=null?i.key:typeof i=="object"&&(i==null?void 0:i.id)!=null?i.id:String(e)}var Tr={exports:{}};function $s(i,e){if(i!=null)return i;var t=new Error(e!==void 0?e:"Got unexpected "+i);throw t.framesToPop=1,t}Tr.exports=$s;Tr.exports.default=$s;Object.defineProperty(Tr.exports,"__esModule",{value:!0});var Pa=Tr.exports;const Fa=Er(Pa);var Zi=.001,Vr=!1,jr="";function We(i){return i??!1}function Va(i){return i??10}function Mr(i){return i??10}function ja(i){return i??2}function es(i){return i??2}function ts(i,e){return i*e/2}function Ma(i){return i??50}function rs(i){return i??21}function Da(i,e){for(var t=i.length-1;t>=0;t--)if(e(i[t]))return i[t];return null}class de extends Ta{scrollToEnd(e){var t=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var s=this.__getFrameMetricsApprox(r,this.props),n=Math.max(0,s.offset+s.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(We(this.props.horizontal)?{x:n,animated:t}:{y:n,animated:t})}}}scrollToIndex(e){var t=this.props,r=t.data,s=t.horizontal,n=t.getItemCount,a=t.getItemLayout,o=t.onScrollToIndexFailed,l=e.animated,c=e.index,u=e.viewOffset,h=e.viewPosition;if(C(c>=0,"scrollToIndex out of range: requested index "+c+" but minimum is 0"),C(n(r)>=1,"scrollToIndex out of range: item length "+n(r)+" but minimum is 1"),C(c<n(r),"scrollToIndex out of range: requested index "+c+" is out of 0 to "+(n(r)-1)),!a&&c>this._highestMeasuredFrameIndex){C(!!o,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),o({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:c});return}var d=this.__getFrameMetricsApprox(Math.floor(c),this.props),m=Math.max(0,this._getOffsetApprox(c,this.props)-(h||0)*(this._scrollMetrics.visibleLength-d.length))-(u||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(s?{x:m,animated:l}:{y:m,animated:l})}}scrollToItem(e){for(var t=e.item,r=this.props,s=r.data,n=r.getItem,a=r.getItemCount,o=a(s),l=0;l<o;l++)if(n(s,l)===t){this.scrollToIndex(T(T({},e),{},{index:l}));break}}scrollToOffset(e){var t=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(We(this.props.horizontal)?{x:r,animated:t}:{y:r,animated:t})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var t;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=o=>{this._nestedChildLists.add(o.ref,o.cellKey),this._hasInteracted&&o.ref.recordInteraction()},this._unregisterAsNestedChild=o=>{this._nestedChildLists.remove(o.ref)},this._onUpdateSeparators=(o,l)=>{o.forEach(c=>{var u=c!=null&&this._cellRefs[c];u&&u.updateSeparatorProps(l)})},this._getSpacerKey=o=>o?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new Ea,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=o=>{this._scrollRef=o},this._defaultRenderScrollComponent=o=>{var l=o.onRefresh;if(this._isNestedWithSameOrientation())return g.createElement(R,o);if(l){var c;return C(typeof o.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((c=o.refreshing)!==null&&c!==void 0?c:"undefined")+"`"),g.createElement(tt,te({},o,{refreshControl:o.refreshControl==null?g.createElement(ta,{refreshing:o.refreshing,onRefresh:l,progressViewOffset:o.progressViewOffset}):o.refreshControl}))}else return g.createElement(tt,o)},this._onCellLayout=(o,l,c)=>{var u=o.nativeEvent.layout,h={offset:this._selectOffset(u),length:this._selectLength(u),index:c,inLayout:!0},d=this._frames[l];!d||h.offset!==d.offset||h.length!==d.length||c!==d.index?(this._totalCellLength+=h.length-(d?d.length:0),this._totalCellsMeasured+=d?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=h,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,c),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=o=>{delete this._cellRefs[o];var l=this._frames[o];l&&(this._frames[o]=T(T({},l),{},{inLayout:!1}))},this._onLayout=o=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(o.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(o),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=o=>{this.props.onLayout&&this.props.onLayout(o)},this._onLayoutFooter=o=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(o.nativeEvent.layout)},this._onLayoutHeader=o=>{this._headerLength=this._selectLength(o.nativeEvent.layout)},this._onContentSizeChange=(o,l)=>{o>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:Fa(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(o,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:o}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=o=>{var l=o.offset-this._offsetFromParentVirtualizedList,c=o.visibleLength,u=l-this._scrollMetrics.offset,h=this._scrollMetrics.contentLength;return{visibleLength:c,contentLength:h,offset:l,dOffset:u}},this._onScroll=o=>{this._nestedChildLists.forEach(b=>{b._onScroll(o)}),this.props.onScroll&&this.props.onScroll(o);var l=o.timeStamp,c=this._selectLength(o.nativeEvent.layoutMeasurement),u=this._selectLength(o.nativeEvent.contentSize),h=this._selectOffset(o.nativeEvent.contentOffset),d=h-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var m=this._convertParentScrollMetrics({visibleLength:c,offset:h});c=m.visibleLength,u=m.contentLength,h=m.offset,d=m.dOffset}var p=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,y=d/p;p>500&&this._scrollMetrics.dt>500&&u>5*c&&!this._hasWarned.perf&&(ba("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:p,prevDt:this._scrollMetrics.dt,contentLength:u}),this._hasWarned.perf=!0);var v=o.nativeEvent.zoomScale<0?1:o.nativeEvent.zoomScale;this._scrollMetrics={contentLength:u,dt:p,dOffset:d,offset:h,timestamp:l,velocity:y,visibleLength:c,zoomScale:v},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),y!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=o=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(o)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(o)},this._onScrollEndDrag=o=>{this._nestedChildLists.forEach(c=>{c._onScrollEndDrag(o)});var l=o.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(o)},this._onMomentumScrollBegin=o=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(o)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(o)},this._onMomentumScrollEnd=o=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(o)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(o)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((o,l)=>{var c=this._adjustCellsAroundViewport(l,o.cellsAroundViewport),u=de._createRenderMask(l,c,this._getNonViewportRenderRegions(l));return c.first===o.cellsAroundViewport.first&&c.last===o.cellsAroundViewport.last&&u.equals(o.renderMask)?null:{cellsAroundViewport:c,renderMask:u}})},this._createViewToken=(o,l,c)=>{var u=c.data,h=c.getItem,d=h(u,o);return{index:o,item:d,key:this._keyExtractor(d,o,c),isViewable:l}},this._getOffsetApprox=(o,l)=>{if(Number.isInteger(o))return this.__getFrameMetricsApprox(o,l).offset;var c=this.__getFrameMetricsApprox(Math.floor(o),l),u=o-Math.floor(o);return c.offset+u*c.length},this.__getFrameMetricsApprox=(o,l)=>{var c=this._getFrameMetrics(o,l);if(c&&c.index===o)return c;var u=l.data,h=l.getItemCount,d=l.getItemLayout;return C(o>=0&&o<h(u),"Tried to get frame for out of range index "+o),C(!d,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*o}},this._getFrameMetrics=(o,l)=>{var c=l.data,u=l.getItem,h=l.getItemCount,d=l.getItemLayout;C(o>=0&&o<h(c),"Tried to get frame for out of range index "+o);var m=u(c,o),p=this._frames[this._keyExtractor(m,o,l)];return(!p||p.index!==o)&&d?d(c,o):p},this._getNonViewportRenderRegions=o=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],c=l.props.index,u=o.getItemCount(o.data);if(c>=u||this._keyExtractor(o.getItem(o.data,c),c,o)!==this._lastFocusedCellKey)return[];for(var h=c,d=0,m=h-1;m>=0&&d<this._scrollMetrics.visibleLength;m--)h--,d+=this.__getFrameMetricsApprox(m,o).length;for(var p=c,y=0,v=p+1;v<u&&y<this._scrollMetrics.visibleLength;v++)p++,y+=this.__getFrameMetricsApprox(v,o).length;return[{first:h,last:p}]},this._checkProps(e),this._fillRateHelper=new Ca(this._getFrameMetrics),this._updateCellsToRenderBatcher=new wa(this._updateCellsToRender,(t=this.props.updateCellsBatchingPeriod)!==null&&t!==void 0?t:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(o=>({viewabilityHelper:new Xi(o.viewabilityConfig),onViewableItemsChanged:o.onViewableItemsChanged}));else{var r=this.props,s=r.onViewableItemsChanged,n=r.viewabilityConfig;s&&this._viewabilityTuples.push({viewabilityHelper:new Xi(n),onViewableItemsChanged:s})}var a=de._initialRenderRegion(e);this.state={cellsAroundViewport:a,renderMask:de._createRenderMask(e,a)},this.invertedWheelEventHandler=o=>{var l=this.props.horizontal?o.target.scrollLeft:o.target.scrollTop,c=this.props.horizontal?o.target.scrollWidth:o.target.scrollHeight,u=this.props.horizontal?o.target.clientWidth:o.target.clientHeight,h=c>u,d=this.props.horizontal?o.deltaX||o.wheelDeltaX:o.deltaY||o.wheelDeltaY,m=d;h&&(m=d<0?Math.min(d+l,0):Math.max(d-(c-u-l),0));var p=d-m;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var y=this._scrollRef.getScrollableNode();if(this.props.horizontal){o.target.scrollLeft+=p;var v=y.scrollLeft-m;y.scrollLeft=this.props.getItemLayout?v:Math.min(v,this._totalCellLength)}else{o.target.scrollTop+=p;var b=y.scrollTop-m;y.scrollTop=this.props.getItemLayout?b:Math.min(b,this._totalCellLength)}o.preventDefault()}}}_checkProps(e){var t=e.onScroll,r=e.windowSize,s=e.getItemCount,n=e.data,a=e.initialScrollIndex;C(!t||!t.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),C(rs(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),C(s,'VirtualizedList: The "getItemCount" prop must be provided');var o=s(n);a!=null&&!this._hasTriggeredInitialScrollToIndex&&(a<0||o>0&&a>=o)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+a+'" is not valid (list has '+o+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,t,r){var s=e.getItemCount(e.data);C(t.first>=0&&t.last>=t.first-1&&t.last<s,'Invalid cells around viewport "['+t.first+", "+t.last+']" was passed to VirtualizedList._createRenderMask');var n=new Sa(s);if(s>0){for(var a=[t,...r??[]],o=0,l=a;o<l.length;o++){var c=l[o];n.addCells(c)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var u=de._initialRenderRegion(e);n.addCells(u)}var h=new Set(e.stickyHeaderIndices);de._ensureClosestStickyHeader(e,h,n,t.first)}return n}static _initialRenderRegion(e){var t,r=e.getItemCount(e.data),s=Math.max(0,Math.min(r-1,Math.floor((t=e.initialScrollIndex)!==null&&t!==void 0?t:0))),n=Math.min(r,s+Va(e.initialNumToRender))-1;return{first:s,last:n}}static _ensureClosestStickyHeader(e,t,r,s){for(var n=e.ListHeaderComponent?1:0,a=s-1;a>=0;a--)if(t.has(a+n)){r.addCells({first:a,last:a});break}}_adjustCellsAroundViewport(e,t){var r=e.data,s=e.getItemCount,n=es(e.onEndReachedThreshold),a=this._scrollMetrics,o=a.contentLength,l=a.offset,c=a.visibleLength,u=o-c-l;if(c<=0||o<=0)return t.last>=s(r)?de._constrainToItemCount(t,e):t;var h;if(e.disableVirtualization){var d=u<n*c?Mr(e.maxToRenderPerBatch):0;h={first:0,last:Math.min(t.last+d,s(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(u)>=Number.EPSILON)return t.last>=s(r)?de._constrainToItemCount(t,e):t;h=Na(e,Mr(e.maxToRenderPerBatch),rs(e.windowSize),t,this.__getFrameMetricsApprox,this._scrollMetrics),C(h.last<s(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var m=this._findFirstChildWithMore(h.first,h.last);h.last=m??h.last}return h}_findFirstChildWithMore(e,t){for(var r=e;r<=t;r++){var s=this._indicesToKeys.get(r);if(s!=null&&this._nestedChildLists.anyInCell(s,n=>n.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,t){var r=e.getItemCount(e.data);if(r===t.renderMask.numCells())return t;var s=de._constrainToItemCount(t.cellsAroundViewport,e);return{cellsAroundViewport:s,renderMask:de._createRenderMask(e,s)}}_pushCells(e,t,r,s,n,a){var o=this,l=this.props,c=l.CellRendererComponent,u=l.ItemSeparatorComponent,h=l.ListHeaderComponent,d=l.ListItemComponent,m=l.data,p=l.debug,y=l.getItem,v=l.getItemCount,b=l.getItemLayout,E=l.horizontal,w=l.renderItem,k=h?1:0,A=v(m)-1,S;n=Math.min(A,n);for(var x=function(){var K=y(m,F),z=o._keyExtractor(K,F,o.props);o._indicesToKeys.set(F,z),r.has(F+k)&&t.push(e.length);var J=b==null||p||o._fillRateHelper.enabled();e.push(g.createElement(xa,te({CellRendererComponent:c,ItemSeparatorComponent:F<A?u:void 0,ListItemComponent:d,cellKey:z,horizontal:E,index:F,inversionStyle:a,item:K,key:z,prevCellKey:S,onUpdateSeparators:o._onUpdateSeparators,onCellFocusCapture:re=>o._onCellFocusCapture(z),onUnmount:o._onCellUnmount,ref:re=>{o._cellRefs[z]=re},renderItem:w},J&&{onCellLayout:o._onCellLayout}))),S=z},F=s;F<=n;F++)x()}static _constrainToItemCount(e,t){var r=t.getItemCount(t.data),s=Math.min(r-1,e.last),n=Mr(t.maxToRenderPerBatch);return{first:Ji(0,r-1-n,e.first),last:s}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===We(this.props.horizontal))}_keyExtractor(e,t,r){if(r.keyExtractor!=null)return r.keyExtractor(e,t);var s=Ut(e,t);return s===String(t)&&(Vr=!0,e.type&&e.type.displayName&&(jr=e.type.displayName)),s}render(){this._checkProps(this.props);var e=this.props,t=e.ListEmptyComponent,r=e.ListFooterComponent,s=e.ListHeaderComponent,n=this.props,a=n.data,o=n.horizontal,l=this.props.inverted?We(this.props.horizontal)?we.horizontallyInverted:we.verticallyInverted:null,c=[],u=new Set(this.props.stickyHeaderIndices),h=[];if(s){u.has(0)&&h.push(0);var d=g.isValidElement(s)?s:g.createElement(s,null);c.push(g.createElement(lr,{cellKey:this._getCellKey()+"-header",key:"$header"},g.createElement(R,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},d)))}var m=this.props.getItemCount(a);if(m===0&&t){var p=g.isValidElement(t)?t:g.createElement(t,null);c.push(g.createElement(lr,{cellKey:this._getCellKey()+"-empty",key:"$empty"},g.cloneElement(p,{onLayout:ie=>{this._onLayoutEmpty(ie),p.props.onLayout&&p.props.onLayout(ie)},style:[l,p.props.style]})))}if(m>0){Vr=!1,jr="";for(var y=this._getSpacerKey(!o),v=this.state.renderMask.enumerateRegions(),b=Da(v,ie=>ie.isSpacer),E=ke(v),w;!(w=E()).done;){var k=w.value;if(k.isSpacer){if(this.props.disableVirtualization)continue;var A=k===b,S=A&&!this.props.getItemLayout,x=S?Ji(k.first-1,k.last,this._highestMeasuredFrameIndex):k.last,F=this.__getFrameMetricsApprox(k.first,this.props),Y=this.__getFrameMetricsApprox(x,this.props),K=Y.offset+Y.length-F.offset;c.push(g.createElement(R,{key:"$spacer-"+k.first,style:{[y]:K}}))}else this._pushCells(c,h,u,k.first,k.last,l)}!this._hasWarned.keys&&Vr&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",jr),this._hasWarned.keys=!0)}if(r){var z=g.isValidElement(r)?r:g.createElement(r,null);c.push(g.createElement(lr,{cellKey:this._getFooterCellKey(),key:"$footer"},g.createElement(R,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},z)))}var J=T(T({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:Ma(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:h,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<m-1;var re=g.createElement(Ia,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:We(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},g.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(J),{ref:this._captureScrollRef},c)),U=re;return this.props.debug?g.createElement(R,{style:we.debug},U,this._renderDebugOverlay()):U}componentDidUpdate(e){var t=this.props,r=t.data,s=t.extraData;(r!==e.data||s!==e.extraData)&&this._viewabilityTuples.forEach(a=>{a.viewabilityHelper.resetViewableIndices()});var n=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),n&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,t=>{t.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,t,r,s)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:t}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:s});var n=this._convertParentScrollMetrics(this.context.getScrollMetrics()),a=this._scrollMetrics.visibleLength!==n.visibleLength||this._scrollMetrics.offset!==n.offset;a&&(this._scrollMetrics.visibleLength=n.visibleLength,this._scrollMetrics.offset=n.offset,this._nestedChildLists.forEach(o=>{o.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],r=this.props.getItemCount(this.props.data),s=0;s<r;s++){var n=this.__getFrameMetricsApprox(s,this.props);n.inLayout&&t.push(n)}var a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=o.offset+o.length-a,c=this._scrollMetrics.offset,u=this._scrollMetrics.visibleLength;return g.createElement(R,{style:[we.debugOverlayBase,we.debugOverlay]},t.map((h,d)=>g.createElement(R,{key:"f"+d,style:[we.debugOverlayBase,we.debugOverlayFrame,{top:h.offset*e,height:h.length*e}]})),g.createElement(R,{style:[we.debugOverlayBase,we.debugOverlayFrameLast,{top:a*e,height:l*e}]}),g.createElement(R,{style:[we.debugOverlayBase,we.debugOverlayFrameVis,{top:c*e,height:u*e}]}))}_selectLength(e){return We(this.props.horizontal)?e.width:e.height}_selectOffset(e){return We(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,t=e.data,r=e.getItemCount,s=e.onStartReached,n=e.onStartReachedThreshold,a=e.onEndReached,o=e.onEndReachedThreshold,l=e.initialScrollIndex,c=this._scrollMetrics,u=c.contentLength,h=c.visibleLength,d=c.offset,m=d,p=u-h-d;m<Zi&&(m=0),p<Zi&&(p=0);var y=2,v=n!=null?n*h:y,b=o!=null?o*h:y,E=m<=v,w=p<=b;a&&this.state.cellsAroundViewport.last===r(t)-1&&w&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,a({distanceFromEnd:p})):s!=null&&this.state.cellsAroundViewport.first===0&&E&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,s({distanceFromStart:m})):(this._sentStartForContentLength=E?this._sentStartForContentLength:0,this._sentEndForContentLength=w?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,t=e.first,r=e.last,s=this._scrollMetrics,n=s.offset,a=s.visibleLength,o=s.velocity,l=this.props.getItemCount(this.props.data),c=!1,u=ja(this.props.onStartReachedThreshold),h=es(this.props.onEndReachedThreshold);if(t>0){var d=n-this.__getFrameMetricsApprox(t,this.props).offset;c=d<0||o<-2&&d<ts(u,a)}if(!c&&r>=0&&r<l-1){var m=this.__getFrameMetricsApprox(r,this.props).offset-(n+a);c=m<0||o>2&&m<ts(h,a)}if(c&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,t){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,t)})}}de.contextType=mr;var we=G.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),is=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function $a(i,e){return!!(i===e||is(i)&&is(e))}function Ua(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!$a(i[t],e[t]))return!1;return!0}function Ba(i,e){e===void 0&&(e=Ua);var t=null;function r(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var a=i.apply(this,s);return t={lastResult:a,lastArgs:s,lastThis:this},a}return r.clear=function(){t=null},r}var za=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function qa(i){return i??he.OS==="android"}function Ke(i){return i??1}function Ha(i){return typeof Object(i).length=="number"}let Wa=class extends g.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=t=>{this._listRef=t},this._getItem=(t,r)=>{var s=Ke(this.props.numColumns);if(s>1){for(var n=[],a=0;a<s;a++){var o=r*s+a;if(o<t.length){var l=t[o];n.push(l)}}return n}else return t[r]},this._getItemCount=t=>{if(t!=null&&Ha(t)){var r=Ke(this.props.numColumns);return r>1?Math.ceil(t.length/r):t.length}else return 0},this._keyExtractor=(t,r)=>{var s,n=Ke(this.props.numColumns),a=(s=this.props.keyExtractor)!==null&&s!==void 0?s:Ut;return n>1?(C(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",n),t.map((o,l)=>a(o,r*n+l)).join(":")):a(t,r)},this._renderer=(t,r,s,n,a)=>{var o=Ke(n),l=u=>t?g.createElement(t,u):r?r(u):null,c=u=>{if(o>1){var h=u.item,d=u.index;return C(Array.isArray(h),"Expected array of items with numColumns > 1"),g.createElement(R,{style:[Ka.row,s]},h.map((m,p)=>{var y=l({item:m,index:d*o+p,separators:u.separators});return y!=null?g.createElement(g.Fragment,{key:p},y):null}))}else return l(u)};return t?{ListItemComponent:c}:{renderItem:c}},this._memoizedRenderer=Ba(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(t=>({viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(t.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){C(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),C(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),C(!Qn(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),C(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var t=e.getItem,r=e.getItemCount,s=e.horizontal,n=e.columnWrapperStyle,a=e.onViewableItemsChanged,o=e.viewabilityConfigCallbackPairs,l=Ke(this.props.numColumns);C(!t&&!r,"FlatList does not support custom data formats."),l>1?C(!s,"numColumns does not support horizontal."):C(!n,"columnWrapperStyle not supported for single column lists"),C(!(a&&o),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,t){var r,s=Ke(this.props.numColumns),n=(r=this.props.keyExtractor)!==null&&r!==void 0?r:Ut;t.item.forEach((a,o)=>{C(t.index!=null,"Missing index!");var l=t.index*s+o;e.push(T(T({},t),{},{item:a,key:n(a,l),index:l}))})}_createOnViewableItemsChanged(e){return t=>{var r=Ke(this.props.numColumns);if(e)if(r>1){var s=[],n=[];t.viewableItems.forEach(a=>this._pushMultiColumnViewable(n,a)),t.changed.forEach(a=>this._pushMultiColumnViewable(s,a)),e({viewableItems:n,changed:s})}else e(t)}}render(){var e=this.props,t=e.numColumns,r=e.columnWrapperStyle,s=e.removeClippedSubviews,n=e.strictMode,a=n===void 0?!1:n,o=Pe(e,za),l=a?this._memoizedRenderer:this._renderer;return g.createElement(de,te({},o,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:qa(s)},l(this.props.ListItemComponent,this.props.renderItem,r,t,this.props.extraData)))}};var Ka=G.create({row:{flexDirection:"row"}});function Ga(i){return null}const Ja=Ga(),Rt=new Ds;class Ya{constructor(e){}addListener(e,t,r){var s;(s=this._nativeModule)==null||s.addListener(e);var n=Rt.addListener(e,t,r);return{remove:()=>{if(n!=null){var a;(a=this._nativeModule)==null||a.removeListeners(1),n.remove(),n=null}}}}removeListener(e,t){var r;(r=this._nativeModule)==null||r.removeListeners(1),Rt.removeListener(e,t)}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];Rt.emit(e,...r)}removeAllListeners(e){var t;C(e!=null,"`NativeEventEmitter.removeAllListener()` requires a non-null argument."),(t=this._nativeModule)==null||t.removeListeners(this.listenerCount(e)),Rt.removeAllListeners(e)}listenerCount(e){return Rt.listenerCount(e)}}var bi=Ja,Qa=1,Xa=1,Dr,$r=new Set,Ur=!1,ss=[],V=bi,Q={getValue:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.getValue,e,t)},setWaitingForIdentifier:function(e){$r.add(e),Ur=!0},unsetWaitingForIdentifier:function(e){$r.delete(e),$r.size===0&&(Ur=!1,Q.disableQueue())},disableQueue:function(){C(V,"Native animated module is not available")},flushQueue:function(){},queueOperation:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];Ur||ss.length!==0?ss.push(()=>e(...r)):e(...r)},createAnimatedNode:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.createAnimatedNode,e,t)},updateAnimatedNodeConfig:function(e,t){C(V,"Native animated module is not available")},startListeningToAnimatedNodeValue:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.startListeningToAnimatedNodeValue,e)},stopListeningToAnimatedNodeValue:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.stopListeningToAnimatedNodeValue,e)},connectAnimatedNodes:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.connectAnimatedNodes,e,t)},disconnectAnimatedNodes:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.disconnectAnimatedNodes,e,t)},startAnimatingNode:function(e,t,r,s){C(V,"Native animated module is not available"),Q.queueOperation(V.startAnimatingNode,e,t,r,s)},stopAnimation:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.stopAnimation,e)},setAnimatedNodeValue:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.setAnimatedNodeValue,e,t)},setAnimatedNodeOffset:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.setAnimatedNodeOffset,e,t)},flattenAnimatedNodeOffset:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.flattenAnimatedNodeOffset,e)},extractAnimatedNodeOffset:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.extractAnimatedNodeOffset,e)},connectAnimatedNodeToView:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.connectAnimatedNodeToView,e,t)},disconnectAnimatedNodeFromView:function(e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.disconnectAnimatedNodeFromView,e,t)},restoreDefaultValues:function(e){C(V,"Native animated module is not available"),V.restoreDefaultValues!=null&&Q.queueOperation(V.restoreDefaultValues,e)},dropAnimatedNode:function(e){C(V,"Native animated module is not available"),Q.queueOperation(V.dropAnimatedNode,e)},addAnimatedEventToView:function(e,t,r){C(V,"Native animated module is not available"),Q.queueOperation(V.addAnimatedEventToView,e,t,r)},removeAnimatedEventFromView(i,e,t){C(V,"Native animated module is not available"),Q.queueOperation(V.removeAnimatedEventFromView,i,e,t)}},Us={backgroundColor:!0,borderBottomColor:!0,borderColor:!0,borderEndColor:!0,borderLeftColor:!0,borderRightColor:!0,borderStartColor:!0,borderTopColor:!0,color:!0,tintColor:!0},Bs=T(T({},Us),{},{borderBottomEndRadius:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomStartRadius:!0,borderRadius:!0,borderTopEndRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopStartRadius:!0,elevation:!0,opacity:!0,transform:!0,zIndex:!0,shadowOpacity:!0,shadowRadius:!0,scaleX:!0,scaleY:!0,translateX:!0,translateY:!0}),zs={translateX:!0,translateY:!0,scale:!0,scaleX:!0,scaleY:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,perspective:!0},qs={inputRange:!0,outputRange:!0,extrapolate:!0,extrapolateRight:!0,extrapolateLeft:!0};function Za(i){Bs[i]=!0}function eo(i){zs[i]=!0}function to(i){qs[i]=!0}function ro(i){return Us.hasOwnProperty(i)}function Hs(i){return Bs.hasOwnProperty(i)}function Ws(i){return zs.hasOwnProperty(i)}function Ks(i){return qs.hasOwnProperty(i)}function io(i){i.forEach(e=>{if(!Ws(e.property))throw new Error("Property '"+e.property+"' is not supported by native animated module")})}function so(i){for(var e in i)if(!Hs(e))throw new Error("Style property '"+e+"' is not supported by native animated module")}function no(i){for(var e in i)if(!Ks(e))throw new Error("Interpolation property '"+e+"' is not supported by native animated module")}function ao(){return Qa++}function Gs(){return Xa++}function oo(){C(bi,"Native animated module is not available")}var ns=!1;function bt(i){return i.useNativeDriver==null&&console.warn("Animated: `useNativeDriver` was not specified. This is a required option and must be explicitly set to `true` or `false`"),i.useNativeDriver===!0&&!bi?(ns||(console.warn("Animated: `useNativeDriver` is not supported because the native animated module is missing. Falling back to JS-based animation. To resolve this, add `RCTAnimation` module to this app, or remove `useNativeDriver`. Make sure to run `bundle exec pod install` first. Read more about autolinking: https://github.com/react-native-community/cli/blob/master/docs/autolinking.md"),ns=!0),!1):i.useNativeDriver||!1}function lo(i){if(typeof i!="string")return i;if(/deg$/.test(i)){var e=parseFloat(i)||0,t=e*Math.PI/180;return t}else return i}const H={API:Q,isSupportedColorStyleProp:ro,isSupportedStyleProp:Hs,isSupportedTransformProp:Ws,isSupportedInterpolationParam:Ks,addWhitelistedStyleProp:Za,addWhitelistedTransformProp:eo,addWhitelistedInterpolationParam:to,validateStyles:so,validateTransform:io,validateInterpolation:no,generateNewNodeTag:ao,generateNewAnimationId:Gs,assertNativeAnimatedModule:oo,shouldUseNativeDriver:bt,transformDataType:lo,get nativeEventEmitter(){return Dr||(Dr=new Ya(null)),Dr}};var as=H.API,co=1;class B{__attach(){}__detach(){this.__isNative&&this.__nativeTag!=null&&(H.API.dropAnimatedNode(this.__nativeTag),this.__nativeTag=void 0)}__getValue(){}__getAnimatedValue(){return this.__getValue()}__addChild(e){}__removeChild(e){}__getChildren(){return[]}constructor(){this._listeners={}}__makeNative(e){if(!this.__isNative)throw new Error('This node cannot be made a "native" animated node');this._platformConfig=e,this.hasListeners()&&this._startListeningToNativeValueUpdates()}addListener(e){var t=String(co++);return this._listeners[t]=e,this.__isNative&&this._startListeningToNativeValueUpdates(),t}removeListener(e){delete this._listeners[e],this.__isNative&&!this.hasListeners()&&this._stopListeningForNativeValueUpdates()}removeAllListeners(){this._listeners={},this.__isNative&&this._stopListeningForNativeValueUpdates()}hasListeners(){return!!Object.keys(this._listeners).length}_startListeningToNativeValueUpdates(){this.__nativeAnimatedValueListener&&!this.__shouldUpdateListenersForNewNativeTag||(this.__shouldUpdateListenersForNewNativeTag&&(this.__shouldUpdateListenersForNewNativeTag=!1,this._stopListeningForNativeValueUpdates()),as.startListeningToAnimatedNodeValue(this.__getNativeTag()),this.__nativeAnimatedValueListener=H.nativeEventEmitter.addListener("onAnimatedValueUpdate",e=>{e.tag===this.__getNativeTag()&&this.__onAnimatedValueUpdateReceived(e.value)}))}__onAnimatedValueUpdateReceived(e){this.__callListeners(e)}__callListeners(e){for(var t in this._listeners)this._listeners[t]({value:e})}_stopListeningForNativeValueUpdates(){this.__nativeAnimatedValueListener&&(this.__nativeAnimatedValueListener.remove(),this.__nativeAnimatedValueListener=null,as.stopListeningToAnimatedNodeValue(this.__getNativeTag()))}__getNativeTag(){var e;H.assertNativeAnimatedModule(),C(this.__isNative,'Attempt to get native tag from node not marked as "native"');var t=(e=this.__nativeTag)!==null&&e!==void 0?e:H.generateNewNodeTag();if(this.__nativeTag==null){this.__nativeTag=t;var r=this.__getNativeConfig();this._platformConfig&&(r.platformConfig=this._platformConfig),H.API.createAnimatedNode(t,r),this.__shouldUpdateListenersForNewNativeTag=!0}return t}__getNativeConfig(){throw new Error("This JS animated node type cannot be used as native animated node")}toJSON(){return this.__getValue()}__getPlatformConfig(){return this._platformConfig}__setPlatformConfig(e){this._platformConfig=e}}class _e extends B{constructor(){super(),this._children=[]}__makeNative(e){if(!this.__isNative){this.__isNative=!0;for(var t=ke(this._children),r;!(r=t()).done;){var s=r.value;s.__makeNative(e),H.API.connectAnimatedNodes(this.__getNativeTag(),s.__getNativeTag())}}super.__makeNative(e)}__addChild(e){this._children.length===0&&this.__attach(),this._children.push(e),this.__isNative&&(e.__makeNative(this.__getPlatformConfig()),H.API.connectAnimatedNodes(this.__getNativeTag(),e.__getNativeTag()))}__removeChild(e){var t=this._children.indexOf(e);if(t===-1){console.warn("Trying to remove a child that doesn't exist");return}this.__isNative&&e.__isNative&&H.API.disconnectAnimatedNodes(this.__getNativeTag(),e.__getNativeTag()),this._children.splice(t,1),this._children.length===0&&this.__detach()}__getChildren(){return this._children}__callListeners(e){if(super.__callListeners(e),!this.__isNative)for(var t=ke(this._children),r;!(r=t()).done;){var s=r.value;s.__getValue&&s.__callListeners(s.__getValue())}}}var uo=i=>i;function Si(i){if(i.outputRange&&typeof i.outputRange[0]=="string")return po(i);var e=i.outputRange,t=i.inputRange,r=i.easing||uo,s="extend";i.extrapolateLeft!==void 0?s=i.extrapolateLeft:i.extrapolate!==void 0&&(s=i.extrapolate);var n="extend";return i.extrapolateRight!==void 0?n=i.extrapolateRight:i.extrapolate!==void 0&&(n=i.extrapolate),a=>{C(typeof a=="number","Cannot interpolation an input which is not a number");var o=_o(a,t);return ho(a,t[o],t[o+1],e[o],e[o+1],r,s,n)}}function ho(i,e,t,r,s,n,a,o){var l=i;if(l<e){if(a==="identity")return l;a==="clamp"&&(l=e)}if(l>t){if(o==="identity")return l;o==="clamp"&&(l=t)}return r===s?r:e===t?i<=e?r:s:(e===-1/0?l=-l:t===1/0?l=l-e:l=(l-e)/(t-e),l=n(l),r===-1/0?l=-l:s===1/0?l=l+r:l=l*(s-r)+r,l)}function fo(i){var e=js(i);if(e===null||typeof e!="number")return i;e=e||0;var t=(e&4278190080)>>>24,r=(e&16711680)>>>16,s=(e&65280)>>>8,n=(e&255)/255;return"rgba("+t+", "+r+", "+s+", "+n+")"}var mt=/[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?/g;function po(i){var e=i.outputRange;C(e.length>=2,"Bad output range"),e=e.map(fo),go(e);var t=e[0].match(mt).map(()=>[]);e.forEach(n=>{n.match(mt).forEach((a,o)=>{t[o].push(+a)})});var r=e[0].match(mt).map((n,a)=>Si(T(T({},i),{},{outputRange:t[a]}))),s=mo(e[0]);return n=>{var a=0;return e[0].replace(mt,()=>{var o=+r[a++](n);return s&&(o=a<4?Math.round(o):Math.round(o*1e3)/1e3),String(o)})}}function mo(i){return typeof i=="string"&&i.startsWith("rgb")}function go(i){for(var e=i[0].replace(mt,""),t=1;t<i.length;++t)C(e===i[t].replace(mt,""),"invalid pattern "+i[0]+" and "+i[t])}function _o(i,e){var t;for(t=1;t<e.length-1&&!(e[t]>=i);++t);return t-1}class ve extends _e{constructor(e,t){super(),this._parent=e,this._config=t,this._interpolation=Si(t)}__makeNative(e){this._parent.__makeNative(e),super.__makeNative(e)}__getValue(){var e=this._parent.__getValue();return C(typeof e=="number","Cannot interpolate an input which is not a number."),this._interpolation(e)}interpolate(e){return new ve(this,e)}__attach(){this._parent.__addChild(this)}__detach(){this._parent.__removeChild(this),super.__detach()}__transformDataType(e){return e.map(H.transformDataType)}__getNativeConfig(){return{inputRange:this._config.inputRange,outputRange:this.__transformDataType(this._config.outputRange),extrapolateLeft:this._config.extrapolateLeft||this._config.extrapolate||"extend",extrapolateRight:this._config.extrapolateRight||this._config.extrapolate||"extend",type:"interpolation"}}}ve.__createInterpolation=Si;var Le=H.API;function vo(i){var e=new Set;function t(r){typeof r.update=="function"?e.add(r):r.__getChildren().forEach(t)}t(i),e.forEach(r=>r.update())}function yo(i,e){Le.setWaitingForIdentifier(i),e(),Le.unsetWaitingForIdentifier(i)}class W extends _e{constructor(e,t){if(super(),typeof e!="number")throw new Error("AnimatedValue: Attempting to set value to undefined");this._startingValue=this._value=e,this._offset=0,this._animation=null,t&&t.useNativeDriver&&this.__makeNative()}__detach(){this.__isNative&&Le.getValue(this.__getNativeTag(),e=>{this._value=e-this._offset}),this.stopAnimation(),super.__detach()}__getValue(){return this._value+this._offset}setValue(e){this._animation&&(this._animation.stop(),this._animation=null),this._updateValue(e,!this.__isNative),this.__isNative&&yo(this.__getNativeTag().toString(),()=>Le.setAnimatedNodeValue(this.__getNativeTag(),e))}setOffset(e){this._offset=e,this.__isNative&&Le.setAnimatedNodeOffset(this.__getNativeTag(),e)}flattenOffset(){this._value+=this._offset,this._offset=0,this.__isNative&&Le.flattenAnimatedNodeOffset(this.__getNativeTag())}extractOffset(){this._offset+=this._value,this._value=0,this.__isNative&&Le.extractAnimatedNodeOffset(this.__getNativeTag())}stopAnimation(e){this.stopTracking(),this._animation&&this._animation.stop(),this._animation=null,e&&(this.__isNative?Le.getValue(this.__getNativeTag(),e):e(this.__getValue()))}resetAnimation(e){this.stopAnimation(e),this._value=this._startingValue,this.__isNative&&Le.setAnimatedNodeValue(this.__getNativeTag(),this._startingValue)}__onAnimatedValueUpdateReceived(e){this._updateValue(e,!1)}interpolate(e){return new ve(this,e)}animate(e,t){var r=null;e.__isInteraction&&(r=$t.createInteractionHandle());var s=this._animation;this._animation&&this._animation.stop(),this._animation=e,e.start(this._value,n=>{this._updateValue(n,!0)},n=>{this._animation=null,r!==null&&$t.clearInteractionHandle(r),t&&t(n)},s,this)}stopTracking(){this._tracking&&this._tracking.__detach(),this._tracking=null}track(e){this.stopTracking(),this._tracking=e,this._tracking&&this._tracking.update()}_updateValue(e,t){if(e===void 0)throw new Error("AnimatedValue: Attempting to set value to undefined");this._value=e,t&&vo(this),super.__callListeners(this.__getValue())}__getNativeConfig(){return{type:"value",value:this._value,offset:this._offset}}}function Ei(i,e,t){var r=[],s=(n,a)=>{if(n instanceof W)n.__makeNative(),r.push({nativeEventPath:a,animatedValueTag:n.__getNativeTag()});else if(typeof n=="object")for(var o in n)s(n[o],a.concat(o))};return C(t[0]&&t[0].nativeEvent,"Native driven events only support animated values contained inside `nativeEvent`."),s(t[0].nativeEvent,[]),i!=null&&r.forEach(n=>{H.API.addAnimatedEventToView(i,e,n)}),{detach(){i!=null&&r.forEach(n=>{H.API.removeAnimatedEventFromView(i,e,n.animatedValueTag)})}}}class it{constructor(e,t){this._listeners=[],this._argMapping=e,t==null&&(console.warn("Animated.event now requires a second argument for options"),t={useNativeDriver:!1}),t.listener&&this.__addListener(t.listener),this._callListeners=this._callListeners.bind(this),this._attachedEvent=null,this.__isNative=bt(t)}__addListener(e){this._listeners.push(e)}__removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}__attach(e,t){C(this.__isNative,"Only native driven events need to be attached."),this._attachedEvent=Ei(e,t,this._argMapping)}__detach(e,t){C(this.__isNative,"Only native driven events need to be detached."),this._attachedEvent&&this._attachedEvent.detach()}__getHandler(){var e=this;return this.__isNative?this._callListeners:function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var n=(a,o,l)=>{if(a instanceof W)typeof o=="number"&&a.setValue(o);else if(typeof a=="object")for(var c in a)n(a[c],o[c])};e._argMapping.forEach((a,o)=>{n(a,r[o])}),e._callListeners(...r)}}_callListeners(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._listeners.forEach(s=>s(...t))}}class wo extends _e{constructor(e){super(),this._transforms=e}__makeNative(){this._transforms.forEach(e=>{for(var t in e){var r=e[t];r instanceof B&&r.__makeNative()}}),super.__makeNative()}__getValue(){return this._transforms.map(e=>{var t={};for(var r in e){var s=e[r];s instanceof B?t[r]=s.__getValue():t[r]=s}return t})}__getAnimatedValue(){return this._transforms.map(e=>{var t={};for(var r in e){var s=e[r];s instanceof B?t[r]=s.__getAnimatedValue():t[r]=s}return t})}__attach(){this._transforms.forEach(e=>{for(var t in e){var r=e[t];r instanceof B&&r.__addChild(this)}})}__detach(){this._transforms.forEach(e=>{for(var t in e){var r=e[t];r instanceof B&&r.__removeChild(this)}}),super.__detach()}__getNativeConfig(){var e=[];return this._transforms.forEach(t=>{for(var r in t){var s=t[r];s instanceof B?e.push({type:"animated",property:r,nodeTag:s.__getNativeTag()}):e.push({type:"static",property:r,value:H.transformDataType(s)})}}),H.validateTransform(e),{type:"transform",transforms:e}}}var bo=G.flatten;function Js(i){var e=bo(i),t={};for(var r in e){var s=e[r];r==="transform"&&Array.isArray(s)?t[r]=new wo(s):s instanceof B?t[r]=s:s&&!Array.isArray(s)&&typeof s=="object"&&(t[r]=Js(s))}return t}class os extends _e{constructor(e){super(),this._inputStyle=e,this._style=Js(e)}_walkStyleAndGetValues(e){var t={};for(var r in e){var s=e[r];s instanceof B?s.__isNative||(t[r]=s.__getValue()):s&&!Array.isArray(s)&&typeof s=="object"?t[r]=this._walkStyleAndGetValues(s):t[r]=s}return t}__getValue(){return[this._inputStyle,this._walkStyleAndGetValues(this._style)]}_walkStyleAndGetAnimatedValues(e){var t={};for(var r in e){var s=e[r];s instanceof B?t[r]=s.__getAnimatedValue():s&&!Array.isArray(s)&&typeof s=="object"&&(t[r]=this._walkStyleAndGetAnimatedValues(s))}return t}__getAnimatedValue(){return this._walkStyleAndGetAnimatedValues(this._style)}__attach(){for(var e in this._style){var t=this._style[e];t instanceof B&&t.__addChild(this)}}__detach(){for(var e in this._style){var t=this._style[e];t instanceof B&&t.__removeChild(this)}super.__detach()}__makeNative(){for(var e in this._style){var t=this._style[e];t instanceof B&&t.__makeNative()}super.__makeNative()}__getNativeConfig(){var e={};for(var t in this._style)if(this._style[t]instanceof B){var r=this._style[t];r.__makeNative(),e[t]=r.__getNativeTag()}return H.validateStyles(e),{type:"style",style:e}}}class So extends B{constructor(e,t){super(),e.style&&(e=T(T({},e),{},{style:new os(e.style)})),this._props=e,this._callback=t,this.__attach()}__getValue(){var e={};for(var t in this._props){var r=this._props[t];r instanceof B?(!r.__isNative||r instanceof os)&&(e[t]=r.__getValue()):r instanceof it?e[t]=r.__getHandler():e[t]=r}return e}__getAnimatedValue(){var e={};for(var t in this._props){var r=this._props[t];r instanceof B&&(e[t]=r.__getAnimatedValue())}return e}__attach(){for(var e in this._props){var t=this._props[e];t instanceof B&&t.__addChild(this)}}__detach(){this.__isNative&&this._animatedView&&this.__disconnectAnimatedView();for(var e in this._props){var t=this._props[e];t instanceof B&&t.__removeChild(this)}super.__detach()}update(){this._callback()}__makeNative(){if(!this.__isNative){this.__isNative=!0;for(var e in this._props){var t=this._props[e];t instanceof B&&t.__makeNative()}this._animatedView&&this.__connectAnimatedView()}}setNativeView(e){this._animatedView!==e&&(this._animatedView=e,this.__isNative&&this.__connectAnimatedView())}__connectAnimatedView(){C(this.__isNative,'Expected node to be marked as "native"');var e=this._animatedView;C(e!=null,"Unable to locate attached view in the native tree"),H.API.connectAnimatedNodeToView(this.__getNativeTag(),e)}__disconnectAnimatedView(){C(this.__isNative,'Expected node to be marked as "native"');var e=this._animatedView;C(e!=null,"Unable to locate attached view in the native tree"),H.API.disconnectAnimatedNodeFromView(this.__getNativeTag(),e)}__restoreDefaultValues(){this.__isNative&&H.API.restoreDefaultValues(this.__getNativeTag())}__getNativeConfig(){var e={};for(var t in this._props){var r=this._props[t];r instanceof B&&(r.__makeNative(),e[t]=r.__getNativeTag())}return{type:"props",props:e}}}function Eo(i){var e=g.useRef(void 0);return g.useCallback(t=>{e.current&&(e.current(),e.current=void 0),t!=null&&(e.current=i(t))},[i])}function Co(i){var e=g.useReducer(o=>o+1,0),t=e[1],r=g.useRef(null),s=g.useMemo(()=>new So(i,()=>r.current==null?void 0:r.current()),[i]);ko(s);var n=g.useCallback(o=>{s.setNativeView(o),r.current=()=>{t()};var l=Ao(o),c=[];for(var u in i){var h=i[u];h instanceof it&&h.__isNative&&(h.__attach(l,u),c.push([u,h]))}return()=>{r.current=null;for(var d=0,m=c;d<m.length;d++){var p=m[d],y=p[0],v=p[1];v.__detach(l,y)}}},[i,s]),a=Eo(n);return[To(s),a]}function To(i){return T(T({},i.__getValue()),{},{collapsable:!1})}function ko(i){var e=g.useRef(null),t=g.useRef(!1);g.useEffect(()=>{}),Ui(()=>(t.current=!1,()=>{t.current=!0}),[]),Ui(()=>{if(i.__attach(),e.current!=null){var r=e.current;r.__restoreDefaultValues(),r.__detach(),e.current=null}return()=>{t.current?i.__detach():e.current=i}},[i])}function Ao(i){return typeof i=="object"&&typeof(i==null?void 0:i.getScrollableNode)=="function"?i.getScrollableNode():i}function Ro(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return g.useCallback(r=>{for(var s=0,n=e;s<n.length;s++){var a=n[s];a!=null&&(typeof a=="function"?a(r):a.current=r)}},[...e])}var Io=["style"];function qe(i){return g.forwardRef((e,t)=>{var r=Co(e),s=r[0],n=r[1],a=Ro(n,t),o=s.passthroughAnimatedPropExplicitValues,l=s.style,c=o??{},u=c.style,h=Pe(c,Io),d=[l,u];return g.createElement(i,te({},s,h,{style:d,ref:a}))})}var xo=g.forwardRef((i,e)=>g.createElement(Wa,te({scrollEventThrottle:1e-4},i,{ref:e})));const Oo=qe(xo);var Lo=[];function Ys(i){return Lo[i-1]}var No=/^data:/;class fe{static has(e){var t=fe._entries,r=No.test(e);return r||!!t[e]}static add(e){var t=fe._entries,r=Date.now();t[e]?(t[e].lastUsedTimestamp=r,t[e].refCount+=1):t[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var t=fe._entries;t[e]&&(t[e].refCount-=1),fe._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=fe._entries,t=Object.keys(e);if(t.length+1>fe._maximumEntries){var r,s;t.forEach(n=>{var a=e[n];(!s||a.lastUsedTimestamp<s.lastUsedTimestamp)&&a.refCount===0&&(r=n,s=a)}),r&&delete e[r]}}}fe._maximumEntries=256;fe._entries={};var Br=0,Xt={},Ae={abort(i){var e=Xt[""+i];e&&(e.onerror=null,e.onload=null,e=null,delete Xt[""+i])},getSize(i,e,t){var r=!1,s=setInterval(a,16),n=Ae.load(i,a,o);function a(){var l=Xt[""+n];if(l){var c=l.naturalHeight,u=l.naturalWidth;c&&u&&(e(u,c),r=!0)}r&&(Ae.abort(n),clearInterval(s))}function o(){typeof t=="function"&&t(),Ae.abort(n),clearInterval(s)}},has(i){return fe.has(i)},load(i,e,t){Br+=1;var r=new window.Image;return r.onerror=t,r.onload=s=>{var n=()=>e({nativeEvent:s});typeof r.decode=="function"?r.decode().then(n,n):setTimeout(n,0)},r.src=i,Xt[""+Br]=r,Br},prefetch(i){return new Promise((e,t)=>{Ae.load(i,()=>{fe.add(i),fe.remove(i),e()},t)})},queryCache(i){var e={};return i.forEach(t=>{fe.has(t)&&(e[t]="disk/memory")}),Promise.resolve(e)}};class Ft{static get(){return ze.get("window").scale}static getFontScale(){return ze.get("window").fontScale||Ft.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*Ft.get())}static roundToNearestPixel(e){var t=Ft.get();return Math.round(e*t)/t}}var Po=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],Fo="ERRORED",zr="LOADED",ls="LOADING",Vo="IDLE",jo=0,Mo=/^(data:image\/svg\+xml;utf8,)(.*)/;function Do(i,e){return i&&e!=null?g.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},g.createElement("defs",null,g.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},g.createElement("feFlood",{floodColor:""+i,key:i}),g.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function $o(i,e,t,r){var s=G.flatten(i),n=s.filter,a=s.resizeMode,o=s.shadowOffset,l=s.tintColor;s.resizeMode,s.tintColor;var c=[],u=null;if(n&&c.push(n),e&&c.push("blur("+e+"px)"),o){var h=Jn(s);h&&c.push("drop-shadow("+h+")")}return(r||l)&&t!=null&&c.push("url(#tint-"+t+")"),c.length>0&&(u=c.join(" ")),[a,u,l]}function Uo(i){if(typeof i=="number"){var e=Ys(i),t=e.height,r=e.width;return{height:t,width:r}}else if(i!=null&&!Array.isArray(i)&&typeof i=="object"){var s=i.height,n=i.width;return{height:s,width:n}}}function qr(i){var e=null;if(typeof i=="number"){var t=Ys(i);if(t==null)throw new Error('Image: asset with ID "'+i+'" could not be found. Please check the image source or packager.');var r=t.scales[0];if(t.scales.length>1){var s=Ft.get();r=t.scales.reduce((u,h)=>Math.abs(h-s)<Math.abs(u-s)?h:u)}var n=r!==1?"@"+r+"x":"";e=t?t.httpServerLocation+"/"+t.name+n+"."+t.type:""}else typeof i=="string"?e=i:i&&typeof i.uri=="string"&&(e=i.uri);if(e){var a=e.match(Mo);if(a){var o=a[1],l=a[2],c=encodeURIComponent(l);return""+o+c}}return e}var Qs=g.forwardRef((i,e)=>{var t=i["aria-label"],r=i.accessibilityLabel,s=i.blurRadius,n=i.defaultSource,a=i.draggable,o=i.onError,l=i.onLayout,c=i.onLoad,u=i.onLoadEnd,h=i.onLoadStart,d=i.pointerEvents,m=i.source,p=i.style,y=Pe(i,Po),v=t||r,b=g.useState(()=>{var ne=qr(m);if(ne!=null){var xe=Ae.has(ne);if(xe)return zr}return Vo}),E=b[0],w=b[1],k=g.useState({}),A=k[0],S=k[1],x=g.useContext(Kn),F=g.useRef(null),Y=g.useRef(jo++),K=g.useRef(null),z=E===zr||E===ls&&n==null,J=$o(p,s,Y.current,i.tintColor),re=J[0],U=J[1],ie=J[2],Fe=i.resizeMode||re||"cover",Nr=i.tintColor||ie,Wt=z?m:n,nt=qr(Wt),Kt=Uo(Wt),ae=nt?'url("'+nt+'")':null,se=at(),ye=nt?Gn("img",{alt:v||"",style:It.accessibilityImage$raw,draggable:a||!1,ref:F,src:nt}):null;function at(){if(F.current!=null&&(Fe==="center"||Fe==="repeat")){var ne=F.current,xe=ne.naturalHeight,At=ne.naturalWidth,Mi=A.height,Di=A.width;if(xe&&At&&Mi&&Di){var $i=Math.min(1,Di/At,Mi/xe),Dn=Math.ceil($i*At),$n=Math.ceil($i*xe);return Dn+"px "+$n+"px"}}}function kt(ne){if(Fe==="center"||Fe==="repeat"||l){var xe=ne.nativeEvent.layout;l&&l(ne),S(xe)}}var Ie=qr(m);return g.useEffect(()=>{ne(),Ie!=null&&(w(ls),h&&h(),K.current=Ae.load(Ie,function(At){w(zr),c&&c(At),u&&u()},function(){w(Fo),o&&o({nativeEvent:{error:"Failed to load resource "+Ie}}),u&&u()}));function ne(){K.current!=null&&(Ae.abort(K.current),K.current=null)}return ne},[Ie,K,w,o,c,u,h]),g.createElement(R,te({},y,{"aria-label":v,onLayout:kt,pointerEvents:d,ref:e,style:[It.root,x&&It.inline,Kt,p,It.undo,{boxShadow:null}]}),g.createElement(R,{style:[It.image,Bo[Fe],{backgroundImage:ae,filter:U},se!=null&&{backgroundSize:se}],suppressHydrationWarning:!0}),ye,Do(Nr,Y.current))});Qs.displayName="Image";var kr=Qs;kr.getSize=function(i,e,t){Ae.getSize(i,e,t)};kr.prefetch=function(i){return Ae.prefetch(i)};kr.queryCache=function(i){return Ae.queryCache(i)};var It=G.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:T(T({},G.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:T(T({},G.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),Bo=G.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});const zo=qe(kr);var qo=g.forwardRef((i,e)=>g.createElement(tt,te({scrollEventThrottle:1e-4},i,{ref:e})));const Ho=qe(qo);var Wo=["ItemSeparatorComponent","SectionSeparatorComponent","renderItem","renderSectionFooter","renderSectionHeader","sections","stickySectionHeadersEnabled"];class Ko extends g.PureComponent{constructor(){super(...arguments),this._keyExtractor=(e,t)=>{var r=this._subExtractor(t);return r&&r.key||String(t)},this._convertViewable=e=>{var t;C(e.index!=null,"Received a broken ViewToken");var r=this._subExtractor(e.index);if(!r)return null;var s=r.section.keyExtractor,n=this.props.keyExtractor||Ut,a=s!=null?s(e.item,r.index):n(e.item,(t=r.index)!==null&&t!==void 0?t:0);return T(T({},e),{},{index:r.index,key:a,section:r.section})},this._onViewableItemsChanged=e=>{var t=e.viewableItems,r=e.changed,s=this.props.onViewableItemsChanged;s!=null&&s({viewableItems:t.map(this._convertViewable,this).filter(Boolean),changed:r.map(this._convertViewable,this).filter(Boolean)})},this._renderItem=e=>t=>{var r=t.item,s=t.index,n=this._subExtractor(s);if(!n)return null;var a=n.index;if(a==null){var o=n.section;if(n.header===!0){var l=this.props.renderSectionHeader;return l?l({section:o}):null}else{var c=this.props.renderSectionFooter;return c?c({section:o}):null}}else{var u=n.section.renderItem||this.props.renderItem,h=this._getSeparatorComponent(s,n,e);return C(u,"no renderItem!"),g.createElement(Go,{SeparatorComponent:h,LeadingSeparatorComponent:a===0?this.props.SectionSeparatorComponent:void 0,cellKey:n.key,index:a,item:r,leadingItem:n.leadingItem,leadingSection:n.leadingSection,prevCellKey:(this._subExtractor(s-1)||{}).key,setSelfHighlightCallback:this._setUpdateHighlightFor,setSelfUpdatePropsCallback:this._setUpdatePropsFor,updateHighlightFor:this._updateHighlightFor,updatePropsFor:this._updatePropsFor,renderItem:u,section:n.section,trailingItem:n.trailingItem,trailingSection:n.trailingSection,inverted:!!this.props.inverted})}},this._updatePropsFor=(e,t)=>{var r=this._updatePropsMap[e];r!=null&&r(t)},this._updateHighlightFor=(e,t)=>{var r=this._updateHighlightMap[e];r!=null&&r(t)},this._setUpdateHighlightFor=(e,t)=>{t!=null?this._updateHighlightMap[e]=t:delete this._updateHighlightFor[e]},this._setUpdatePropsFor=(e,t)=>{t!=null?this._updatePropsMap[e]=t:delete this._updatePropsMap[e]},this._updateHighlightMap={},this._updatePropsMap={},this._captureRef=e=>{this._listRef=e}}scrollToLocation(e){for(var t=e.itemIndex,r=0;r<e.sectionIndex;r++)t+=this.props.getItemCount(this.props.sections[r].data)+2;var s=e.viewOffset||0;if(this._listRef!=null){if(e.itemIndex>0&&this.props.stickySectionHeadersEnabled){var n=this._listRef.__getFrameMetricsApprox(t-e.itemIndex,this._listRef.props);s+=n.length}var a=T(T({},e),{},{viewOffset:s,index:t});this._listRef.scrollToIndex(a)}}getListRef(){return this._listRef}render(){var e=this.props;e.ItemSeparatorComponent,e.SectionSeparatorComponent,e.renderItem,e.renderSectionFooter,e.renderSectionHeader,e.sections,e.stickySectionHeadersEnabled;for(var t=Pe(e,Wo),r=this.props.ListHeaderComponent?1:0,s=this.props.stickySectionHeadersEnabled?[]:void 0,n=0,a=ke(this.props.sections),o;!(o=a()).done;){var l=o.value;s!=null&&s.push(n+r),n+=2,n+=this.props.getItemCount(l.data)}var c=this._renderItem(n);return g.createElement(de,te({},t,{keyExtractor:this._keyExtractor,stickyHeaderIndices:s,renderItem:c,data:this.props.sections,getItem:(u,h)=>this._getItem(this.props,u,h),getItemCount:()=>n,onViewableItemsChanged:this.props.onViewableItemsChanged?this._onViewableItemsChanged:void 0,ref:this._captureRef}))}_getItem(e,t,r){if(!t)return null;for(var s=r-1,n=0;n<t.length;n++){var a=t[n],o=a.data,l=e.getItemCount(o);if(s===-1||s===l)return a;if(s<l)return e.getItem(o,s);s-=l+2}return null}_subExtractor(e){for(var t=e,r=this.props,s=r.getItem,n=r.getItemCount,a=r.keyExtractor,o=r.sections,l=0;l<o.length;l++){var c=o[l],u=c.data,h=c.key||String(l);if(t-=1,t>=n(u)+1)t-=n(u)+1;else{if(t===-1)return{section:c,key:h+":header",index:null,header:!0,trailingSection:o[l+1]};if(t===n(u))return{section:c,key:h+":footer",index:null,header:!1,trailingSection:o[l+1]};var d=c.keyExtractor||a||Ut;return{section:c,key:h+":"+d(s(u,t),t),index:t,leadingItem:s(u,t-1),leadingSection:o[l-1],trailingItem:s(u,t+1),trailingSection:o[l+1]}}}}_getSeparatorComponent(e,t,r){if(t=t||this._subExtractor(e),!t)return null;var s=t.section.ItemSeparatorComponent||this.props.ItemSeparatorComponent,n=this.props.SectionSeparatorComponent,a=e===r-1,o=t.index===this.props.getItemCount(t.section.data)-1;return n&&o?n:s&&!o&&!a?s:null}}function Go(i){var e=i.LeadingSeparatorComponent,t=i.SeparatorComponent,r=i.cellKey,s=i.prevCellKey,n=i.setSelfHighlightCallback,a=i.updateHighlightFor,o=i.setSelfUpdatePropsCallback,l=i.updatePropsFor,c=i.item,u=i.index,h=i.section,d=i.inverted,m=g.useState(!1),p=m[0],y=m[1],v=g.useState(!1),b=v[0],E=v[1],w=g.useState({leadingItem:i.leadingItem,leadingSection:i.leadingSection,section:i.section,trailingItem:i.item,trailingSection:i.trailingSection}),k=w[0],A=w[1],S=g.useState({leadingItem:i.item,leadingSection:i.leadingSection,section:i.section,trailingItem:i.trailingItem,trailingSection:i.trailingSection}),x=S[0],F=S[1];g.useEffect(()=>(n(r,E),o(r,F),()=>{o(r,null),n(r,null)}),[r,n,F,o]);var Y={highlight:()=>{y(!0),E(!0),s!=null&&a(s,!0)},unhighlight:()=>{y(!1),E(!1),s!=null&&a(s,!1)},updateProps:(re,U)=>{re==="leading"?e!=null?A(T(T({},k),U)):s!=null&&l(s,T(T({},k),U)):re==="trailing"&&t!=null&&F(T(T({},x),U))}},K=i.renderItem({item:c,index:u,section:h,separators:Y}),z=e!=null&&g.createElement(e,te({highlighted:p},k)),J=t!=null&&g.createElement(t,te({highlighted:b},x));return z||J?g.createElement(R,null,d===!1?z:J,K,d===!1?J:z):K}var Jo=["stickySectionHeadersEnabled"];let Yo=class extends g.PureComponent{constructor(){super(...arguments),this._captureRef=e=>{this._wrapperListRef=e}}scrollToLocation(e){this._wrapperListRef!=null&&this._wrapperListRef.scrollToLocation(e)}recordInteraction(){var e=this._wrapperListRef&&this._wrapperListRef.getListRef();e&&e.recordInteraction()}flashScrollIndicators(){var e=this._wrapperListRef&&this._wrapperListRef.getListRef();e&&e.flashScrollIndicators()}getScrollResponder(){var e=this._wrapperListRef&&this._wrapperListRef.getListRef();if(e)return e.getScrollResponder()}getScrollableNode(){var e=this._wrapperListRef&&this._wrapperListRef.getListRef();if(e)return e.getScrollableNode()}render(){var e=this.props,t=e.stickySectionHeadersEnabled,r=Pe(e,Jo),s=t??he.OS==="ios";return g.createElement(Ko,te({},r,{stickySectionHeadersEnabled:s,ref:this._captureRef,getItemCount:n=>n.length,getItem:(n,a)=>n[a]}))}};var Qo=g.forwardRef((i,e)=>g.createElement(Yo,te({scrollEventThrottle:1e-4},i,{ref:e})));const Xo=qe(Qo),Zo=qe(O),el=qe(R);class tl extends _e{constructor(e,t){super(),this._a=typeof e=="number"?new W(e):e,this._b=typeof t=="number"?new W(t):t}__makeNative(e){this._a.__makeNative(e),this._b.__makeNative(e),super.__makeNative(e)}__getValue(){return this._a.__getValue()+this._b.__getValue()}interpolate(e){return new ve(this,e)}__attach(){this._a.__addChild(this),this._b.__addChild(this)}__detach(){this._a.__removeChild(this),this._b.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"addition",input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}class rl extends _e{constructor(e,t,r){super(),this._a=e,this._min=t,this._max=r,this._value=this._lastValue=this._a.__getValue()}__makeNative(e){this._a.__makeNative(e),super.__makeNative(e)}interpolate(e){return new ve(this,e)}__getValue(){var e=this._a.__getValue(),t=e-this._lastValue;return this._lastValue=e,this._value=Math.min(Math.max(this._value+t,this._min),this._max),this._value}__attach(){this._a.__addChild(this)}__detach(){this._a.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"diffclamp",input:this._a.__getNativeTag(),min:this._min,max:this._max}}}class il extends _e{constructor(e,t){super(),this._warnedAboutDivideByZero=!1,(t===0||t instanceof B&&t.__getValue()===0)&&console.error("Detected potential division by zero in AnimatedDivision"),this._a=typeof e=="number"?new W(e):e,this._b=typeof t=="number"?new W(t):t}__makeNative(e){this._a.__makeNative(e),this._b.__makeNative(e),super.__makeNative(e)}__getValue(){var e=this._a.__getValue(),t=this._b.__getValue();return t===0?(this._warnedAboutDivideByZero||(console.error("Detected division by zero in AnimatedDivision"),this._warnedAboutDivideByZero=!0),0):(this._warnedAboutDivideByZero=!1,e/t)}interpolate(e){return new ve(this,e)}__attach(){this._a.__addChild(this),this._b.__addChild(this)}__detach(){this._a.__removeChild(this),this._b.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"division",input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}class sl extends _e{constructor(e,t){super(),this._a=e,this._modulus=t}__makeNative(e){this._a.__makeNative(e),super.__makeNative(e)}__getValue(){return(this._a.__getValue()%this._modulus+this._modulus)%this._modulus}interpolate(e){return new ve(this,e)}__attach(){this._a.__addChild(this)}__detach(){this._a.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"modulus",input:this._a.__getNativeTag(),modulus:this._modulus}}}class nl extends _e{constructor(e,t){super(),this._a=typeof e=="number"?new W(e):e,this._b=typeof t=="number"?new W(t):t}__makeNative(e){this._a.__makeNative(e),this._b.__makeNative(e),super.__makeNative(e)}__getValue(){return this._a.__getValue()*this._b.__getValue()}interpolate(e){return new ve(this,e)}__attach(){this._a.__addChild(this),this._b.__addChild(this)}__detach(){this._a.__removeChild(this),this._b.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"multiplication",input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}class al extends _e{constructor(e,t){super(),this._a=typeof e=="number"?new W(e):e,this._b=typeof t=="number"?new W(t):t}__makeNative(e){this._a.__makeNative(e),this._b.__makeNative(e),super.__makeNative(e)}__getValue(){return this._a.__getValue()-this._b.__getValue()}interpolate(e){return new ve(this,e)}__attach(){this._a.__addChild(this),this._b.__addChild(this)}__detach(){this._a.__removeChild(this),this._b.__removeChild(this),super.__detach()}__getNativeConfig(){return{type:"subtraction",input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}class Xs extends B{constructor(e,t,r,s,n){super(),this._value=e,this._parent=t,this._animationClass=r,this._animationConfig=s,this._useNativeDriver=bt(s),this._callback=n,this.__attach()}__makeNative(){this.__isNative=!0,this._parent.__makeNative(),super.__makeNative(),this._value.__makeNative()}__getValue(){return this._parent.__getValue()}__attach(){this._parent.__addChild(this),this._useNativeDriver&&this.__makeNative()}__detach(){this._parent.__removeChild(this),super.__detach()}update(){this._value.animate(new this._animationClass(T(T({},this._animationConfig),{},{toValue:this._animationConfig.toValue.__getValue()})),this._callback)}__getNativeConfig(){var e=new this._animationClass(T(T({},this._animationConfig),{},{toValue:void 0})),t=e.__getNativeAnimationConfig();return{type:"tracking",animationId:Gs(),animationConfig:t,toValue:this._parent.__getNativeTag(),value:this._value.__getNativeTag()}}}var ol=1;class Ci extends _e{constructor(e){super();var t=e||{x:0,y:0};typeof t.x=="number"&&typeof t.y=="number"?(this.x=new W(t.x),this.y=new W(t.y)):(C(t.x instanceof W&&t.y instanceof W,"AnimatedValueXY must be initialized with an object of numbers or AnimatedValues."),this.x=t.x,this.y=t.y),this._listeners={}}setValue(e){this.x.setValue(e.x),this.y.setValue(e.y)}setOffset(e){this.x.setOffset(e.x),this.y.setOffset(e.y)}flattenOffset(){this.x.flattenOffset(),this.y.flattenOffset()}extractOffset(){this.x.extractOffset(),this.y.extractOffset()}__getValue(){return{x:this.x.__getValue(),y:this.y.__getValue()}}resetAnimation(e){this.x.resetAnimation(),this.y.resetAnimation(),e&&e(this.__getValue())}stopAnimation(e){this.x.stopAnimation(),this.y.stopAnimation(),e&&e(this.__getValue())}addListener(e){var t=String(ol++),r=s=>{s.value,e(this.__getValue())};return this._listeners[t]={x:this.x.addListener(r),y:this.y.addListener(r)},t}removeListener(e){this.x.removeListener(this._listeners[e].x),this.y.removeListener(this._listeners[e].y),delete this._listeners[e]}removeAllListeners(){this.x.removeAllListeners(),this.y.removeAllListeners(),this._listeners={}}getLayout(){return{left:this.x,top:this.y}}getTranslateTransform(){return[{translateX:this.x},{translateY:this.y}]}}var cs=1;class Ti{start(e,t,r,s,n){}stop(){this.__nativeId&&H.API.stopAnimation(this.__nativeId)}__getNativeAnimationConfig(){throw new Error("This animation type cannot be offloaded to native")}__debouncedOnEnd(e){var t=this.__onEnd;this.__onEnd=null,t&&t(e)}__startNativeAnimation(e){var t=cs+":startAnimation";cs+=1,H.API.setWaitingForIdentifier(t);try{var r=this.__getNativeAnimationConfig();e.__makeNative(r.platformConfig),this.__nativeId=H.generateNewAnimationId(),H.API.startAnimatingNode(this.__nativeId,e.__getNativeTag(),r,this.__debouncedOnEnd.bind(this))}catch(s){throw s}finally{H.API.unsetWaitingForIdentifier(t)}}}class ll extends Ti{constructor(e){var t,r,s;super(),this._deceleration=(t=e.deceleration)!==null&&t!==void 0?t:.998,this._velocity=e.velocity,this._useNativeDriver=bt(e),this.__isInteraction=(r=e.isInteraction)!==null&&r!==void 0?r:!this._useNativeDriver,this.__iterations=(s=e.iterations)!==null&&s!==void 0?s:1}__getNativeAnimationConfig(){return{type:"decay",deceleration:this._deceleration,velocity:this._velocity,iterations:this.__iterations}}start(e,t,r,s,n){this.__active=!0,this._lastValue=e,this._fromValue=e,this._onUpdate=t,this.__onEnd=r,this._startTime=Date.now(),this._useNativeDriver?this.__startNativeAnimation(n):this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))}onUpdate(){var e=Date.now(),t=this._fromValue+this._velocity/(1-this._deceleration)*(1-Math.exp(-(1-this._deceleration)*(e-this._startTime)));if(this._onUpdate(t),Math.abs(this._lastValue-t)<.1){this.__debouncedOnEnd({finished:!0});return}this._lastValue=t,this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this)))}stop(){super.stop(),this.__active=!1,global.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}function Zs(i){return(i-30)*3.62+194}function en(i){return(i-8)*3+25}function cl(i,e){return{stiffness:Zs(i),damping:en(e)}}function ul(i,e){function t(p,y,v){return(p-y)/(v-y)}function r(p,y,v){return y+p*(v-y)}function s(p,y,v){return p*v+(1-p)*y}function n(p,y,v){return s(2*p-p*p,y,v)}function a(p){return 7e-4*Math.pow(p,3)-.031*Math.pow(p,2)+.64*p+1.28}function o(p){return 44e-6*Math.pow(p,3)-.006*Math.pow(p,2)+.36*p+2}function l(p){return 45e-8*Math.pow(p,3)-332e-6*Math.pow(p,2)+.1078*p+5.84}function c(p){return p<=18?a(p):p>18&&p<=44?o(p):l(p)}var u=t(i/1.7,0,20);u=r(u,0,.8);var h=t(e/1.7,0,20),d=r(h,.5,200),m=n(u,c(d),.01);return{stiffness:Zs(d),damping:en(m)}}const us={fromOrigamiTensionAndFriction:cl,fromBouncinessAndSpeed:ul};var Hr=H.API,Zt={r:0,g:0,b:0,a:1},hl=1,dl=i=>i;function hs(i){if(i==null)return null;if(ai(i))return i;var e=js(i);if(e==null)return null;if(typeof e=="object"){var t=dl(e);if(t!=null)return t}else if(typeof e=="number"){var r=(e&4278190080)>>>24,s=(e&16711680)>>>16,n=(e&65280)>>>8,a=(e&255)/255;return{r,g:s,b:n,a}}return null}function ai(i){return i&&typeof i.r=="number"&&typeof i.g=="number"&&typeof i.b=="number"&&typeof i.a=="number"}function fl(i){return i&&i.r instanceof W&&i.g instanceof W&&i.b instanceof W&&i.a instanceof W}class ki extends _e{constructor(e,t){super(),this._listeners={};var r=e??Zt;if(fl(r)){var s=r;this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a}else{var n,a=(n=hs(r))!==null&&n!==void 0?n:Zt,o=Zt;ai(a)?o=a:this.nativeColor=a,this.r=new W(o.r),this.g=new W(o.g),this.b=new W(o.b),this.a=new W(o.a)}(this.nativeColor||t&&t.useNativeDriver)&&this.__makeNative()}setValue(e){var t,r=!1;if(this.__isNative){var s=this.__getNativeTag();Hr.setWaitingForIdentifier(s.toString())}var n=(t=hs(e))!==null&&t!==void 0?t:Zt;if(ai(n)){var a=n;this.r.setValue(a.r),this.g.setValue(a.g),this.b.setValue(a.b),this.a.setValue(a.a),this.nativeColor!=null&&(this.nativeColor=null,r=!0)}else{var o=n;this.nativeColor!==o&&(this.nativeColor=o,r=!0)}if(this.__isNative){var l=this.__getNativeTag();r&&Hr.updateAnimatedNodeConfig(l,this.__getNativeConfig()),Hr.unsetWaitingForIdentifier(l.toString())}}setOffset(e){this.r.setOffset(e.r),this.g.setOffset(e.g),this.b.setOffset(e.b),this.a.setOffset(e.a)}flattenOffset(){this.r.flattenOffset(),this.g.flattenOffset(),this.b.flattenOffset(),this.a.flattenOffset()}extractOffset(){this.r.extractOffset(),this.g.extractOffset(),this.b.extractOffset(),this.a.extractOffset()}addListener(e){var t=String(hl++),r=s=>{s.value,e(this.__getValue())};return this._listeners[t]={r:this.r.addListener(r),g:this.g.addListener(r),b:this.b.addListener(r),a:this.a.addListener(r)},t}removeListener(e){this.r.removeListener(this._listeners[e].r),this.g.removeListener(this._listeners[e].g),this.b.removeListener(this._listeners[e].b),this.a.removeListener(this._listeners[e].a),delete this._listeners[e]}removeAllListeners(){this.r.removeAllListeners(),this.g.removeAllListeners(),this.b.removeAllListeners(),this.a.removeAllListeners(),this._listeners={}}stopAnimation(e){this.r.stopAnimation(),this.g.stopAnimation(),this.b.stopAnimation(),this.a.stopAnimation(),e&&e(this.__getValue())}resetAnimation(e){this.r.resetAnimation(),this.g.resetAnimation(),this.b.resetAnimation(),this.a.resetAnimation(),e&&e(this.__getValue())}__getValue(){return this.nativeColor!=null?this.nativeColor:"rgba("+this.r.__getValue()+", "+this.g.__getValue()+", "+this.b.__getValue()+", "+this.a.__getValue()+")"}__attach(){this.r.__addChild(this),this.g.__addChild(this),this.b.__addChild(this),this.a.__addChild(this),super.__attach()}__detach(){this.r.__removeChild(this),this.g.__removeChild(this),this.b.__removeChild(this),this.a.__removeChild(this),super.__detach()}__makeNative(e){this.r.__makeNative(e),this.g.__makeNative(e),this.b.__makeNative(e),this.a.__makeNative(e),super.__makeNative(e)}__getNativeConfig(){return{type:"color",r:this.r.__getNativeTag(),g:this.g.__getNativeTag(),b:this.b.__getNativeTag(),a:this.a.__getNativeTag(),nativeColor:this.nativeColor}}}class gr extends Ti{constructor(e){var t,r,s,n,a,o,l,c;if(super(),this._overshootClamping=(t=e.overshootClamping)!==null&&t!==void 0?t:!1,this._restDisplacementThreshold=(r=e.restDisplacementThreshold)!==null&&r!==void 0?r:.001,this._restSpeedThreshold=(s=e.restSpeedThreshold)!==null&&s!==void 0?s:.001,this._initialVelocity=(n=e.velocity)!==null&&n!==void 0?n:0,this._lastVelocity=(a=e.velocity)!==null&&a!==void 0?a:0,this._toValue=e.toValue,this._delay=(o=e.delay)!==null&&o!==void 0?o:0,this._useNativeDriver=bt(e),this._platformConfig=e.platformConfig,this.__isInteraction=(l=e.isInteraction)!==null&&l!==void 0?l:!this._useNativeDriver,this.__iterations=(c=e.iterations)!==null&&c!==void 0?c:1,e.stiffness!==void 0||e.damping!==void 0||e.mass!==void 0){var u,h,d;C(e.bounciness===void 0&&e.speed===void 0&&e.tension===void 0&&e.friction===void 0,"You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one"),this._stiffness=(u=e.stiffness)!==null&&u!==void 0?u:100,this._damping=(h=e.damping)!==null&&h!==void 0?h:10,this._mass=(d=e.mass)!==null&&d!==void 0?d:1}else if(e.bounciness!==void 0||e.speed!==void 0){var m,p;C(e.tension===void 0&&e.friction===void 0&&e.stiffness===void 0&&e.damping===void 0&&e.mass===void 0,"You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one");var y=us.fromBouncinessAndSpeed((m=e.bounciness)!==null&&m!==void 0?m:8,(p=e.speed)!==null&&p!==void 0?p:12);this._stiffness=y.stiffness,this._damping=y.damping,this._mass=1}else{var v,b,E=us.fromOrigamiTensionAndFriction((v=e.tension)!==null&&v!==void 0?v:40,(b=e.friction)!==null&&b!==void 0?b:7);this._stiffness=E.stiffness,this._damping=E.damping,this._mass=1}C(this._stiffness>0,"Stiffness value must be greater than 0"),C(this._damping>0,"Damping value must be greater than 0"),C(this._mass>0,"Mass value must be greater than 0")}__getNativeAnimationConfig(){var e;return{type:"spring",overshootClamping:this._overshootClamping,restDisplacementThreshold:this._restDisplacementThreshold,restSpeedThreshold:this._restSpeedThreshold,stiffness:this._stiffness,damping:this._damping,mass:this._mass,initialVelocity:(e=this._initialVelocity)!==null&&e!==void 0?e:this._lastVelocity,toValue:this._toValue,iterations:this.__iterations,platformConfig:this._platformConfig}}start(e,t,r,s,n){if(this.__active=!0,this._startPosition=e,this._lastPosition=this._startPosition,this._onUpdate=t,this.__onEnd=r,this._lastTime=Date.now(),this._frameTime=0,s instanceof gr){var a=s.getInternalState();this._lastPosition=a.lastPosition,this._lastVelocity=a.lastVelocity,this._initialVelocity=this._lastVelocity,this._lastTime=a.lastTime}var o=()=>{this._useNativeDriver?this.__startNativeAnimation(n):this.onUpdate()};this._delay?this._timeout=setTimeout(o,this._delay):o()}getInternalState(){return{lastPosition:this._lastPosition,lastVelocity:this._lastVelocity,lastTime:this._lastTime}}onUpdate(){var e=64,t=Date.now();t>this._lastTime+e&&(t=this._lastTime+e);var r=(t-this._lastTime)/1e3;this._frameTime+=r;var s=this._damping,n=this._mass,a=this._stiffness,o=-this._initialVelocity,l=s/(2*Math.sqrt(a*n)),c=Math.sqrt(a/n),u=c*Math.sqrt(1-l*l),h=this._toValue-this._startPosition,d=0,m=0,p=this._frameTime;if(l<1){var y=Math.exp(-l*c*p);d=this._toValue-y*((o+l*c*h)/u*Math.sin(u*p)+h*Math.cos(u*p)),m=l*c*y*(Math.sin(u*p)*(o+l*c*h)/u+h*Math.cos(u*p))-y*(Math.cos(u*p)*(o+l*c*h)-u*h*Math.sin(u*p))}else{var v=Math.exp(-c*p);d=this._toValue-v*(h+(o+c*h)*p),m=v*(o*(p*c-1)+p*h*(c*c))}if(this._lastTime=t,this._lastPosition=d,this._lastVelocity=m,this._onUpdate(d),!!this.__active){var b=!1;this._overshootClamping&&this._stiffness!==0&&(this._startPosition<this._toValue?b=d>this._toValue:b=d<this._toValue);var E=Math.abs(m)<=this._restSpeedThreshold,w=!0;if(this._stiffness!==0&&(w=Math.abs(this._toValue-d)<=this._restDisplacementThreshold),b||E&&w){this._stiffness!==0&&(this._lastPosition=this._toValue,this._lastVelocity=0,this._onUpdate(this._toValue)),this.__debouncedOnEnd({finished:!0});return}this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))}}stop(){super.stop(),this.__active=!1,clearTimeout(this._timeout),global.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}var pl=4,ml=.001,gl=1e-7,_l=10,Ot=11,er=1/(Ot-1),vl=typeof Float32Array=="function";function tn(i,e){return 1-3*e+3*i}function rn(i,e){return 3*e-6*i}function sn(i){return 3*i}function _r(i,e,t){return((tn(e,t)*i+rn(e,t))*i+sn(e))*i}function nn(i,e,t){return 3*tn(e,t)*i*i+2*rn(e,t)*i+sn(e)}function yl(i,e,t,r,s){var n,a,o=0,l=e,c=t;do a=l+(c-l)/2,n=_r(a,r,s)-i,n>0?c=a:l=a;while(Math.abs(n)>gl&&++o<_l);return a}function wl(i,e,t,r){for(var s=e,n=0;n<pl;++n){var a=nn(s,t,r);if(a===0)return s;var o=_r(s,t,r)-i;s-=o/a}return s}function bl(i,e,t,r){if(!(i>=0&&i<=1&&t>=0&&t<=1))throw new Error("bezier x values must be in [0, 1] range");var s=vl?new Float32Array(Ot):new Array(Ot);if(i!==e||t!==r)for(var n=0;n<Ot;++n)s[n]=_r(n*er,i,t);function a(o){for(var l=0,c=1,u=Ot-1;c!==u&&s[c]<=o;++c)l+=er;--c;var h=(o-s[c])/(s[c+1]-s[c]),d=l+h*er,m=nn(d,i,t);return m>=ml?wl(o,d,i,t):m===0?d:yl(o,l,l+er,i,t)}return function(l){return i===e&&t===r?l:l===0?0:l===1?1:_r(a(l),e,r)}}var Wr;class Re{static step0(e){return e>0?1:0}static step1(e){return e>=1?1:0}static linear(e){return e}static ease(e){return Wr||(Wr=Re.bezier(.42,0,1,1)),Wr(e)}static quad(e){return e*e}static cubic(e){return e*e*e}static poly(e){return t=>Math.pow(t,e)}static sin(e){return 1-Math.cos(e*Math.PI/2)}static circle(e){return 1-Math.sqrt(1-e*e)}static exp(e){return Math.pow(2,10*(e-1))}static elastic(e){e===void 0&&(e=1);var t=e*Math.PI;return r=>1-Math.pow(Math.cos(r*Math.PI/2),3)*Math.cos(r*t)}static back(e){return e===void 0&&(e=1.70158),t=>t*t*((e+1)*t-e)}static bounce(e){if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){var t=e-.5454545454545454;return 7.5625*t*t+.75}if(e<2.5/2.75){var r=e-.8181818181818182;return 7.5625*r*r+.9375}var s=e-2.625/2.75;return 7.5625*s*s+.984375}static bezier(e,t,r,s){return bl(e,t,r,s)}static in(e){return e}static out(e){return t=>1-e(1-t)}static inOut(e){return t=>t<.5?e(t*2)/2:1-e((1-t)*2)/2}}var Kr;function Sl(){return Kr||(Kr=Re.inOut(Re.ease)),Kr}class ds extends Ti{constructor(e){var t,r,s,n,a;super(),this._toValue=e.toValue,this._easing=(t=e.easing)!==null&&t!==void 0?t:Sl(),this._duration=(r=e.duration)!==null&&r!==void 0?r:500,this._delay=(s=e.delay)!==null&&s!==void 0?s:0,this.__iterations=(n=e.iterations)!==null&&n!==void 0?n:1,this._useNativeDriver=bt(e),this._platformConfig=e.platformConfig,this.__isInteraction=(a=e.isInteraction)!==null&&a!==void 0?a:!this._useNativeDriver}__getNativeAnimationConfig(){for(var e=16.666666666666668,t=[],r=Math.round(this._duration/e),s=0;s<r;s++)t.push(this._easing(s/r));return t.push(this._easing(1)),{type:"frames",frames:t,toValue:this._toValue,iterations:this.__iterations,platformConfig:this._platformConfig}}start(e,t,r,s,n){this.__active=!0,this._fromValue=e,this._onUpdate=t,this.__onEnd=r;var a=()=>{this._duration===0&&!this._useNativeDriver?(this._onUpdate(this._toValue),this.__debouncedOnEnd({finished:!0})):(this._startTime=Date.now(),this._useNativeDriver?this.__startNativeAnimation(n):this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this)))};this._delay?this._timeout=setTimeout(a,this._delay):a()}onUpdate(){var e=Date.now();if(e>=this._startTime+this._duration){this._duration===0?this._onUpdate(this._toValue):this._onUpdate(this._fromValue+this._easing(1)*(this._toValue-this._fromValue)),this.__debouncedOnEnd({finished:!0});return}this._onUpdate(this._fromValue+this._easing((e-this._startTime)/this._duration)*(this._toValue-this._fromValue)),this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this)))}stop(){super.stop(),this.__active=!1,clearTimeout(this._timeout),global.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}var El=function(e,t){return new tl(e,t)},Cl=function(e,t){return new al(e,t)},Tl=function(e,t){return new il(e,t)},kl=function(e,t){return new nl(e,t)},Al=function(e,t){return new sl(e,t)},Rl=function(e,t,r){return new rl(e,t,r)},Ai=function(e,t){return e&&t.onComplete?function(){t.onComplete&&t.onComplete(...arguments),e&&e(...arguments)}:e||t.onComplete},Ri=function(e,t,r){if(e instanceof Ci){var s=T({},t),n=T({},t);for(var a in t){var o=t[a],l=o.x,c=o.y;l!==void 0&&c!==void 0&&(s[a]=l,n[a]=c)}var u=r(e.x,s),h=r(e.y,n);return vr([u,h],{stopTogether:!1})}else if(e instanceof ki){var d=T({},t),m=T({},t),p=T({},t),y=T({},t);for(var v in t){var b=t[v],E=b.r,w=b.g,k=b.b,A=b.a;E!==void 0&&w!==void 0&&k!==void 0&&A!==void 0&&(d[v]=E,m[v]=w,p[v]=k,y[v]=A)}var S=r(e.r,d),x=r(e.g,m),F=r(e.b,p),Y=r(e.a,y);return vr([S,x,F,Y],{stopTogether:!1})}return null},Il=function i(e,t){var r=function(n,a,o){o=Ai(o,a);var l=n,c=a;l.stopTracking(),a.toValue instanceof B?l.track(new Xs(l,a.toValue,gr,c,o)):l.animate(new gr(c),o)};return Ri(e,t,i)||{start:function(n){r(e,t,n)},stop:function(){e.stopAnimation()},reset:function(){e.resetAnimation()},_startNativeLoop:function(n){var a=T(T({},t),{},{iterations:n});r(e,a)},_isUsingNativeDriver:function(){return t.useNativeDriver||!1}}},an=function i(e,t){var r=function(n,a,o){o=Ai(o,a);var l=n,c=a;l.stopTracking(),a.toValue instanceof B?l.track(new Xs(l,a.toValue,ds,c,o)):l.animate(new ds(c),o)};return Ri(e,t,i)||{start:function(n){r(e,t,n)},stop:function(){e.stopAnimation()},reset:function(){e.resetAnimation()},_startNativeLoop:function(n){var a=T(T({},t),{},{iterations:n});r(e,a)},_isUsingNativeDriver:function(){return t.useNativeDriver||!1}}},xl=function i(e,t){var r=function(n,a,o){o=Ai(o,a);var l=n,c=a;l.stopTracking(),l.animate(new ll(c),o)};return Ri(e,t,i)||{start:function(n){r(e,t,n)},stop:function(){e.stopAnimation()},reset:function(){e.resetAnimation()},_startNativeLoop:function(n){var a=T(T({},t),{},{iterations:n});r(e,a)},_isUsingNativeDriver:function(){return t.useNativeDriver||!1}}},on=function(e){var t=0;return{start:function(s){var n=function a(o){if(!o.finished){s&&s(o);return}if(t++,t===e.length){s&&s(o);return}e[t].start(a)};e.length===0?s&&s({finished:!0}):e[t].start(n)},stop:function(){t<e.length&&e[t].stop()},reset:function(){e.forEach((s,n)=>{n<=t&&s.reset()}),t=0},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.sequence animations")},_isUsingNativeDriver:function(){return!1}}},vr=function(e,t){var r=0,s={},n=!(t&&t.stopTogether===!1),a={start:function(l){if(r===e.length){l&&l({finished:!0});return}e.forEach((c,u)=>{var h=function(m){if(s[u]=!0,r++,r===e.length){r=0,l&&l(m);return}!m.finished&&n&&a.stop()};c?c.start(h):h({finished:!0})})},stop:function(){e.forEach((l,c)=>{!s[c]&&l.stop(),s[c]=!0})},reset:function(){e.forEach((l,c)=>{l.reset(),s[c]=!1,r=0})},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.parallel animations")},_isUsingNativeDriver:function(){return!1}};return a},ln=function(e){return an(new W(0),{toValue:0,delay:e,duration:0,useNativeDriver:!1})},Ol=function(e,t){return vr(t.map((r,s)=>on([ln(e*s),r])))},Ll=function(e,t){var r=t===void 0?{}:t,s=r.iterations,n=s===void 0?-1:s,a=r.resetBeforeIteration,o=a===void 0?!0:a,l=!1,c=0;return{start:function(h){var d=function m(p){p===void 0&&(p={finished:!0}),l||c===n||p.finished===!1?h&&h(p):(c++,o&&e.reset(),e.start(m))};!e||n===0?h&&h({finished:!0}):e._isUsingNativeDriver()?e._startNativeLoop(n):d()},stop:function(){l=!0,e.stop()},reset:function(){c=0,l=!1,e.reset()},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.loop animations")},_isUsingNativeDriver:function(){return e._isUsingNativeDriver()}}};function Nl(i,e){return i?i instanceof it?(i.__addListener(e),i):function(){typeof i=="function"&&i(...arguments),e(...arguments)}:e}function Pl(i,e){i&&i instanceof it&&i.__removeListener(e)}var Fl=function(e,t){var r=new it(e,t);return r.__isNative?r:r.__getHandler()};const Ce={Value:W,ValueXY:Ci,Color:ki,Interpolation:ve,Node:B,decay:xl,timing:an,spring:Il,add:El,subtract:Cl,divide:Tl,multiply:kl,modulo:Al,diffClamp:Rl,delay:ln,sequence:on,parallel:vr,stagger:Ol,loop:Ll,event:Fl,createAnimatedComponent:qe,attachNativeEvent:Ei,forkEvent:Nl,unforkEvent:Pl,Event:it};var Gr=!1;function Ii(i){return e=>{var t=e==null?e:function(){if(Gr){console.warn("Ignoring recursive animation callback when running mock animations");return}Gr=!0;try{e(...arguments)}finally{Gr=!1}};i(t)}}var St={start:()=>{},stop:()=>{},reset:()=>{},_startNativeLoop:()=>{},_isUsingNativeDriver:()=>!1},xi=i=>T(T({},St),{},{start:Ii(e=>{i.forEach(t=>t.start()),e==null||e({finished:!0})})}),Vl=function(e,t){var r=e;return T(T({},St),{},{start:Ii(s=>{r.setValue(t.toValue),s==null||s({finished:!0})})})},jl=function(e,t){var r=e;return T(T({},St),{},{start:Ii(s=>{r.setValue(t.toValue),s==null||s({finished:!0})})})},Ml=function(e,t){return St},Dl=function(e){return xi(e)},$l=function(e,t){return xi(e)},Ul=function(e){return St},Bl=function(e,t){return xi(t)},zl=function(e,t){var r=t===void 0?{}:t;return r.iterations,St};const ql={Value:W,ValueXY:Ci,Color:ki,Interpolation:ve,Node:B,decay:Ml,timing:jl,spring:Vl,add:Ce.add,subtract:Ce.subtract,divide:Ce.divide,multiply:Ce.multiply,modulo:Ce.modulo,diffClamp:Ce.diffClamp,delay:Ul,sequence:Dl,parallel:$l,stagger:Bl,loop:zl,event:Ce.event,createAnimatedComponent:qe,attachNativeEvent:Ei,forkEvent:Ce.forkEvent,unforkEvent:Ce.unforkEvent,Event:it};var Hl=he.isTesting?ql:Ce;const _=T({FlatList:Oo,Image:zo,ScrollView:Ho,SectionList:Xo,Text:Zo,View:el},Hl);var Wl=["style"],tr=function(){return wt&&window.CSS&&window.CSS.supports&&window.CSS.supports("top: constant(safe-area-inset-top)")?"constant":"env"}(),Oi=g.forwardRef((i,e)=>{var t=i.style,r=Pe(i,Wl);return g.createElement(R,te({},r,{ref:e,style:[Kl.root,t]}))});Oi.displayName="SafeAreaView";var Kl=G.create({root:{paddingTop:tr+"(safe-area-inset-top)",paddingRight:tr+"(safe-area-inset-right)",paddingBottom:tr+"(safe-area-inset-bottom)",paddingLeft:tr+"(safe-area-inset-left)"}});const ee=({children:i,style:e})=>f.createElement(R,{style:e},i),cn=({size:i=16,color:e="currentColor",style:t})=>f.createElement("span",{"aria-hidden":"true",style:{display:"inline-block",width:i,height:i,color:e,...t}},"★"),me=cn,Qe=cn,Gl={};var un={};__DEV__&&typeof un.EXPO_OS>"u"&&console.warn("The global process.env.EXPO_OS is not defined. This should be inlined by babel-preset-expo during transformation.");const Jl={OS:un.EXPO_OS||he.OS};class Yl extends Error{constructor(e,t){super(t),this.code=e}}function Ql(){if(!globalThis.expo)try{he.OS==="web"&&void 0}catch(i){console.error(`Unable to install Expo modules: ${i}`)}}class Li extends Yl{constructor(e,t){super("ERR_UNAVAILABLE",`The method or property ${e}.${t} is not available on ${Jl.OS}, are you sure you've linked all the native dependencies properly?`)}}function Xl(i){var e,t;return Ql(),((t=(e=globalThis.expo)==null?void 0:e.modules)==null?void 0:t[i])??Gl[i]??null}const ge=Xl("ExpoHaptics");var Be=(i=>(i.Success="success",i.Warning="warning",i.Error="error",i))(Be||{}),ce=(i=>(i.Light="light",i.Medium="medium",i.Heavy="heavy",i.Soft="soft",i.Rigid="rigid",i))(ce||{});async function yr(i=Be.Success){if(!(ge!=null&&ge.notificationAsync))throw new Li("Haptics","notificationAsync");await ge.notificationAsync(i)}async function gt(i=ce.Medium){if(!(ge!=null&&ge.impactAsync))throw new Li("Haptic","impactAsync");await ge.impactAsync(i)}async function Zl(){if(!(ge!=null&&ge.selectionAsync))throw new Li("Haptic","selectionAsync");await ge.selectionAsync()}const L={primary:{500:"#0ea5e9",600:"#0284c7",700:"#0369a1"},accent:{teal:"#0d9488",slate:"#475569"},semantic:{success:"#059669",warning:"#d97706",error:"#dc2626"},gradients:{dark:["#0f172a","#1e293b"]}};he.select({ios:"System",android:"Roboto",default:"System"}),he.select({ios:"System",android:"Roboto-Medium",default:"System"}),he.select({ios:"System",android:"Roboto-Medium",default:"System"}),he.select({ios:"System",android:"Roboto-Bold",default:"System"}),he.select({ios:"Menlo",android:"monospace",default:"monospace"});const{width:cr,height:Jr}=ze.get("window"),ec=768;function tc({onEmailLogin:i,onGoogleLogin:e,onGitHubLogin:t,onDemoLogin:r,onSignup:s}){const n=g.useRef(new _.Value(0)).current,a=g.useRef(new _.Value(50)).current,o=g.useRef(new _.Value(.9)).current,l=g.useRef(new _.Value(1)).current,c=g.useRef(new _.Value(0)).current,u=g.useRef(new _.Value(0)).current,h=g.useRef(new _.Value(0)).current,d=g.useRef(new _.Value(0)).current,m=g.useRef(new _.Value(0)).current,p=g.useRef(new _.Value(0)).current,[y,v]=g.useState(null),[b,E]=g.useState(null);g.useEffect(()=>{const A=[_.timing(n,{toValue:1,duration:1500,useNativeDriver:!0}),_.timing(a,{toValue:0,duration:1200,useNativeDriver:!0}),_.timing(o,{toValue:1,duration:1200,useNativeDriver:!0}),_.timing(u,{toValue:1,duration:1800,useNativeDriver:!0}),_.timing(h,{toValue:1,duration:2500,useNativeDriver:!0}),_.timing(m,{toValue:1,duration:2e3,useNativeDriver:!0})];_.parallel(A).start(),_.loop(_.timing(c,{toValue:1,duration:5e3,useNativeDriver:!0})).start(),_.loop(_.sequence([_.timing(d,{toValue:1,duration:2500,useNativeDriver:!0}),_.timing(d,{toValue:0,duration:2500,useNativeDriver:!0})])).start(),_.loop(_.sequence([_.timing(l,{toValue:1.15,duration:2500,useNativeDriver:!0}),_.timing(l,{toValue:1,duration:2500,useNativeDriver:!0})])).start(),_.loop(_.sequence([_.timing(p,{toValue:1,duration:3e3,useNativeDriver:!0}),_.timing(p,{toValue:0,duration:3e3,useNativeDriver:!0})])).start()},[]);const w=(A,S)=>{gt(ce.Heavy),v(A),setTimeout(()=>{v(null),S==null||S()},200)},k=[{id:"email",title:"Continue with Email",icon:"email",gradient:[L.primary[500],L.primary[700]],onPress:i,color:"#FFFFFF"},{id:"google",title:"Continue with Google",icon:"google",gradient:["#dc2626","#b91c1c"],onPress:e,color:"#FFFFFF"},{id:"github",title:"Continue with GitHub",icon:"github",gradient:["#475569","#334155"],onPress:t,color:"#FFFFFF"},{id:"demo",title:"🚀 Quick Start Demo",icon:"rocket-launch",gradient:["#059669","#047857"],onPress:r,color:"#FFFFFF",special:!0}];return f.createElement(R,{style:D.container},f.createElement(ee,{colors:L.gradients.dark,start:{x:0,y:0},end:{x:1,y:1},style:G.absoluteFillObject}),f.createElement(_.View,{style:[D.particlesContainer,{opacity:c}]},[...Array(40)].map((A,S)=>f.createElement(_.View,{key:S,style:[D.particle,{left:Math.random()*cr,top:Math.random()*Jr,backgroundColor:["#ffffff40","#4f46e530","#7c3aed30","#1d4ed830","#0d948830","#47556930","#dc262630","#05966930"][S%8],width:Math.random()*8+4,height:Math.random()*8+4,borderRadius:(Math.random()*8+4)/2}]}))),f.createElement(_.View,{style:[D.sparkleContainer,{opacity:d}]},[...Array(20)].map((A,S)=>f.createElement(_.View,{key:S,style:[D.sparkle,{left:Math.random()*cr,top:Math.random()*Jr}]},["✨","⭐","💫","🌟","⚡","🔥","💎","🎯"][S%8]))),f.createElement(_.View,{style:[D.glowContainer,{opacity:h}]},f.createElement(R,{style:D.glowEffect}),f.createElement(R,{style:[D.glowEffect,{top:"60%",left:"60%"}]})),f.createElement(_.View,{style:[D.floatingContainer,{opacity:p}]},[...Array(8)].map((A,S)=>f.createElement(_.View,{key:S,style:[D.floatingElement,{left:Math.random()*cr,top:Math.random()*Jr,transform:[{translateY:p.interpolate({inputRange:[0,1],outputRange:[0,-20]})}]}]},["🎮","🏆","🚀","💡","🎯","🔥","⭐","💎"][S%8]))),f.createElement(Oi,{style:D.safeArea},f.createElement(R,{style:D.content},f.createElement(_.View,{style:[D.logoSection,{opacity:u,transform:[{scale:u},{translateY:u.interpolate({inputRange:[0,1],outputRange:[30,0]})}]}]},f.createElement(_.View,{style:[D.logoContainer,{transform:[{scale:l}]}]},f.createElement(ee,{colors:[L.primary[600],L.primary[700]],style:D.logo},f.createElement(Qe,{name:"brain",size:80,color:"#FFFFFF"})),f.createElement(R,{style:D.logoGlow})),f.createElement(O,{style:D.appTitle},"QuizMentor"),f.createElement(O,{style:D.appSubtitle},"Level up your knowledge"),f.createElement(O,{style:D.appTagline},"Epic Gaming Experience for Developers")),f.createElement(_.View,{style:[D.authSection,{opacity:m,transform:[{translateY:m.interpolate({inputRange:[0,1],outputRange:[50,0]})}]}]},f.createElement(O,{style:D.authTitle},"Choose Your Adventure"),f.createElement(O,{style:D.authSubtitle},"Pick your preferred way to start learning"),f.createElement(R,{style:D.authButtons},k.map((A,S)=>f.createElement(le,{key:A.id,onPress:()=>w(A.id,A.onPress),activeOpacity:.8,style:[D.authButton,y===A.id&&D.authButtonPressed,A.special&&D.specialButton]},f.createElement(ee,{colors:A.gradient,style:D.authButtonGradient},f.createElement(Qe,{name:A.icon,size:24,color:A.color}),f.createElement(O,{style:D.authButtonText},A.title),A.special&&f.createElement(_.View,{style:D.specialGlow},f.createElement(O,{style:D.specialGlowText},"⚡")))))),f.createElement(le,{style:D.signupLink,onPress:s,activeOpacity:.8},f.createElement(O,{style:D.signupText},"Don't have an account? ",f.createElement(O,{style:D.signupHighlight},"Sign up")))))))}const D=G.create({container:{flex:1},safeArea:{flex:1},content:{flex:1,paddingHorizontal:Math.max(20,(cr-ec)/2),justifyContent:"space-between",paddingTop:60,paddingBottom:40},particlesContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},particle:{position:"absolute",opacity:.8},sparkleContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},sparkle:{position:"absolute",opacity:.9},glowContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},glowEffect:{position:"absolute",top:"20%",left:"20%",right:"20%",bottom:"20%",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:200,shadowColor:"#FFFFFF",shadowOffset:{width:0,height:0},shadowOpacity:.6,shadowRadius:120},floatingContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},floatingElement:{position:"absolute",fontSize:24,opacity:.8},logoSection:{alignItems:"center",marginBottom:40},logoContainer:{marginBottom:20,position:"relative"},logo:{width:120,height:120,borderRadius:60,alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:8},shadowOpacity:.4,shadowRadius:16,elevation:12},logoGlow:{position:"absolute",top:-10,left:-10,right:-10,bottom:-10,borderRadius:70,backgroundColor:"rgba(255,255,255,0.2)",shadowColor:"#FFFFFF",shadowOffset:{width:0,height:0},shadowOpacity:.8,shadowRadius:20},appTitle:{fontSize:36,fontWeight:"bold",color:"#FFFFFF",marginBottom:8,textShadowColor:"rgba(0,0,0,0.3)",textShadowOffset:{width:0,height:2},textShadowRadius:4},appSubtitle:{fontSize:18,color:"rgba(255,255,255,0.8)",textAlign:"center",marginBottom:4},appTagline:{fontSize:14,color:"rgba(255,255,255,0.6)",textAlign:"center",fontStyle:"italic"},authSection:{alignItems:"center"},authTitle:{fontSize:28,fontWeight:"bold",color:"#FFFFFF",textAlign:"center",marginBottom:8},authSubtitle:{fontSize:16,color:"rgba(255,255,255,0.7)",textAlign:"center",marginBottom:30},authButtons:{width:"100%",maxWidth:400,gap:16,marginBottom:30},authButton:{borderRadius:25,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:6},shadowOpacity:.3,shadowRadius:12,elevation:8},authButtonPressed:{transform:[{scale:.95}]},specialButton:{shadowColor:"#FFD700",shadowOffset:{width:0,height:8},shadowOpacity:.5,shadowRadius:16,elevation:12},authButtonGradient:{flexDirection:"row",alignItems:"center",paddingVertical:18,paddingHorizontal:24,position:"relative"},authButtonText:{fontSize:16,fontWeight:"600",color:"#FFFFFF",marginLeft:12,flex:1},specialGlow:{position:"absolute",top:-5,right:-5,backgroundColor:"rgba(255,255,255,0.9)",borderRadius:15,width:30,height:30,alignItems:"center",justifyContent:"center"},specialGlowText:{fontSize:16},signupLink:{paddingVertical:12,paddingHorizontal:24},signupText:{fontSize:16,color:"rgba(255,255,255,0.8)",textAlign:"center"},signupHighlight:{color:L.primary[500],fontWeight:"bold"}}),rc=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>zt(async()=>{const{default:r}=await Promise.resolve().then(()=>Et);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ni extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ic extends Ni{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fs extends Ni{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ps extends Ni{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var oi;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(oi||(oi={}));var sc=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};class nc{constructor(e,{headers:t={},customFetch:r,region:s=oi.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=rc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return sc(this,void 0,void 0,function*(){try{const{headers:s,method:n,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const h=yield this.fetch(c.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(y=>{throw new ic(y)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new fs(h);if(!h.ok)throw new ps(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof ps||s instanceof fs?s.context:void 0}}})}}var ue={},Pi={},Ar={},qt={},Rr={},Ir={},ac=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_t=ac();const oc=_t.fetch,hn=_t.fetch.bind(_t),dn=_t.Headers,lc=_t.Request,cc=_t.Response,Et=Object.freeze(Object.defineProperty({__proto__:null,Headers:dn,Request:lc,Response:cc,default:hn,fetch:oc},Symbol.toStringTag,{value:"Module"})),uc=qn(Et);var xr={};Object.defineProperty(xr,"__esModule",{value:!0});let hc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xr.default=hc;var fn=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ir,"__esModule",{value:!0});const dc=fn(uc),fc=fn(xr);let pc=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=dc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,l,c;let u=null,h=null,d=null,m=n.status,p=n.statusText;if(n.ok){if(this.method!=="HEAD"){const E=await n.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=E:h=JSON.parse(E))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=n.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await n.text();try{u=JSON.parse(v),Array.isArray(u)&&n.status===404&&(h=[],u=null,m=200,p="OK")}catch{n.status===404&&v===""?(m=204,p="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&this.shouldThrowOnError)throw new fc.default(u)}return{error:u,data:h,count:d,status:m,statusText:p}});return this.shouldThrowOnError||(s=s.catch(n=>{var a,o,l;return{error:{message:`${(a=n==null?void 0:n.name)!==null&&a!==void 0?a:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(o=n==null?void 0:n.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=n==null?void 0:n.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Ir.default=pc;var mc=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rr,"__esModule",{value:!0});const gc=mc(Ir);let _c=class extends gc.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Rr.default=_c;var vc=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qt,"__esModule",{value:!0});const yc=vc(Rr);let wc=class extends yc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};qt.default=wc;var bc=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ar,"__esModule",{value:!0});const xt=bc(qt);let Sc=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let n=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new xt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new xt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new xt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Ar.default=Sc;var pn=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pi,"__esModule",{value:!0});const Ec=pn(Ar),Cc=pn(qt);let Tc=class mn{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Ec.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:n}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(o="POST",c=t);const u=new Headers(this.headers);return n&&u.set("Prefer",`count=${n}`),new Cc.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Pi.default=Tc;var Ct=pe&&pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ue,"__esModule",{value:!0});ue.PostgrestError=ue.PostgrestBuilder=ue.PostgrestTransformBuilder=ue.PostgrestFilterBuilder=ue.PostgrestQueryBuilder=ue.PostgrestClient=void 0;const gn=Ct(Pi);ue.PostgrestClient=gn.default;const _n=Ct(Ar);ue.PostgrestQueryBuilder=_n.default;const vn=Ct(qt);ue.PostgrestFilterBuilder=vn.default;const yn=Ct(Rr);ue.PostgrestTransformBuilder=yn.default;const wn=Ct(Ir);ue.PostgrestBuilder=wn.default;const bn=Ct(xr);ue.PostgrestError=bn.default;var kc=ue.default={PostgrestClient:gn.default,PostgrestQueryBuilder:_n.default,PostgrestFilterBuilder:vn.default,PostgrestTransformBuilder:yn.default,PostgrestBuilder:wn.default,PostgrestError:bn.default};const{PostgrestClient:Ac,PostgrestQueryBuilder:ad,PostgrestFilterBuilder:od,PostgrestTransformBuilder:ld,PostgrestBuilder:cd,PostgrestError:ud}=kc;class Rc{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ic="2.15.1",xc=`realtime-js/${Ic}`,Oc="1.0.0",li=1e4,Lc=1e3,Nc=100;var Vt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Vt||(Vt={}));var X;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(X||(X={}));var Ee;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ee||(Ee={}));var ci;(function(i){i.websocket="websocket"})(ci||(ci={}));var Xe;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xe||(Xe={}));class Pc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+n));a=a+n;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Sn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(q||(q={}));const ms=(i,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,a)=>(n[a]=Fc(a,i,e,s),n),{})},Fc=(i,e,t,r)=>{const s=e.find(o=>o.name===i),n=s==null?void 0:s.type,a=t[i];return n&&!r.includes(n)?En(n,a):ui(a)},En=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return Dc(e,t)}switch(i){case q.bool:return Vc(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return jc(e);case q.json:case q.jsonb:return Mc(e);case q.timestamp:return $c(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return ui(e);default:return ui(e)}},ui=i=>i,Vc=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},jc=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Mc=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Dc=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let n;const a=i.slice(1,t);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>En(e,o))}return i},$c=i=>typeof i=="string"?i.replace(" ","T"):i,Cn=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Yr{constructor(e,t,r={},s=li){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gs;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(gs||(gs={}));class jt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jt.syncState(this.state,s,n,a),this.pendingDiffs.forEach(l=>{this.state=jt.syncDiff(this.state,l,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jt.syncDiff(this.state,s,n,a),o())}),this.onJoin((s,n,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:n,newPresences:a})}),this.onLeave((s,n,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(n,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const h=n[c];if(h){const d=u.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),p=u.filter(v=>m.indexOf(v.presence_ref)<0),y=h.filter(v=>d.indexOf(v.presence_ref)<0);p.length>0&&(o[c]=p),y.length>0&&(l[c]=y)}else o[c]=u}),this.syncDiff(n,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const h=e[o].map(m=>m.presence_ref),d=u.filter(m=>h.indexOf(m.presence_ref)<0);e[o].unshift(...d)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _s;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(_s||(_s={}));var Mt;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Mt||(Mt={}));var Ne;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ne||(Ne={}));class Fi{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Yr(this,Ee.join,this.params,this.timeout),this.rejoinTimer=new Sn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ee.reply,{},(s,n)=>{this._trigger(this._replyEventName(n),s)}),this.presence=new jt(this),this.broadcastEndpointURL=Cn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==X.closed){const{config:{broadcast:n,presence:a,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Mt.PRESENCE]&&this.bindings[Mt.PRESENCE].length>0,u={},h={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(Ne.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ne.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var m;if(this.socket.setAuth(),d===void 0){e==null||e(Ne.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(m=p==null?void 0:p.length)!==null&&m!==void 0?m:0,v=[];for(let b=0;b<y;b++){const E=p[b],{filter:{event:w,schema:k,table:A,filter:S}}=E,x=d&&d[b];if(x&&x.event===w&&x.schema===k&&x.table===A&&x.filter===S)v.push(Object.assign(Object.assign({},E),{id:x.id}));else{this.unsubscribe(),this.state=X.errored,e==null||e(Ne.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ne.SUBSCRIBED);return}}).receive("error",d=>{this.state=X.errored,e==null||e(Ne.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ne.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===X.joined&&e===Mt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&n("ok"),c.receive("ok",()=>n("ok")),c.receive("error",()=>n("error")),c.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ee.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Yr(this,Ee.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=X.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Yr(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Nc){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Ee;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,y,v;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(m=>m.callback(d,r)):(n=this.bindings[a])===null||n===void 0||n.filter(m=>{var p,y,v,b,E,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const k=m.id,A=(p=m.filter)===null||p===void 0?void 0:p.event;return k&&((y=t.ids)===null||y===void 0?void 0:y.includes(k))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(E=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return k==="*"||k===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:y,table:v,commit_timestamp:b,type:E,errors:w}=p;d=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:b,eventType:E,new:{},old:{},errors:w}),this._getPayloadRecords(p))}m.callback(d,r)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var n;return!(((n=s.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&Fi.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ee.close,{},e)}_onError(e){this._on(Ee.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ms(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ms(e.columns,e.old_record)),t}}const vs=()=>{},rr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Uc=[1e3,2e3,5e3,1e4],Bc=1e4,zc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qc{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=li,this.transport=null,this.heartbeatIntervalMs=rr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vs,this.ref=0,this.reconnectTimer=null,this.logger=vs,this.conn=null,this.sendBuffer=[],this.serializer=new Pc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...a)=>zt(async()=>{const{default:o}=await Promise.resolve().then(()=>Et);return{default:o}},void 0,import.meta.url).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):n=fetch,(...a)=>n(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ci.websocket}`,this.httpEndpoint=Cn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Rc.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Oc}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return Xe.Connecting;case Vt.open:return Xe.Open;case Vt.closing:return Xe.Closing;default:return Xe.Closed}}isConnected(){return this.connectionState()===Xe.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(n=>n.topic===r);if(s)return s;{const n=new Fi(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Lc,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},rr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:n,ref:a}=t,o=a?`(${a})`:"",l=n.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),n),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,n,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ee.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([zc],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:xc};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ee.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Sn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,o,l,c;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:li,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:rr.HEARTBEAT_INTERVAL,this.worker=(n=e==null?void 0:e.worker)!==null&&n!==void 0?n:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:u=>Uc[u-1]||Bc,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Hc extends Vi{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hi extends Vi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Wc=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};const Tn=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>zt(async()=>{const{default:r}=await Promise.resolve().then(()=>Et);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Kc=()=>Wc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zt(()=>Promise.resolve().then(()=>Et),void 0,import.meta.url)).Response:Response}),di=i=>{if(Array.isArray(i))return i.map(t=>di(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[s]=di(r)}),e},Gc=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var st=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};const Qr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Jc=(i,e,t)=>st(void 0,void 0,void 0,function*(){const r=yield Kc();i instanceof r&&!(t!=null&&t.noResolveJson)?i.json().then(s=>{const n=i.status||500,a=(s==null?void 0:s.statusCode)||n+"";e(new Hc(Qr(s),n,a))}).catch(s=>{e(new hi(Qr(s),s))}):e(new hi(Qr(i),i))}),Yc=(i,e,t,r)=>{const s={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?s:(Gc(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Ht(i,e,t,r,s,n){return st(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,Yc(e,r,s,n)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Jc(l,o,r))})})}function wr(i,e,t,r){return st(this,void 0,void 0,function*(){return Ht(i,"GET",e,t,r)})}function Te(i,e,t,r,s){return st(this,void 0,void 0,function*(){return Ht(i,"POST",e,r,s,t)})}function fi(i,e,t,r,s){return st(this,void 0,void 0,function*(){return Ht(i,"PUT",e,r,s,t)})}function Qc(i,e,t,r){return st(this,void 0,void 0,function*(){return Ht(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function kn(i,e,t,r,s){return st(this,void 0,void 0,function*(){return Ht(i,"DELETE",e,r,s,t)})}var oe=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};const Xc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ys={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zc{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tn(s)}uploadOrUpdate(e,t,r,s){return oe(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},ys),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),h=yield(e=="PUT"?fi:Te)(this.fetch,`${this.url}/object/${u}`,n,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}upload(e,t,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return oe(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:ys.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield fi(this.fetch,o.toString(),l,{headers:u});return{data:{path:n,fullPath:h.Key},error:null}}catch(l){if(Z(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const n=yield Te(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Vi("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}update(e,t,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return oe(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}copy(e,t,r){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Te(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield Te(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return oe(this,void 0,void 0,function*(){try{const s=yield Te(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}download(e,t){return oe(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield wr(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Z(o))return{data:null,error:o};throw o}})}info(e){return oe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield wr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:di(r),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}exists(e){return oe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Qc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Z(r)&&r instanceof hi){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}list(e,t,r){return oe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Xc),t),{prefix:e||""});return{data:yield Te(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}listV2(e,t){return oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Te(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const eu="2.11.0",tu={"X-Client-Info":`storage-js/${eu}`};var ot=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};class ru{constructor(e,t={},r,s){const n=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href,this.headers=Object.assign(Object.assign({},tu),t),this.fetch=Tn(r)}listBuckets(){return ot(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ot(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ot(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}}class iu extends ru{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new Zc(this.url,this.headers,e,this.fetch)}}const su="2.56.0";let Lt="";typeof Deno<"u"?Lt="deno":typeof document<"u"?Lt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lt="react-native":Lt="node";const nu={"X-Client-Info":`supabase-js-${Lt}/${su}`},au={headers:nu},ou={schema:"public"},lu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cu={};var uu=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};const hu=i=>{let e;return i?e=i:typeof fetch>"u"?e=hn:e=fetch,(...t)=>e(...t)},du=()=>typeof Headers>"u"?dn:Headers,fu=(i,e,t)=>{const r=hu(t),s=du();return(n,a)=>uu(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:i;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",i),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},a),{headers:c}))})};var pu=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};function mu(i){return i.endsWith("/")?i:i+"/"}function gu(i,e){var t,r;const{db:s,auth:n,realtime:a,global:o}=i,{db:l,auth:c,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>pu(this,void 0,void 0,function*(){return""})};return i.accessToken?d.accessToken=i.accessToken:delete d.accessToken,d}const An="2.71.1",ft=30*1e3,pi=3,Xr=pi*ft,_u="http://localhost:9999",vu="supabase.auth.token",yu={"X-Client-Info":`gotrue-js/${An}`},mi="X-Supabase-Api-Version",Rn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bu=10*60*1e3;class ji extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function N(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Su extends ji{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Eu(i){return N(i)&&i.name==="AuthApiError"}class In extends ji{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends ji{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class De extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cu(i){return N(i)&&i.name==="AuthSessionMissingError"}class ir extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sr extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nr extends He{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tu(i){return N(i)&&i.name==="AuthImplicitGrantRedirectError"}class ws extends He{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gi extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zr(i){return N(i)&&i.name==="AuthRetryableFetchError"}class bs extends He{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class _i extends He{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const br="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ss=` 	
\r=`.split(""),ku=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Ss.length;e+=1)i[Ss[e].charCodeAt(0)]=-2;for(let e=0;e<br.length;e+=1)i[br[e].charCodeAt(0)]=e;return i})();function Es(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(br[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(br[r]),e.queuedBits-=6}}function xn(i,e,t){const r=ku[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Cs(i){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=a=>{Iu(a,r,t)};for(let a=0;a<i.length;a+=1)xn(i.charCodeAt(a),s,n);return e.join("")}function Au(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Ru(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}Au(r,e)}}function Iu(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if(!(i>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function xu(i){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<i.length;s+=1)xn(i.charCodeAt(s),t,r);return new Uint8Array(e)}function Ou(i){const e=[];return Ru(i,t=>e.push(t)),new Uint8Array(e)}function Lu(i){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return i.forEach(s=>Es(s,t,r)),Es(null,t,r),e.join("")}function Nu(i){return Math.round(Date.now()/1e3)+i}function Pu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Se=()=>typeof window<"u"&&typeof document<"u",Ge={tested:!1,writable:!1},On=()=>{if(!Se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ge.tested)return Ge.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ge.tested=!0,Ge.writable=!0}catch{Ge.tested=!0,Ge.writable=!1}return Ge.writable};function Fu(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,n)=>{e[n]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Ln=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>zt(async()=>{const{default:r}=await Promise.resolve().then(()=>Et);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Vu=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",pt=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},Je=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Me=async(i,e)=>{await i.removeItem(e)};class Or{constructor(){this.promise=new Or.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Or.promiseConstructor=Promise;function ei(i){const e=i.split(".");if(e.length!==3)throw new _i("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!wu.test(e[r]))throw new _i("JWT not in base64url format");return{header:JSON.parse(Cs(e[0])),payload:JSON.parse(Cs(e[1])),signature:xu(e[2]),raw:{header:e[0],payload:e[1]}}}async function ju(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function Mu(i,e){return new Promise((r,s)=>{(async()=>{for(let n=0;n<1/0;n++)try{const a=await i(n);if(!e(n,null,a)){r(a);return}}catch(a){if(!e(n,a)){s(a);return}}})()})}function Du(i){return("0"+i.toString(16)).substr(-2)}function $u(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let n=0;n<56;n++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Du).join("")}async function Uu(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(n=>String.fromCharCode(n)).join("")}async function Bu(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Uu(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lt(i,e,t=!1){const r=$u();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await pt(i,`${e}-code-verifier`,s);const n=await Bu(r);return[n,r===n?"plain":"s256"]}const zu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qu(i){const e=i.headers.get(mi);if(!e||!e.match(zu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hu(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Wu(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ku=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ct(i){if(!Ku.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ti(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ts(i){return JSON.parse(JSON.stringify(i))}var Gu=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(t[r[s]]=i[r[s]]);return t};const Ye=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Ju=[502,503,504];async function ks(i){var e;if(!Vu(i))throw new gi(Ye(i),0);if(Ju.includes(i.status))throw new gi(Ye(i),i.status);let t;try{t=await i.json()}catch(n){throw new In(Ye(n),n)}let r;const s=qu(i);if(s&&s.getTime()>=Rn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new bs(Ye(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new De}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new bs(Ye(t),i.status,t.weak_password.reasons);throw new Su(Ye(t),i.status||500,r)}const Yu=(i,e,t,r)=>{const s={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function M(i,e,t,r){var s;const n=Object.assign({},r==null?void 0:r.headers);n[mi]||(n[mi]=Rn["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Qu(i,e,t+o,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Qu(i,e,t,r,s,n){const a=Yu(e,r,s,n);let o;try{o=await i(t,Object.assign({},a))}catch(l){throw console.error(l),new gi(Ye(l),0)}if(o.ok||await ks(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await ks(l)}}function Oe(i){var e;let t=null;th(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Nu(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function As(i){const e=Oe(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Ue(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function Xu(i){return{data:i,error:null}}function Zu(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:n}=i,a=Gu(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:n},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function eh(i){return i}function th(i){return i.access_token&&i.refresh_token&&i.expires_in}const ri=["global","local","others"];var rh=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(t[r[s]]=i[r[s]]);return t};class ih{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Ln(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ri[0]){if(ri.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ri.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ue})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=rh(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Zu,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(N(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ue})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:""},xform:eh});if(u.error)throw u.error;const h=await u.json(),d=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(N(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ct(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ue})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ct(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ue})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ct(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ue})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ct(e.userId);try{const{data:t,error:r}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(N(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ct(e.userId),ct(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}}function Rs(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function sh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ut={debug:!!(globalThis&&On()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nh extends Nn{}async function ah(i,e,t){ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ut.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,s.name);try{return await t()}finally{ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,s.name)}}else{if(e===0)throw ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new nh(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ut.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}sh();const oh={url:_u,storageKey:vu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Is(i,e,t){return await t()}const ht={};class Bt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bt.nextInstanceID,Bt.nextInstanceID+=1,this.instanceID>0&&Se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},oh),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ih({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ln(s.fetch),this.lock=s.lock||Is,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Se()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ah:this.lock=Is,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:On()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rs(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Rs(this.memoryStorage)),Se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ht[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ht[this.storageKey]=Object.assign(Object.assign({},ht[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ht[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ht[this.storageKey]=Object.assign(Object.assign({},ht[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${An}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Fu(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Se()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),Tu(n)){const l=(e=n.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return N(t)?{error:t}:{error:new In("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Oe}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:u,password:h,options:d}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await lt(this.storage,this.storageKey)),n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:p},xform:Oe})}else if("phone"in e){const{phone:u,password:h,options:d}=e;n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Oe})}else throw new sr("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:a,options:o}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:As})}else if("phone"in e){const{phone:n,password:a,options:o}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:As})}else throw new sr("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ir}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,n,a,o,l,c,u,h,d,m;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:E,options:w}=e;let k;if(Se())if(typeof b=="object")k=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=b}const A=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),E?{statement:E}:null));let x;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")x=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)x=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)p=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),y=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${A.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((n=w==null?void 0:w.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:v,error:b}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Lu(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Oe});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new ir}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(N(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const t=await Je(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:n,error:a}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Oe});if(await Me(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new ir}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:s??null}),error:a})}catch(n){if(N(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:a}=e,o=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Oe}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ir}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await lt(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new sr("You must provide either an email or phone number.")}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:Oe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=await lt(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Xu})}catch(n){if(N(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new De;const{error:s}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:a}=await M(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:n}=e,{data:a,error:o}=await M(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new sr("You must provide either an email or phone number and a type")}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Je(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Xr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Je(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=ti()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ue}):await this._useSession(async t=>{var r,s,n;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new De}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0,xform:Ue})})}catch(t){if(N(t))return Cu(t)&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new De;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await lt(this.storage,this.storageKey));const{data:c,error:u}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ue});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new De;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:a}=ei(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(N(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new De;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Se())throw new nr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ws("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ws("No code detected.");const{data:E,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!n||!o||!a||!c)throw new nr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let d=u+h;l&&(d=parseInt(l));const m=d-u;m*1e3<=ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:y,error:v}=await this._getUser(n);if(v)throw v;const b={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:h,expires_at:d,refresh_token:a,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(N(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Je(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Eu(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Pu(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:n},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await lt(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(N(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async n=>{var a,o,l,c,u;const{data:h,error:d}=n;if(d)throw d;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Se()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(N(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)throw a;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Mu(async s=>(s>0&&await ju(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Oe})),(s,n)=>{const a=200*Math.pow(2,s);return n&&Zr(n)&&Date.now()+a-r<ft})}catch(r){if(this._debug(t,"error",r),N(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Se()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Je(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Je(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await pt(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:ti()}else if(s&&!s.user&&!s.user){const a=await Je(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Me(this.storage,this.storageKey+"-user"),await pt(this.storage,this.storageKey,s)):s.user=ti()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xr;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Xr}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Zr(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Or;const{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new De;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(s,"error",n),N(n)){const a={session:null,error:n};return Zr(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){n.push(l)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await pt(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const n=Ts(s);await pt(this.storage,this.storageKey,n)}else{const s=Ts(t);await pt(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Me(this.storage,this.storageKey),await Me(this.storage,this.storageKey+"-code-verifier"),await Me(this.storage,this.storageKey+"-user"),this.userStorage&&await Me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ft}ms, refresh threshold is ${pi} ticks`),s<=pi&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Nn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,a]=await lt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);s.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await M(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:o}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(N(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(N(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),n=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ei(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+bu>s)return r;const{data:n,error:a}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=s,r=n.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};r=m.session.access_token}const{header:s,payload:n,signature:a,raw:{header:o,payload:l}}=ei(r);t!=null&&t.allowExpired||Hu(n.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:n,header:s,signature:a},error:null}}const u=Wu(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,Ou(`${o}.${l}`)))throw new _i("Invalid JWT signature");return{data:{claims:n,header:s,signature:a},error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}}Bt.nextInstanceID=0;const lh=Bt;class ch extends lh{constructor(e){super(e)}}var uh=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?n(u.value):s(u.value).then(o,l)}c((r=r.apply(i,e||[])).next())})};class hh{constructor(e,t,r){var s,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=mu(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:ou,realtime:cu,auth:Object.assign(Object.assign({},lu),{storageKey:c}),global:au},h=gu(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=fu(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ac(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new iu(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new nc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:n,flowType:a,lock:o,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ch({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dh=(i,e,t)=>new hh(i,e,t);function fh(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fh()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var ph=i=>{if(Object.prototype.toString.call(i)!=="[object Object]")return!1;const e=Object.getPrototypeOf(i);return e===null||e===Object.prototype};const Sr=ph,{hasOwnProperty:Pn}=Object.prototype,{propertyIsEnumerable:mh}=Object,vt=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),gh=pe,xs={concatArrays:!1,ignoreUndefined:!1},Lr=i=>{const e=[];for(const t in i)Pn.call(i,t)&&e.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(i);for(const r of t)mh.call(i,r)&&e.push(r)}return e};function Tt(i){return Array.isArray(i)?_h(i):Sr(i)?vh(i):i}function _h(i){const e=i.slice(0,0);return Lr(i).forEach(t=>{vt(e,t,Tt(i[t]))}),e}function vh(i){const e=Object.getPrototypeOf(i)===null?Object.create(null):{};return Lr(i).forEach(t=>{vt(e,t,Tt(i[t]))}),e}const Fn=(i,e,t,r)=>(t.forEach(s=>{typeof e[s]>"u"&&r.ignoreUndefined||(s in i&&i[s]!==Object.getPrototypeOf(i)?vt(i,s,vi(i[s],e[s],r)):vt(i,s,Tt(e[s])))}),i),yh=(i,e,t)=>{let r=i.slice(0,0),s=0;return[i,e].forEach(n=>{const a=[];for(let o=0;o<n.length;o++)Pn.call(n,o)&&(a.push(String(o)),n===i?vt(r,s++,n[o]):vt(r,s++,Tt(n[o])));r=Fn(r,n,Lr(n).filter(o=>!a.includes(o)),t)}),r};function vi(i,e,t){return t.concatArrays&&Array.isArray(i)&&Array.isArray(e)?yh(i,e,t):!Sr(e)||!Sr(i)?Tt(e):Fn(i,e,Lr(e),t)}var wh=function(...i){const e=vi(Tt(xs),this!==gh&&this||{},xs);let t={_:{}};for(const r of i)if(r!==void 0){if(!Sr(r))throw new TypeError("`"+r+"` is not an Option Object");t=vi(t,{_:r},e)}return t._};const bh=Er(wh),Sh=bh.bind({concatArrays:!0,ignoreUndefined:!0});function Eh(i,e){const t=window.localStorage.getItem(i);if(t){const r=JSON.parse(t),s=JSON.parse(e),n=JSON.stringify(Sh(r,s));window.localStorage.setItem(i,n)}else window.localStorage.setItem(i,e)}function dt(i,e){return new Promise((t,r)=>{try{const s=i();e==null||e(null,s),t(s)}catch(s){e==null||e(s),r(s)}})}function ar(i,e,t){return Promise.all(i).then(r=>{const s=(t==null?void 0:t(r))??null;return e==null||e(null,s),Promise.resolve(s)},r=>(e==null||e(r),Promise.reject(r)))}const Nt={getItem:(i,e)=>dt(()=>window.localStorage.getItem(i),e),setItem:(i,e,t)=>dt(()=>window.localStorage.setItem(i,e),t),removeItem:(i,e)=>dt(()=>window.localStorage.removeItem(i),e),mergeItem:(i,e,t)=>dt(()=>Eh(i,e),t),clear:i=>dt(()=>window.localStorage.clear(),i),getAllKeys:i=>dt(()=>{const e=window.localStorage.length,t=[];for(let r=0;r<e;r+=1){const s=window.localStorage.key(r)||"";t.push(s)}return t},i),flushGetRequests:()=>{},multiGet:(i,e)=>{const t=i.map(s=>Nt.getItem(s));return ar(t,e,s=>s.map((n,a)=>[i[a],n]))},multiSet:(i,e)=>{const t=i.map(r=>Nt.setItem(r[0],r[1]));return ar(t,e)},multiRemove:(i,e)=>{const t=i.map(r=>Nt.removeItem(r));return ar(t,e)},multiMerge:(i,e)=>{const t=i.map(r=>Nt.mergeItem(r[0],r[1]));return ar(t,e)}};function Ch(i){let e=null;const t={select:r=>t,insert:r=>Promise.resolve({data:r,error:null}),update:r=>({eq:(s,n)=>Promise.resolve({data:r,error:null})}),delete:()=>({eq:(r,s)=>Promise.resolve({data:null,error:null})}),eq:(r,s)=>t,in:(r,s)=>t,gte:(r,s)=>t,lte:(r,s)=>t,not:(r,s,n)=>t,order:(r,s)=>t,limit:r=>t,match:r=>t,single:()=>Promise.resolve({data:e??{},error:null}),maybeSingle:()=>Promise.resolve({data:e,error:null}),__setData:r=>(e=r,t)};return t}const Th={from:i=>Ch(),auth:{signIn:async i=>({user:null,session:null,error:null}),signOut:async()=>({error:null}),getSession:async()=>({session:null,error:null})}};var yt={};const kh=()=>({getItem:i=>{try{return Promise.resolve(localStorage.getItem(i))}catch{return Promise.resolve(null)}},setItem:(i,e)=>{try{return localStorage.setItem(i,e),Promise.resolve()}catch{return Promise.resolve()}},removeItem:i=>{try{return localStorage.removeItem(i),Promise.resolve()}catch{return Promise.resolve()}}}),Vn=yt.EXPO_PUBLIC_SUPABASE_URL||yt.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",Ah=yt.EXPO_PUBLIC_SUPABASE_ANON_KEY||yt.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-anon-key",Rh=yt.EXPO_PUBLIC_USE_ALL_MOCKS==="1"||yt.USE_MOCKS==="true";Vn==="https://placeholder.supabase.co"&&console.warn("Using placeholder Supabase configuration for development");const be=Rh?Th:dh(Vn,Ah,{auth:{storage:kh(),autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},global:{headers:{"x-platform":he.OS}}});function Ih(i){if(i!=null&&i.message){const e={"Invalid login credentials":"Incorrect email or password","User already registered":"An account with this email already exists","Email not confirmed":"Please verify your email before logging in","Password should be at least 6 characters":"Password must be at least 6 characters long","Network error":"Unable to connect. Please check your internet connection"};for(const[t,r]of Object.entries(e))if(i.message.includes(t))return r;return i.message}return"An unexpected error occurred. Please try again."}var Os={};const Ze=class Ze{constructor(){Ve(this,"authState",{user:null,session:null,loading:!0,initialized:!1});Ve(this,"listeners",[]);this.initialize()}static getInstance(){return Ze.instance||(Ze.instance=new Ze),Ze.instance}async initialize(){try{const{data:{session:e},error:t}=await be.auth.getSession();if(t&&console.warn("Error getting initial session:",t),e!=null&&e.user){const r=await this.fetchUserProfile(e.user.id);this.updateAuthState({user:{...e.user,profile:r},session:e,loading:!1,initialized:!0})}else this.updateAuthState({user:null,session:null,loading:!1,initialized:!0});be.auth.onAuthStateChange(async(r,s)=>{var n;if(console.log("Auth state changed:",r,(n=s==null?void 0:s.user)==null?void 0:n.id),s!=null&&s.user){const a=await this.fetchUserProfile(s.user.id);this.updateAuthState({user:{...s.user,profile:a},session:s,loading:!1,initialized:!0})}else this.updateAuthState({user:null,session:null,loading:!1,initialized:!0})})}catch(e){console.error("Auth initialization error:",e),this.updateAuthState({user:null,session:null,loading:!1,initialized:!0})}}updateAuthState(e){this.authState={...this.authState,...e},this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>e(this.authState))}subscribe(e){return this.listeners.push(e),e(this.authState),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}getAuthState(){return this.authState}async signInWithGitHub(){try{if(this.updateAuthState({loading:!0}),Os.USE_MOCKS==="true"){const r={id:`user_${Date.now()}`,email:"dev@quizmentor.local",user_metadata:{name:"Dev User"}},s=await this.fetchUserProfile(r.id);return this.updateAuthState({user:{...r,profile:s},session:{access_token:"mock_access",refresh_token:"mock_refresh",token_type:"bearer",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,user:r},loading:!1,initialized:!0}),{}}const{data:e,error:t}=await be.auth.signInWithOAuth({provider:"github",options:{redirectTo:he.OS==="web"?`${window.location.origin}/auth/callback`:"quizmentor://auth/callback",queryParams:{access_type:"offline",prompt:"consent"}}});return t?(this.updateAuthState({loading:!1}),{error:t}):(he.OS,{})}catch(e){return this.updateAuthState({loading:!1}),{error:e}}}async signInWithEmail(e,t){try{if(this.updateAuthState({loading:!0}),Os.USE_MOCKS==="true"){const n={id:`user_${Date.now()}`,email:e,user_metadata:{name:e.split("@")[0]}},a=await this.fetchUserProfile(n.id);return this.updateAuthState({user:{...n,profile:a},session:{access_token:"mock_access",refresh_token:"mock_refresh",token_type:"bearer",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,user:n},loading:!1,initialized:!0}),{}}const{data:r,error:s}=await be.auth.signInWithPassword({email:e,password:t});return s?(this.updateAuthState({loading:!1}),{error:s}):{}}catch(r){return this.updateAuthState({loading:!1}),{error:r}}}async signUpWithEmail(e,t,r){try{this.updateAuthState({loading:!0});const{data:s,error:n}=await be.auth.signUp({email:e,password:t,options:{data:r}});return n?(this.updateAuthState({loading:!1}),{error:n}):(s.user&&await this.createUserProfile(s.user.id,{username:e.split("@")[0],display_name:(r==null?void 0:r.display_name)||e.split("@")[0],avatar_url:null,bio:null,level:1,xp:0,total_points:0,current_streak:0,longest_streak:0,theme:"light",language:"en",notifications_enabled:!0,sound_enabled:!0,last_active_at:new Date().toISOString()}),{})}catch(s){return this.updateAuthState({loading:!1}),{error:s}}}async signOut(){try{this.updateAuthState({loading:!0});const{error:e}=await be.auth.signOut();return e?(this.updateAuthState({loading:!1}),{error:e}):(await Nt.multiRemove(["userStats","activeQuests","cachedQuestions"]),{})}catch(e){return this.updateAuthState({loading:!1}),{error:e}}}async fetchUserProfile(e){try{const{data:t,error:r}=await be.from("profiles").select("*").eq("id",e).single();if(r){console.warn("Error fetching user profile:",r);return}return t}catch(t){console.warn("Error fetching user profile:",t);return}}async createUserProfile(e,t){try{const{error:r}=await be.from("profiles").insert({id:e,...t});r&&console.error("Error creating user profile:",r)}catch(r){console.error("Error creating user profile:",r)}}async updateProfile(e){try{if(!this.authState.user)return{error:new Error("No authenticated user")};const{error:t}=await be.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",this.authState.user.id);if(t)return{error:t};const r=await this.fetchUserProfile(this.authState.user.id);return this.updateAuthState({user:{...this.authState.user,profile:r}}),{}}catch(t){return{error:t}}}async resetPassword(e){try{const{error:t}=await be.auth.resetPasswordForEmail(e,{redirectTo:he.OS==="web"?`${window.location.origin}/auth/reset-password`:"quizmentor://auth/reset-password"});return{error:t}}catch(t){return{error:t}}}async updatePassword(e){try{const{error:t}=await be.auth.updateUser({password:e});return{error:t}}catch(t){return{error:t}}}getErrorMessage(e){return Ih(e)}};Ve(Ze,"instance");let yi=Ze;yi.getInstance();const xh=g.createContext(void 0),Oh=()=>{const i=g.useContext(xh);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},{width:Lh,height:Nh}=ze.get("window");function Ph({user:i,onCategorySelect:e,onStartLearning:t}){var p,y,v,b;const r=g.useRef(new _.Value(0)).current,s=g.useRef(new _.Value(50)).current,n=g.useRef(new _.Value(.9)).current,a=g.useRef(new _.Value(1)).current,o=g.useRef(new _.Value(0)).current,l=[{id:"javascript",name:"JavaScript",icon:"⚡",gradient:[L.primary[600],L.primary[700]],questions:150,difficulty:"Beginner",color:"#1d4ed8"},{id:"react",name:"React",icon:"⚛️",gradient:[L.primary[600],L.primary[700]],questions:200,difficulty:"Intermediate",color:"#0d9488"},{id:"typescript",name:"TypeScript",icon:"🔷",gradient:[L.primary[600],L.primary[700]],questions:180,difficulty:"Advanced",color:"#7c3aed"},{id:"nodejs",name:"Node.js",icon:"🟢",gradient:[L.primary[600],L.primary[700]],questions:120,difficulty:"Intermediate",color:"#059669"}],{user:c,signInWithGitHub:u}=Oh(),h=i||{id:(c==null?void 0:c.id)||"guest",name:(c==null?void 0:c.name)||((p=c==null?void 0:c.email)==null?void 0:p.split("@")[0])||"Guest",email:(c==null?void 0:c.email)||"guest@quizmentor.local",level:Number(((y=c==null?void 0:c.metadata)==null?void 0:y.level)??1),xp:Number(((v=c==null?void 0:c.metadata)==null?void 0:v.xp)??0),streak:Number(((b=c==null?void 0:c.metadata)==null?void 0:b.streak)??0)};g.useEffect(()=>{const E=[_.timing(r,{toValue:1,duration:1e3,useNativeDriver:!0}),_.timing(s,{toValue:0,duration:800,useNativeDriver:!0}),_.timing(n,{toValue:1,duration:800,useNativeDriver:!0})];_.parallel(E).start(),_.loop(_.timing(o,{toValue:1,duration:3e3,useNativeDriver:!0})).start(),_.loop(_.sequence([_.timing(a,{toValue:1.1,duration:2e3,useNativeDriver:!0}),_.timing(a,{toValue:1,duration:2e3,useNativeDriver:!0})])).start()},[]);const d=E=>{gt(ce.Light),e==null||e(E)},m=()=>{gt(ce.Medium),t==null||t()};return f.createElement(R,{style:I.container},f.createElement(ee,{colors:L.gradients.dark,start:{x:0,y:0},end:{x:1,y:1},style:G.absoluteFillObject}),f.createElement(_.View,{style:[I.particlesContainer,{opacity:o}]},[...Array(20)].map((E,w)=>f.createElement(_.View,{key:w,style:[I.particle,{left:Math.random()*Lh,top:Math.random()*Nh,backgroundColor:["#ffffff40","#4f46e520","#7c3aed30","#1d4ed820"][w%4],animationDelay:`${Math.random()*3}s`}]}))),f.createElement(Oi,{style:I.safeArea},f.createElement(tt,{style:I.scrollView,showsVerticalScrollIndicator:!1,contentContainerStyle:I.scrollContent},f.createElement(_.View,{style:[I.header,{opacity:r,transform:[{translateY:s}]}]},f.createElement(R,{style:I.userInfo},f.createElement(_.View,{style:[I.avatarContainer,{transform:[{scale:a}]}]},f.createElement(ee,{colors:[L.primary[600],L.primary[700]],style:I.avatar},f.createElement(Qe,{name:"brain",size:40,color:"#FFFFFF"}))),f.createElement(R,{style:I.userText},f.createElement(O,{style:I.welcomeText},"Welcome back!"),f.createElement(O,{style:I.userName},h.name),f.createElement(R,{style:I.statsRow},f.createElement(R,{style:I.stat},f.createElement(O,{style:I.statValue},"Level ",h.level),f.createElement(O,{style:I.statLabel},"Level")),f.createElement(R,{style:I.stat},f.createElement(O,{style:I.statValue},h.xp," XP"),f.createElement(O,{style:I.statLabel},"Experience")),f.createElement(R,{style:I.stat},f.createElement(O,{style:I.statValue},"🔥 ",h.streak),f.createElement(O,{style:I.statLabel},"Streak")))))),f.createElement(_.View,{style:[I.mainContent,{opacity:r,transform:[{translateY:s},{scale:n}]}]},!c&&f.createElement(R,{style:I.authCta},f.createElement(O,{style:I.authCtaText},"Sign in to sync your progress and unlock achievements"),f.createElement(le,{onPress:()=>u(),style:I.authCtaButton},f.createElement(ee,{colors:[L.primary[500],L.primary[700]],style:I.authCtaGradient},f.createElement(O,{style:I.authCtaButtonText},"Sign in with GitHub")))),f.createElement(R,{style:I.heroSection},f.createElement(O,{style:I.heroTitle},"Level Up Your Skills"),f.createElement(O,{style:I.heroSubtitle},"Master programming with interactive quizzes and challenges"),f.createElement(le,{style:I.startButton,onPress:m,activeOpacity:.8},f.createElement(ee,{colors:[L.primary[500],L.primary[700]],style:I.startButtonGradient},f.createElement(O,{style:I.startButtonText},"🚀 Start Learning"),f.createElement(Qe,{name:"rocket-launch",size:24,color:"#FFFFFF"})))),f.createElement(R,{style:I.categoriesSection},f.createElement(O,{style:I.sectionTitle},"Choose Your Path"),f.createElement(R,{style:I.categoriesGrid},l.map((E,w)=>f.createElement(_.View,{key:E.id,style:[I.categoryCard,{opacity:r,transform:[{translateY:s},{scale:n}]}]},f.createElement(le,{style:I.categoryButton,onPress:()=>d(E.id),activeOpacity:.8},f.createElement(ee,{colors:E.gradient,style:I.categoryGradient},f.createElement(O,{style:I.categoryIcon},E.icon),f.createElement(O,{style:I.categoryName},E.name),f.createElement(O,{style:I.categoryQuestions},E.questions," questions"),f.createElement(R,{style:I.difficultyBadge},f.createElement(O,{style:I.difficultyText},E.difficulty)))))))),f.createElement(R,{style:I.quickActionsSection},f.createElement(O,{style:I.sectionTitle},"Quick Actions"),f.createElement(R,{style:I.quickActionsGrid},f.createElement(le,{style:I.quickActionButton},f.createElement(ee,{colors:[L.primary[600],L.primary[700]],style:I.quickActionGradient},f.createElement(Qe,{name:"trophy",size:24,color:"#FFFFFF"}),f.createElement(O,{style:I.quickActionText},"Leaderboard"))),f.createElement(le,{style:I.quickActionButton},f.createElement(ee,{colors:[L.primary[600],L.primary[700]],style:I.quickActionGradient},f.createElement(Qe,{name:"star",size:24,color:"#FFFFFF"}),f.createElement(O,{style:I.quickActionText},"Achievements"))),f.createElement(le,{style:I.quickActionButton},f.createElement(ee,{colors:[L.primary[600],L.primary[700]],style:I.quickActionGradient},f.createElement(Qe,{name:"cog",size:24,color:"#FFFFFF"}),f.createElement(O,{style:I.quickActionText},"Settings")))))))))}const I=G.create({container:{flex:1},safeArea:{flex:1},scrollView:{flex:1},scrollContent:{paddingBottom:40},particlesContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},particle:{position:"absolute",width:4,height:4,borderRadius:2,opacity:.6},header:{paddingHorizontal:20,paddingTop:20,paddingBottom:30},userInfo:{flexDirection:"row",alignItems:"center"},avatarContainer:{marginRight:15},avatar:{width:60,height:60,borderRadius:30,alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:8},userText:{flex:1},welcomeText:{fontSize:16,color:"rgba(255,255,255,0.8)",marginBottom:4},userName:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:12},statsRow:{flexDirection:"row",justifyContent:"space-between"},stat:{alignItems:"center"},statValue:{fontSize:14,fontWeight:"bold",color:"#FFFFFF"},statLabel:{fontSize:12,color:"rgba(255,255,255,0.7)",marginTop:2},mainContent:{paddingHorizontal:20},heroSection:{alignItems:"center",marginBottom:40},heroTitle:{fontSize:32,fontWeight:"bold",color:"#FFFFFF",textAlign:"center",marginBottom:8},heroSubtitle:{fontSize:16,color:"rgba(255,255,255,0.8)",textAlign:"center",marginBottom:30,lineHeight:24},startButton:{borderRadius:30,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:8},startButtonGradient:{flexDirection:"row",alignItems:"center",paddingVertical:16,paddingHorizontal:32},startButtonText:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginRight:8},categoriesSection:{marginBottom:40},sectionTitle:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:20},categoriesGrid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"},categoryCard:{width:"48%",marginBottom:16},categoryButton:{borderRadius:20,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8,elevation:8},categoryGradient:{padding:20,alignItems:"center",minHeight:140},categoryIcon:{fontSize:32,marginBottom:8},categoryName:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},categoryQuestions:{fontSize:14,color:"rgba(255,255,255,0.8)",marginBottom:12},difficultyBadge:{backgroundColor:"rgba(255,255,255,0.2)",paddingHorizontal:12,paddingVertical:4,borderRadius:12},difficultyText:{fontSize:12,fontWeight:"bold",color:"#FFFFFF"},quickActionsSection:{marginBottom:20},authCta:{backgroundColor:"rgba(255,255,255,0.06)",borderWidth:1,borderColor:"rgba(255,255,255,0.1)",borderRadius:16,padding:16,marginBottom:20},authCtaText:{color:"rgba(255,255,255,0.9)",marginBottom:12,fontSize:14,textAlign:"center"},authCtaButton:{borderRadius:12,overflow:"hidden",alignSelf:"center"},authCtaGradient:{paddingVertical:10,paddingHorizontal:16},authCtaButtonText:{color:"#fff",fontWeight:"700"},quickActionsGrid:{flexDirection:"row",justifyContent:"space-between"},quickActionButton:{flex:1,marginHorizontal:4,borderRadius:16,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:4},quickActionGradient:{padding:16,alignItems:"center"},quickActionText:{fontSize:14,fontWeight:"bold",color:"#FFFFFF",marginTop:8}}),wi=({children:i,style:e})=>f.createElement("div",{style:e},i),ii={setAudioModeAsync:async i=>{},Sound:class{},INTERRUPTION_MODE_IOS_DO_NOT_MIX:0,INTERRUPTION_MODE_ANDROID_DO_NOT_MIX:0};class Fh{constructor(){Ve(this,"sounds",new Map);Ve(this,"isEnabled",!0);Ve(this,"hapticsEnabled",!0);Ve(this,"soundEffects",[{id:"coin_collect",name:"Coin Collect",haptic:ce.Light},{id:"power_up",name:"Power Up",haptic:ce.Medium},{id:"achievement_unlock",name:"Achievement Unlock",haptic:Be.Success},{id:"level_up",name:"Level Up",haptic:Be.Success},{id:"correct_answer",name:"Correct Answer",haptic:ce.Light},{id:"wrong_answer",name:"Wrong Answer",haptic:ce.Heavy},{id:"button_tap",name:"Button Tap",haptic:ce.Light},{id:"combo_break",name:"Combo Break",haptic:ce.Heavy},{id:"quiz_complete",name:"Quiz Complete",haptic:Be.Success},{id:"mascot_happy",name:"Mascot Happy",haptic:ce.Light}])}async initialize(){try{await ii.setAudioModeAsync({allowsRecordingIOS:!1,interruptionModeIOS:ii.INTERRUPTION_MODE_IOS_DO_NOT_MIX,playsInSilentModeIOS:!0,shouldDuckAndroid:!0,interruptionModeAndroid:ii.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,playThroughEarpieceAndroid:!1,staysActiveInBackground:!1}),console.log("SoundEffectsService initialized")}catch(e){console.warn("Failed to initialize audio:",e)}}async playEffect(e,t){if(!this.isEnabled)return;const r=this.soundEffects.find(s=>s.id===e);if(!r){console.warn(`Sound effect not found: ${e}`);return}try{this.hapticsEnabled&&r.haptic&&(typeof r.haptic=="string"?await yr(r.haptic):await gt(r.haptic)),this.generateProceduralSound(e,t)}catch(s){console.warn(`Failed to play sound effect ${e}:`,s)}}generateProceduralSound(e,t){if(typeof window<"u"&&window.AudioContext){const r=new(window.AudioContext||window.webkitAudioContext),s=r.createOscillator(),n=r.createGain();switch(s.connect(n),n.connect(r.destination),e){case"coin_collect":s.frequency.setValueAtTime(800,r.currentTime),s.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.1),n.gain.setValueAtTime(.3,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),s.type="sine";break;case"power_up":s.frequency.setValueAtTime(400,r.currentTime),s.frequency.exponentialRampToValueAtTime(800,r.currentTime+.2),n.gain.setValueAtTime(.4,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),s.type="square";break;case"achievement_unlock":s.frequency.setValueAtTime(523,r.currentTime),s.frequency.setValueAtTime(659,r.currentTime+.1),s.frequency.setValueAtTime(784,r.currentTime+.2),n.gain.setValueAtTime(.5,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.4),s.type="triangle";break;case"correct_answer":s.frequency.setValueAtTime(600,r.currentTime),s.frequency.exponentialRampToValueAtTime(900,r.currentTime+.05),n.gain.setValueAtTime(.2,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.05),s.type="sine";break;case"wrong_answer":s.frequency.setValueAtTime(300,r.currentTime),s.frequency.exponentialRampToValueAtTime(150,r.currentTime+.2),n.gain.setValueAtTime(.3,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),s.type="sawtooth";break;default:s.frequency.setValueAtTime(440,r.currentTime),n.gain.setValueAtTime(.1,r.currentTime),n.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),s.type="sine"}s.start(r.currentTime),s.stop(r.currentTime+.5)}}async playComboSound(e){e<=1||(await this.playEffect("correct_answer",{rate:1+e*.1}),e>=5&&setTimeout(()=>{gt(ce.Medium)},100))}async playLevelUpSequence(){await this.playEffect("level_up"),setTimeout(()=>this.playEffect("achievement_unlock"),200),setTimeout(()=>this.playEffect("power_up"),400)}async playMascotInteraction(e){switch(e){case"happy":await this.playEffect("mascot_happy");break;case"excited":await this.playEffect("power_up");break;case"thinking":await Zl();break}}setEnabled(e){this.isEnabled=e}setHapticsEnabled(e){this.hapticsEnabled=e}isAudioEnabled(){return this.isEnabled}areHapticsEnabled(){return this.hapticsEnabled}async cleanup(){for(const[e,t]of this.sounds)try{await t.unloadAsync()}catch(r){console.warn(`Failed to unload sound ${e}:`,r)}this.sounds.clear()}}const Dt=new Fh,{width:hd,height:dd}=ze.get("window"),jn=({visible:i,centerX:e,centerY:t,particleCount:r=20,duration:s=2e3,type:n="achievement",onComplete:a})=>{const o=g.useRef([]).current;g.useEffect(()=>{if(o.length===0){const h=[];for(let d=0;d<r;d++){const m={id:`particle-${d}`,x:new _.Value(e),y:new _.Value(t),scale:new _.Value(0),rotate:new _.Value(0),opacity:new _.Value(1),emoji:l(n,d),color:c(n,d)};h.push(m)}o.splice(0,o.length,...h)}},[]),g.useEffect(()=>{i&&o.length>0&&u()},[i]);const l=(h,d)=>{const m={achievement:["🏆","⭐","💎","🎖️","👑","🔥","✨","💫"],levelup:["🚀","⚡","🌟","💥","🎯","💪","🔥","✨"],combo:["💥","⚡","🔥","💫","✨","💥","⚡","🔥"],celebration:["🎉","🎊","🎈","🎁","🌟","✨","💫","🎆"]},p=m[h]||m.achievement;return p[d%p.length]},c=(h,d)=>{const m={achievement:["#FFD700","#FFA500","#FF6B6B","#4ECDC4","#45B7D1"],levelup:["#00FF00","#32CD32","#7FFF00","#ADFF2F","#9AFF9A"],combo:["#FF4500","#FF6347","#FF7F50","#FFA500","#FFD700"],celebration:["#FF69B4","#FF1493","#DA70D6","#BA55D3","#9370DB"]},p=m[h]||m.achievement;return p[d%p.length]},u=()=>{const h=o.map((d,m)=>{const p=Math.PI*2*m/o.length+(Math.random()-.5)*.5,y=100+Math.random()*150,v=e+Math.cos(p)*y,b=t+Math.sin(p)*y;return _.parallel([_.timing(d.x,{toValue:v,duration:s*.8,useNativeDriver:!0}),_.timing(d.y,{toValue:b+Math.random()*100,duration:s*.8,useNativeDriver:!0}),_.sequence([_.timing(d.scale,{toValue:1+Math.random()*.5,duration:s*.2,useNativeDriver:!0}),_.timing(d.scale,{toValue:0,duration:s*.6,useNativeDriver:!0})]),_.timing(d.rotate,{toValue:Math.random()>.5?1:-1,duration:s,useNativeDriver:!0}),_.sequence([_.timing(d.opacity,{toValue:1,duration:s*.1,useNativeDriver:!0}),_.timing(d.opacity,{toValue:0,duration:s*.9,useNativeDriver:!0})])])});_.parallel(h).start(()=>{o.forEach(d=>{d.x.setValue(e),d.y.setValue(t),d.scale.setValue(0),d.rotate.setValue(0),d.opacity.setValue(1)}),a==null||a()})};return!i||o.length===0?null:f.createElement(R,{style:G.absoluteFill,pointerEvents:"none"},o.map(h=>{const d=h.rotate.interpolate({inputRange:[-1,1],outputRange:["-360deg","360deg"]});return f.createElement(_.View,{key:h.id,style:[Ls.particle,{transform:[{translateX:h.x},{translateY:h.y},{scale:h.scale},{rotate:d}],opacity:h.opacity}]},f.createElement(_.Text,{style:[Ls.particleEmoji,{color:h.color}]},h.emoji))}))},Mn=()=>{const[i,e]=f.useState({visible:!1,centerX:0,centerY:0,type:"achievement"});return{explosion:i,triggerExplosion:(s,n,a="achievement")=>{e({visible:!0,centerX:s,centerY:n,type:a})},hideExplosion:()=>{e(s=>({...s,visible:!1}))}}},Ls=G.create({particle:{position:"absolute",alignItems:"center",justifyContent:"center"},particleEmoji:{fontSize:24,textShadowColor:"rgba(0,0,0,0.5)",textShadowOffset:{width:1,height:1},textShadowRadius:2}}),{width:Vh,height:jh}=ze.get("window");function Mh({route:i,category:e,questions:t,timerSeconds:r,onComplete:s,onBack:n}){var Kt;const a=e||((Kt=i==null?void 0:i.params)==null?void 0:Kt.category)||"General",[o,l]=g.useState(0),[c,u]=g.useState(null),[h,d]=g.useState(!1),[m,p]=g.useState(0),[y,v]=g.useState(3),[b,E]=g.useState(0),{explosion:w,triggerExplosion:k,hideExplosion:A}=Mn(),[S,x]=g.useState(typeof r=="number"&&r>0?r:null);g.useEffect(()=>{typeof r=="number"&&r>0&&x(r)},[r]),g.useEffect(()=>{if(S==null||S<=0)return;const ae=setTimeout(()=>x(se=>se!=null?Math.max(0,se-1):se),1e3);return()=>clearTimeout(ae)},[S]);const F=g.useRef(new _.Value(0)).current,Y=g.useRef(new _.Value(0)).current,K=g.useRef(new _.Value(0)).current,z=g.useRef(new _.Value(0)).current;g.useRef(new _.Value(1)).current,g.useRef(new _.Value(0)).current;const J=g.useRef(new _.Value(0)).current,re=g.useRef(new _.Value(0)).current,U=t&&t.length>0?t:[{id:1,question:"What is the correct way to declare a variable in JavaScript?",options:["var myVariable = value;","let myVariable = value;","const myVariable = value;","All of the above"],correct:3,explanation:"All three are valid ways to declare variables in JavaScript, each with different scoping rules."},{id:2,question:"Which React hook is used for side effects?",options:["useState","useEffect","useContext","useReducer"],correct:1,explanation:"useEffect is specifically designed for handling side effects in functional components."},{id:3,question:"What does TypeScript add to JavaScript?",options:["Static typing","Object-oriented features","Better performance","All of the above"],correct:0,explanation:"TypeScript primarily adds static typing to JavaScript, making code more reliable and maintainable."}],ie=U[o],Fe=U&&U.length>0?(o+1)/U.length:0;g.useEffect(()=>{try{Dt.initialize()}catch(ae){console.warn("Sound effects init failed:",ae)}_.stagger(200,[_.spring(F,{toValue:1,tension:50,friction:8,useNativeDriver:!0}),_.spring(Y,{toValue:1,tension:40,friction:8,useNativeDriver:!0})]).start(),_.timing(K,{toValue:Fe,duration:800,easing:Re.out(Re.cubic),useNativeDriver:!1}).start(),_.spring(z,{toValue:m,tension:50,friction:8,useNativeDriver:!1}).start()},[o,Fe,m]);const Nr=ae=>{if(h)return;u(ae),d(!0),ae===ie.correct?(yr(Be.Success),Dt.playEffect("achievement_unlock"),p(ye=>ye+10+b*5),E(ye=>ye+1),k(Vh/2,jh/2,"celebration"),_.sequence([_.timing(re,{toValue:1,duration:300,useNativeDriver:!1}),_.timing(re,{toValue:0,duration:300,useNativeDriver:!1})]).start()):(yr(Be.Error),Dt.playEffect("button_tap"),v(ye=>ye-1),E(0),_.sequence([_.timing(J,{toValue:10,duration:100,useNativeDriver:!1}),_.timing(J,{toValue:0,duration:100,useNativeDriver:!1})]).start()),setTimeout(()=>{o<U.length-1&&y>0?Wt():s?s(m,U.length,a):console.warn("Quiz completed but no onComplete callback provided")},2e3)},Wt=()=>{u(null),d(!1),l(ae=>ae+1)},nt=(ae,se)=>{const ye=c===se,at=ie.correct===se,kt=h;let Ie="rgba(255, 255, 255, 0.1)",ne="rgba(255, 255, 255, 0.2)";return kt?at?(Ie="rgba(34, 197, 94, 0.2)",ne="#22C55E"):ye&&!at&&(Ie="rgba(239, 68, 68, 0.2)",ne="#EF4444"):ye&&(Ie="rgba(14, 165, 233, 0.2)",ne=L.primary[500]),f.createElement(le,{testID:`answer-option-${se}`,accessibilityRole:"button",accessibilityLabel:`Answer option ${se+1}: ${ae}`,focusable:!0,key:se,style:[$.optionButton,{backgroundColor:Ie,borderColor:ne,transform:[{translateY:Y.interpolate({inputRange:[0,1],outputRange:[50,0]})}]}],onPress:()=>Nr(se),disabled:h,activeOpacity:.8},f.createElement(R,{style:$.optionContent},f.createElement(O,{style:$.optionText},ae),kt&&at&&f.createElement(me,{name:"checkmark-circle",size:24,color:"#22C55E"}),kt&&ye&&!at&&f.createElement(me,{name:"close-circle",size:24,color:"#EF4444"})))};return!U||U.length===0?f.createElement(wi,{style:$.container},f.createElement(ee,{colors:L.gradients.dark,style:G.absoluteFillObject}),f.createElement(R,{style:{flex:1,justifyContent:"center",alignItems:"center",padding:24}},f.createElement(O,{style:{color:"#E5E7EB",fontSize:16,textAlign:"center",marginBottom:16}},"No questions available for this category right now."),f.createElement(le,{onPress:()=>n?n():console.warn("No onBack callback provided"),style:{paddingVertical:12,paddingHorizontal:20,borderRadius:10,backgroundColor:"rgba(255,255,255,0.1)"}},f.createElement(O,{style:{color:"#FFFFFF",fontWeight:"600"}},"Go Back")))):f.createElement(wi,{testID:"quiz-screen",style:$.container},f.createElement(ee,{colors:L.gradients.dark,style:G.absoluteFillObject}),f.createElement(R,{style:$.header},f.createElement(le,{testID:"back-button",accessibilityRole:"button",accessibilityLabel:"Go back",style:$.backButton,onPress:()=>n?n():console.warn("No onBack callback provided")},f.createElement(me,{name:"arrow-back",size:24,color:"#FFFFFF"})),f.createElement(R,{style:$.headerInfo},f.createElement(O,{style:$.categoryText},a),f.createElement(O,{testID:"question-counter",style:$.questionCounter},o+1," / ",U.length)),f.createElement(R,{style:$.headerStats},f.createElement(R,{style:$.statItem},f.createElement(me,{name:"heart",size:20,color:"#EF4444"}),f.createElement(O,{style:$.statText},y)),f.createElement(R,{style:$.statItem},f.createElement(me,{name:"flash",size:20,color:"#F59E0B"}),f.createElement(O,{style:$.statText},b)),typeof S=="number"&&f.createElement(R,{style:$.statItem},f.createElement(me,{name:"time",size:20,color:"#F59E0B"}),f.createElement(O,{testID:"timer-remaining",style:$.statText},S,"s")))),f.createElement(R,{style:$.progressContainer},f.createElement(_.View,{style:[$.progressBar,{width:K.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}]})),f.createElement(_.View,{style:[$.scoreContainer,{transform:[{scale:z.interpolate({inputRange:[0,100],outputRange:[1,1.1]})}]}]},f.createElement(O,{style:$.scoreText},m),f.createElement(O,{style:$.scoreLabel},"POINTS")),f.createElement(tt,{style:$.content,contentContainerStyle:$.contentContainer,showsVerticalScrollIndicator:!1},f.createElement(_.View,{testID:"question-card",style:[$.questionCard,{opacity:F,transform:[{translateY:F.interpolate({inputRange:[0,1],outputRange:[50,0]})},{scale:F}]}]},f.createElement(ee,{colors:["rgba(14, 165, 233, 0.1)","rgba(14, 165, 233, 0.1)"],style:$.questionGradient},f.createElement(O,{testID:"question-text",style:$.questionText},ie.question))),f.createElement(R,{style:$.optionsContainer},ie.options.map((ae,se)=>nt(ae,se))),h&&f.createElement(_.View,{testID:"explanation-card",style:[$.explanationCard,{opacity:F,transform:[{translateY:F.interpolate({inputRange:[0,1],outputRange:[30,0]})}]}]},f.createElement(O,{style:$.explanationTitle},"Explanation"),f.createElement(O,{style:$.explanationText},ie.explanation))),f.createElement(jn,{visible:w.visible,centerX:w.centerX,centerY:w.centerY,type:w.type,onComplete:A}))}const $=G.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingVertical:15,borderBottomWidth:1,borderBottomColor:"rgba(255, 255, 255, 0.1)"},backButton:{padding:8,borderRadius:8,backgroundColor:"rgba(255, 255, 255, 0.1)"},headerInfo:{alignItems:"center"},categoryText:{fontSize:16,fontWeight:"600",color:"#FFFFFF"},questionCounter:{fontSize:12,color:"#9CA3AF",marginTop:2},headerStats:{flexDirection:"row",alignItems:"center"},statItem:{flexDirection:"row",alignItems:"center",marginLeft:15},statText:{fontSize:16,fontWeight:"600",color:"#FFFFFF",marginLeft:4},progressContainer:{height:4,backgroundColor:"rgba(255, 255, 255, 0.1)",marginHorizontal:20,marginTop:10,borderRadius:2,overflow:"hidden"},progressBar:{height:"100%",backgroundColor:L.primary[500],borderRadius:2},scoreContainer:{alignItems:"center",marginTop:20},scoreText:{fontSize:36,fontWeight:"bold",color:L.primary[500]},scoreLabel:{fontSize:12,color:"#9CA3AF",letterSpacing:1},content:{flex:1},contentContainer:{paddingHorizontal:20,paddingTop:20,paddingBottom:40},questionCard:{marginBottom:30,borderRadius:16,overflow:"hidden",elevation:8,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8},questionGradient:{padding:24},questionText:{fontSize:20,fontWeight:"600",color:"#FFFFFF",lineHeight:28,textAlign:"center"},optionsContainer:{marginBottom:30},optionButton:{padding:20,borderRadius:12,borderWidth:2,marginBottom:12,elevation:4,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4},optionContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},optionText:{fontSize:16,color:"#FFFFFF",flex:1,lineHeight:22},explanationCard:{backgroundColor:"rgba(14, 165, 233, 0.1)",borderRadius:12,padding:20,borderWidth:1,borderColor:"rgba(14, 165, 233, 0.3)"},explanationTitle:{fontSize:16,fontWeight:"600",color:"#4F46E5",marginBottom:8},explanationText:{fontSize:14,color:"#E5E7EB",lineHeight:20}}),{width:Ns,height:Ps}=ze.get("window");function Dh({route:i,score:e,totalQuestions:t,category:r,onGoHome:s,onRetry:n}){var F,Y,K;const a=e??((F=i==null?void 0:i.params)==null?void 0:F.score)??0,o=t??((Y=i==null?void 0:i.params)==null?void 0:Y.totalQuestions)??10,l=r??((K=i==null?void 0:i.params)==null?void 0:K.category)??"General",{explosion:c,triggerExplosion:u,hideExplosion:h}=Mn(),d=g.useRef(new _.Value(0)).current,m=g.useRef(new _.Value(0)).current,p=g.useRef(new _.Value(0)).current,y=g.useRef(new _.Value(0)).current,v=g.useRef(new _.Value(0)).current,b=Math.round(a/(o*10)*100),E=b>=90?"A":b>=80?"B":b>=70?"C":b>=60?"D":"F",w=b===100,k=b>=90;g.useEffect(()=>{try{Dt.initialize()}catch(z){console.warn("Sound effects init failed (results):",z)}_.stagger(300,[_.spring(d,{toValue:1,tension:50,friction:8,useNativeDriver:!0}),_.spring(m,{toValue:1,tension:40,friction:8,useNativeDriver:!0}),_.spring(p,{toValue:1,tension:35,friction:8,useNativeDriver:!0}),_.spring(y,{toValue:1,tension:30,friction:8,useNativeDriver:!0})]).start(),(w||k)&&setTimeout(()=>{u(Ns/2,Ps/2,"celebration"),yr(Be.Success),Dt.playEffect("achievement_unlock")},1e3),_.loop(_.sequence([_.timing(v,{toValue:1,duration:2e3,easing:Re.inOut(Re.quad),useNativeDriver:!0}),_.timing(v,{toValue:0,duration:2e3,easing:Re.inOut(Re.quad),useNativeDriver:!0})])).start()},[]);const A=()=>{switch(E){case"A":return L.semantic.success;case"B":return L.primary[500];case"C":return L.semantic.warning;case"D":return"#EF4444";case"F":return L.semantic.error;default:return"#9CA3AF"}},S=()=>w?"Perfect! You're a coding master! 🎯":k?"Excellent work! You're on fire! 🔥":b>=80?"Great job! Keep up the momentum! 💪":b>=70?"Good effort! Practice makes perfect! 📚":b>=60?"Not bad! Room for improvement! 🎯":"Keep practicing! You'll get there! 💪",x=(z,J,re,U)=>f.createElement(_.View,{style:[j.statCard,{transform:[{translateY:p.interpolate({inputRange:[0,1],outputRange:[50,0]})}]}]},f.createElement(ee,{colors:[`${U}20`,`${U}10`],style:j.statGradient},f.createElement(R,{style:j.statHeader},f.createElement(me,{name:re,size:24,color:U}),f.createElement(O,{style:[j.statTitle,{color:U}]},z)),f.createElement(O,{style:[j.statValue,{color:U}]},J)));return f.createElement(wi,{testID:"results-screen",style:j.container},f.createElement(ee,{colors:L.gradients.dark,style:G.absoluteFillObject}),f.createElement(_.View,{style:[j.confettiContainer,{opacity:v,transform:[{translateY:v.interpolate({inputRange:[0,1],outputRange:[0,-20]})}]}]},[...Array(20)].map((z,J)=>f.createElement(R,{key:J,style:[j.confetti,{left:Math.random()*Ns,top:Math.random()*Ps,backgroundColor:[L.primary[500],L.semantic.success,L.semantic.warning][Math.floor(Math.random()*3)]}]}))),f.createElement(tt,{style:j.content,contentContainerStyle:j.contentContainer,showsVerticalScrollIndicator:!1},f.createElement(_.View,{style:[j.header,{opacity:d,transform:[{translateY:d.interpolate({inputRange:[0,1],outputRange:[-50,0]})}]}]},f.createElement(le,{style:j.backButton,onPress:()=>s?s():console.warn("No onGoHome callback provided")},f.createElement(me,{name:"arrow-back",size:24,color:"#FFFFFF"})),f.createElement(O,{style:j.headerTitle},"Quiz Results"),f.createElement(R,{style:j.placeholder})),f.createElement(_.View,{style:[j.scoreContainer,{transform:[{scale:m.interpolate({inputRange:[0,1],outputRange:[.8,1]})}]}]},f.createElement(ee,{colors:["rgba(14, 165, 233, 0.2)","rgba(14, 165, 233, 0.1)"],style:j.scoreGradient},f.createElement(O,{testID:"final-score",style:j.scoreText},a),f.createElement(O,{style:j.scoreLabel},"TOTAL POINTS"),f.createElement(R,{style:[j.gradeBadge,{backgroundColor:A()}]},f.createElement(O,{style:j.gradeText},E)))),f.createElement(_.View,{style:[j.messageContainer,{opacity:m,transform:[{translateY:m.interpolate({inputRange:[0,1],outputRange:[30,0]})}]}]},f.createElement(O,{style:j.messageText},S())),f.createElement(R,{style:j.statsGrid},x("Accuracy",`${b}%`,"analytics",L.primary[500]),x("Questions",`${o}`,"help-circle",L.accent.slate),x("Category",l,"bookmark",L.accent.teal),x("Performance",E,"trophy",A())),(w||k)&&f.createElement(_.View,{style:[j.achievementContainer,{opacity:p,transform:[{translateY:p.interpolate({inputRange:[0,1],outputRange:[30,0]})}]}]},f.createElement(ee,{colors:["rgba(34, 197, 94, 0.2)","rgba(22, 163, 74, 0.2)"],style:j.achievementGradient},f.createElement(me,{name:"medal",size:32,color:"#22C55E"}),f.createElement(O,{style:j.achievementTitle},w?"Perfect Score!":"Excellent Performance!"),f.createElement(O,{style:j.achievementSubtitle},w?"You aced every question!":"Outstanding work!"))),f.createElement(_.View,{style:[j.buttonsContainer,{opacity:y,transform:[{translateY:y.interpolate({inputRange:[0,1],outputRange:[50,0]})}]}]},f.createElement(le,{testID:"results-home",style:j.primaryButton,onPress:()=>s?s():console.warn("No onGoHome callback provided")},f.createElement(ee,{colors:[L.primary[500],L.primary[700]],style:j.buttonGradient},f.createElement(me,{name:"home",size:20,color:"#FFFFFF"}),f.createElement(O,{style:j.buttonText},"Back to Home"))),f.createElement(le,{testID:"results-retry",style:j.secondaryButton,onPress:()=>n?n():console.warn("No onRetry callback provided")},f.createElement(R,{style:j.secondaryButtonContent},f.createElement(me,{name:"refresh",size:20,color:L.primary[500]}),f.createElement(O,{style:j.secondaryButtonText},"Try Again"))),f.createElement(le,{style:j.shareButton,onPress:()=>{gt(ce.Medium)}},f.createElement(R,{style:j.shareButtonContent},f.createElement(me,{name:"share-social",size:20,color:"#F59E0B"}),f.createElement(O,{style:j.shareButtonText},"Share Results"))))),f.createElement(jn,{visible:c.visible,centerX:c.centerX,centerY:c.centerY,type:c.type,onComplete:h}))}const j=G.create({container:{flex:1},confettiContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},confetti:{position:"absolute",width:8,height:8,borderRadius:4},content:{flex:1},contentContainer:{paddingHorizontal:20,paddingBottom:40},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:20},backButton:{padding:8,borderRadius:8,backgroundColor:"rgba(255, 255, 255, 0.1)"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF"},placeholder:{width:40},scoreContainer:{alignItems:"center",marginVertical:30},scoreGradient:{padding:40,borderRadius:20,alignItems:"center",borderWidth:1,borderColor:"rgba(79, 70, 229, 0.3)"},scoreText:{fontSize:64,fontWeight:"bold",color:"#4F46E5",marginBottom:8},scoreLabel:{fontSize:14,color:"#9CA3AF",letterSpacing:2,marginBottom:20},gradeBadge:{paddingHorizontal:16,paddingVertical:8,borderRadius:20,minWidth:60,alignItems:"center"},gradeText:{fontSize:24,fontWeight:"bold",color:"#FFFFFF"},messageContainer:{alignItems:"center",marginBottom:30},messageText:{fontSize:18,color:"#E5E7EB",textAlign:"center",lineHeight:24},statsGrid:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginBottom:30},statCard:{width:"48%",marginBottom:16},statGradient:{padding:20,borderRadius:16,borderWidth:1,borderColor:"rgba(255, 255, 255, 0.1)"},statHeader:{flexDirection:"row",alignItems:"center",marginBottom:12},statTitle:{fontSize:14,fontWeight:"600",marginLeft:8},statValue:{fontSize:24,fontWeight:"bold"},achievementContainer:{marginBottom:30},achievementGradient:{padding:24,borderRadius:16,alignItems:"center",borderWidth:1,borderColor:"rgba(34, 197, 94, 0.3)"},achievementTitle:{fontSize:20,fontWeight:"bold",color:"#22C55E",marginTop:12,marginBottom:4},achievementSubtitle:{fontSize:14,color:"#9CA3AF",textAlign:"center"},buttonsContainer:{gap:16},primaryButton:{borderRadius:12,overflow:"hidden",elevation:4,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.3,shadowRadius:4},buttonGradient:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:16,paddingHorizontal:24},buttonText:{fontSize:16,fontWeight:"600",color:"#FFFFFF",marginLeft:8},secondaryButton:{borderRadius:12,borderWidth:2,borderColor:"#4F46E5",backgroundColor:"rgba(79, 70, 229, 0.1)"},secondaryButtonContent:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:16,paddingHorizontal:24},secondaryButtonText:{fontSize:16,fontWeight:"600",color:"#4F46E5",marginLeft:8},shareButton:{borderRadius:12,borderWidth:2,borderColor:"#F59E0B",backgroundColor:"rgba(245, 158, 11, 0.1)"},shareButtonContent:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:16,paddingHorizontal:24},shareButtonText:{fontSize:16,fontWeight:"600",color:"#F59E0B",marginLeft:8}});function Fs(i){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...Vs(),...i.components};return P.jsxs(P.Fragment,{children:[P.jsx(e.h1,{id:"flows-documentation",children:"Flows Documentation"}),`
`,P.jsxs(e.blockquote,{children:[`
`,P.jsxs(e.p,{children:["These MDX docs render in the web Storybook only. Use ",P.jsx(e.code,{children:"npm run storybook"})," and open http://localhost:7007."]}),`
`]}),`
`,`
`,P.jsx(zn,{title:"Flows/Docs"}),`
`,P.jsx(e.h1,{id:"app-flows",children:"App Flows"}),`
`,P.jsx(e.p,{children:"Useful links"}),`
`,P.jsxs(e.ul,{children:[`
`,P.jsxs(e.li,{children:["Detailed flows (docs):",`
`,P.jsxs(e.ul,{children:[`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/USER_REGISTRATION_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/ONBOARDING_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/QUIZ_TAKING_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/RESULTS_AND_ANALYTICS_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/MULTIPLAYER_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/SETTINGS_AND_PROFILE_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/PREMIUM_AND_MONETIZATION_FLOW.md"}),`
`,P.jsx(e.li,{children:"/docs/flows/main-flows/ERROR_RECOVERY_FLOW.md"}),`
`]}),`
`]}),`
`,P.jsx(e.li,{children:"Coverage & Testing Matrix: /docs/flows/FLOW_COVERAGE_MATRIX.md"}),`
`]}),`
`,P.jsx(e.p,{children:"This section documents our primary user flows: authentication choice, home dashboard, quiz taking, and results."}),`
`,P.jsx(e.h2,{id:"auth-choice",children:"Auth Choice"}),`
`,P.jsx(Gt,{children:P.jsx(Jt,{name:"AuthChoice",children:P.jsx(tc,{onEmailLogin:()=>{},onGoogleLogin:()=>{},onGitHubLogin:()=>{},onDemoLogin:()=>{},onSignup:()=>{}})})}),`
`,P.jsx(e.h2,{id:"home",children:"Home"}),`
`,P.jsx(Gt,{children:P.jsx(Jt,{name:"Home",children:P.jsx(Ph,{user:{id:"demo",name:"Demo User",email:"demo@quizmentor.app",level:5,xp:1200,streak:3,interests:["javascript","react"],skillLevel:"intermediate"},onCategorySelect:()=>{},onStartLearning:()=>{}})})}),`
`,P.jsx(e.h2,{id:"quiz",children:"Quiz"}),`
`,P.jsx(Gt,{children:P.jsx(Jt,{name:"Quiz",children:P.jsx(Mh,{category:"javascript",questions:[{id:1,question:"What is closure in JavaScript?",options:["Block scope","Function + environment","Module pattern","Global scope"],correct:1,explanation:"A closure is function + environment."},{id:2,question:"Which hook handles side effects?",options:["useState","useEffect","useMemo","useCallback"],correct:1,explanation:"useEffect for side effects."}],onComplete:()=>{},onBack:()=>{}})})}),`
`,P.jsx(e.h2,{id:"results",children:"Results"}),`
`,P.jsx(Gt,{children:P.jsx(Jt,{name:"Results",children:P.jsx(Dh,{score:80,totalQuestions:10,category:"javascript",onGoHome:()=>{},onRetry:()=>{}})})})]})}function fd(i={}){const{wrapper:e}={...Vs(),...i.components};return e?P.jsx(e,{...i,children:P.jsx(Fs,{...i})}):Fs(i)}export{fd as default};
