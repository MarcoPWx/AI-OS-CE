import{R as e}from"./index-R2V08a_e.js";import{L as D,f as L,a as x,b as y}from"./LastUpdated-u3t6Tx8m.js";import{M as k,r as w}from"./index-sB0THNqM.js";import"./jsx-runtime-BjG_zV1W.js";function R(o,a){const[s,l]=e.useState(null),[n,r]=e.useState(null),[h,m]=e.useState(!1),[b,v]=e.useState(null),c=e.useCallback(async()=>{m(!0),r(null);try{const[t,f]=await Promise.all([L(),x(o,a)]);l(f);const i=y(t,o),p=(i==null?void 0:i.mtimeIso)||(t==null?void 0:t.generatedAtIso)||(t==null?void 0:t.generatedAt);p&&v(p),f||r("Failed to load document")}catch(t){r((t==null?void 0:t.message)||"Failed to load")}finally{m(!1)}},[o,a]);return e.useEffect(()=>{c()},[c]),{text:s,error:n,loading:h,lastUpdated:b,reload:c}}function M(){const o=e.useMemo(()=>["/docs/status/DEVLOG.md"],[]),{text:a,error:s,loading:l,lastUpdated:n,reload:r}=R(o);return e.createElement("div",{style:{padding:16,display:"grid",gap:12}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"}},e.createElement("h3",{style:{margin:0}},"Developer Log"),e.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:8,alignItems:"center"}},e.createElement(D,{iso:n}),e.createElement("button",{onClick:r,disabled:l},l?"Reloading…":"Refresh"))),s&&e.createElement("div",{role:"alert",style:{color:"#ff6b6b"}},s),!s&&!a&&e.createElement("div",null,"Loading…"),a&&e.createElement("div",{style:{maxHeight:"80vh",overflow:"auto",padding:12,border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,background:"rgba(255,255,255,0.02)"}},e.createElement(k,{remarkPlugins:[w]},a)))}const V={title:"Docs/Dev Log",component:M,parameters:{helpDocs:[{href:"?path=/story/docs-repo-docs-browser--default",title:"Repo Docs Browser"},{href:"/docs/status/DEVLOG.md",title:"Open DEVLOG.md"}],docs:{description:{component:"Renders DEVLOG.md live from /docs with fallbacks to /api/docs/read?key=devlog. Shows Last updated from the docs manifest if present."}}}},d={};var u,g,E;d.parameters={...d.parameters,docs:{...(u=d.parameters)==null?void 0:u.docs,source:{originalSource:"{}",...(E=(g=d.parameters)==null?void 0:g.docs)==null?void 0:E.source}}};const F=["Default"];export{d as Default,F as __namedExportsOrder,V as default};
